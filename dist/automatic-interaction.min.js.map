{"version":3,"file":"automatic-interaction.min.js","sources":["../node_modules/d3-array/src/ascending.js","../node_modules/d3-array/src/descending.js","../node_modules/d3-array/src/bisector.js","../node_modules/d3-array/src/bisect.js","../node_modules/d3-array/src/number.js","../node_modules/internmap/src/index.js","../node_modules/d3-array/src/identity.js","../node_modules/d3-array/src/group.js","../node_modules/d3-array/src/ticks.js","../node_modules/d3-array/src/max.js","../node_modules/d3-array/src/min.js","../node_modules/d3-array/src/mean.js","../node_modules/d3-array/src/range.js","../node_modules/d3-scale/src/init.js","../node_modules/d3-scale/src/ordinal.js","../node_modules/d3-scale/src/band.js","../node_modules/d3-color/src/define.js","../node_modules/d3-color/src/color.js","../node_modules/d3-interpolate/src/constant.js","../node_modules/d3-interpolate/src/color.js","../node_modules/d3-interpolate/src/rgb.js","../node_modules/d3-interpolate/src/numberArray.js","../node_modules/d3-interpolate/src/array.js","../node_modules/d3-interpolate/src/date.js","../node_modules/d3-interpolate/src/number.js","../node_modules/d3-interpolate/src/object.js","../node_modules/d3-interpolate/src/string.js","../node_modules/d3-interpolate/src/value.js","../node_modules/d3-interpolate/src/round.js","../node_modules/d3-scale/src/number.js","../node_modules/d3-scale/src/continuous.js","../node_modules/d3-scale/src/constant.js","../node_modules/d3-format/src/formatDecimal.js","../node_modules/d3-format/src/exponent.js","../node_modules/d3-format/src/formatSpecifier.js","../node_modules/d3-format/src/formatPrefixAuto.js","../node_modules/d3-format/src/formatRounded.js","../node_modules/d3-format/src/formatTypes.js","../node_modules/d3-format/src/identity.js","../node_modules/d3-format/src/locale.js","../node_modules/d3-format/src/defaultLocale.js","../node_modules/d3-format/src/formatGroup.js","../node_modules/d3-format/src/formatNumerals.js","../node_modules/d3-format/src/formatTrim.js","../node_modules/d3-scale/src/tickFormat.js","../node_modules/d3-format/src/precisionPrefix.js","../node_modules/d3-format/src/precisionRound.js","../node_modules/d3-format/src/precisionFixed.js","../node_modules/d3-scale/src/linear.js","../node_modules/d3-time/src/interval.js","../node_modules/d3-time/src/millisecond.js","../node_modules/d3-time/src/duration.js","../node_modules/d3-time/src/second.js","../node_modules/d3-time/src/minute.js","../node_modules/d3-time/src/hour.js","../node_modules/d3-time/src/day.js","../node_modules/d3-time/src/week.js","../node_modules/d3-time/src/month.js","../node_modules/d3-time/src/year.js","../node_modules/d3-time/src/utcMinute.js","../node_modules/d3-time/src/utcHour.js","../node_modules/d3-time/src/utcDay.js","../node_modules/d3-time/src/utcWeek.js","../node_modules/d3-time/src/utcMonth.js","../node_modules/d3-time/src/utcYear.js","../node_modules/d3-time/src/ticks.js","../node_modules/d3-time-format/src/locale.js","../node_modules/d3-time-format/src/defaultLocale.js","../node_modules/d3-scale/src/time.js","../node_modules/d3-scale/src/nice.js","../src/state/constants.js","../src/_d3/identity.js","../src/util/transform.js","../src/parsers/attribute-parsers.js","../src/util/util.js","../src/_d3/axis.js","../src/parsers/legend-parsers.js","../src/parsers/view-parsers.js","../src/state/view-state.js","../node_modules/svg-path-parser/parser.js","../node_modules/svg-path-parser/index.js","../src/orchestration/inspect.js","../src/orchestration/link.js","../node_modules/d3-array/src/sum.js","../node_modules/d3-selection/src/namespaces.js","../node_modules/d3-selection/src/namespace.js","../node_modules/d3-selection/src/creator.js","../node_modules/d3-selection/src/selector.js","../node_modules/d3-selection/src/array.js","../node_modules/d3-selection/src/selectorAll.js","../node_modules/d3-selection/src/matcher.js","../node_modules/d3-selection/src/selection/selectChild.js","../node_modules/d3-selection/src/selection/selectChildren.js","../node_modules/d3-selection/src/selection/sparse.js","../node_modules/d3-selection/src/selection/enter.js","../node_modules/d3-selection/src/constant.js","../node_modules/d3-selection/src/selection/data.js","../node_modules/d3-selection/src/selection/sort.js","../node_modules/d3-selection/src/selection/attr.js","../node_modules/d3-selection/src/window.js","../node_modules/d3-selection/src/selection/style.js","../node_modules/d3-selection/src/selection/property.js","../node_modules/d3-selection/src/selection/classed.js","../node_modules/d3-selection/src/selection/text.js","../node_modules/d3-selection/src/selection/html.js","../node_modules/d3-selection/src/selection/raise.js","../node_modules/d3-selection/src/selection/lower.js","../node_modules/d3-selection/src/selection/insert.js","../node_modules/d3-selection/src/selection/remove.js","../node_modules/d3-selection/src/selection/clone.js","../node_modules/d3-selection/src/selection/on.js","../node_modules/d3-selection/src/selection/dispatch.js","../node_modules/d3-selection/src/selection/index.js","../src/handlers/brush.js","../node_modules/d3-selection/src/pointer.js","../node_modules/d3-selection/src/sourceEvent.js","../node_modules/d3-selection/src/selectAll.js","../src/handlers/select.js","../node_modules/d3-selection/src/select.js","../src/orchestration/orchestrate.js","../node_modules/d3-selection/src/selection/select.js","../node_modules/d3-selection/src/selection/selectAll.js","../node_modules/d3-selection/src/selection/filter.js","../node_modules/d3-selection/src/selection/exit.js","../node_modules/d3-selection/src/selection/join.js","../node_modules/d3-selection/src/selection/merge.js","../node_modules/d3-selection/src/selection/order.js","../node_modules/d3-selection/src/selection/call.js","../node_modules/d3-selection/src/selection/nodes.js","../node_modules/d3-selection/src/selection/node.js","../node_modules/d3-selection/src/selection/size.js","../node_modules/d3-selection/src/selection/empty.js","../node_modules/d3-selection/src/selection/each.js","../node_modules/d3-selection/src/selection/append.js","../node_modules/d3-selection/src/selection/datum.js","../node_modules/d3-selection/src/selection/iterator.js","../src/hydrate.js"],"sourcesContent":["export default function ascending(a, b) {\n  return a == null || b == null ? NaN : a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function descending(a, b) {\n  return a == null || b == null ? NaN\n    : b < a ? -1\n    : b > a ? 1\n    : b >= a ? 0\n    : NaN;\n}\n","import ascending from \"./ascending.js\";\nimport descending from \"./descending.js\";\n\nexport default function bisector(f) {\n  let compare1, compare2, delta;\n\n  // If an accessor is specified, promote it to a comparator. In this case we\n  // can test whether the search value is (self-) comparable. We can’t do this\n  // for a comparator (except for specific, known comparators) because we can’t\n  // tell if the comparator is symmetric, and an asymmetric comparator can’t be\n  // used to test whether a single value is comparable.\n  if (f.length !== 2) {\n    compare1 = ascending;\n    compare2 = (d, x) => ascending(f(d), x);\n    delta = (d, x) => f(d) - x;\n  } else {\n    compare1 = f === ascending || f === descending ? f : zero;\n    compare2 = f;\n    delta = f;\n  }\n\n  function left(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function right(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) <= 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function center(a, x, lo = 0, hi = a.length) {\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction zero() {\n  return 0;\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n","export default function number(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n","export class InternMap extends Map {\n  constructor(entries, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (entries != null) for (const [key, value] of entries) this.set(key, value);\n  }\n  get(key) {\n    return super.get(intern_get(this, key));\n  }\n  has(key) {\n    return super.has(intern_get(this, key));\n  }\n  set(key, value) {\n    return super.set(intern_set(this, key), value);\n  }\n  delete(key) {\n    return super.delete(intern_delete(this, key));\n  }\n}\n\nexport class InternSet extends Set {\n  constructor(values, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (values != null) for (const value of values) this.add(value);\n  }\n  has(value) {\n    return super.has(intern_get(this, value));\n  }\n  add(value) {\n    return super.add(intern_set(this, value));\n  }\n  delete(value) {\n    return super.delete(intern_delete(this, value));\n  }\n}\n\nfunction intern_get({_intern, _key}, value) {\n  const key = _key(value);\n  return _intern.has(key) ? _intern.get(key) : value;\n}\n\nfunction intern_set({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) return _intern.get(key);\n  _intern.set(key, value);\n  return value;\n}\n\nfunction intern_delete({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) {\n    value = _intern.get(key);\n    _intern.delete(key);\n  }\n  return value;\n}\n\nfunction keyof(value) {\n  return value !== null && typeof value === \"object\" ? value.valueOf() : value;\n}\n","export default function identity(x) {\n  return x;\n}\n","import {InternMap} from \"internmap\";\nimport identity from \"./identity.js\";\n\nexport default function group(values, ...keys) {\n  return nest(values, identity, identity, keys);\n}\n\nexport function groups(values, ...keys) {\n  return nest(values, Array.from, identity, keys);\n}\n\nfunction flatten(groups, keys) {\n  for (let i = 1, n = keys.length; i < n; ++i) {\n    groups = groups.flatMap(g => g.pop().map(([key, value]) => [...g, key, value]));\n  }\n  return groups;\n}\n\nexport function flatGroup(values, ...keys) {\n  return flatten(groups(values, ...keys), keys);\n}\n\nexport function flatRollup(values, reduce, ...keys) {\n  return flatten(rollups(values, reduce, ...keys), keys);\n}\n\nexport function rollup(values, reduce, ...keys) {\n  return nest(values, identity, reduce, keys);\n}\n\nexport function rollups(values, reduce, ...keys) {\n  return nest(values, Array.from, reduce, keys);\n}\n\nexport function index(values, ...keys) {\n  return nest(values, identity, unique, keys);\n}\n\nexport function indexes(values, ...keys) {\n  return nest(values, Array.from, unique, keys);\n}\n\nfunction unique(values) {\n  if (values.length !== 1) throw new Error(\"duplicate key\");\n  return values[0];\n}\n\nfunction nest(values, map, reduce, keys) {\n  return (function regroup(values, i) {\n    if (i >= keys.length) return reduce(values);\n    const groups = new InternMap();\n    const keyof = keys[i++];\n    let index = -1;\n    for (const value of values) {\n      const key = keyof(value, ++index, values);\n      const group = groups.get(key);\n      if (group) group.push(value);\n      else groups.set(key, [value]);\n    }\n    for (const [key, values] of groups) {\n      groups.set(key, regroup(values, i));\n    }\n    return map(groups);\n  })(values, 0);\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function ticks(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    let r0 = Math.round(start / step), r1 = Math.round(stop / step);\n    if (r0 * step < start) ++r0;\n    if (r1 * step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) * step;\n  } else {\n    step = -step;\n    let r0 = Math.round(start * step), r1 = Math.round(stop * step);\n    if (r0 / step < start) ++r0;\n    if (r1 / step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","export default function max(values, valueof) {\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  }\n  return max;\n}\n","export default function min(values, valueof) {\n  let min;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  }\n  return min;\n}\n","export default function mean(values, valueof) {\n  let count = 0;\n  let sum = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        ++count, sum += value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        ++count, sum += value;\n      }\n    }\n  }\n  if (count) return sum / count;\n}\n","export default function range(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","import {InternMap} from \"d3-array\";\nimport {initRange} from \"./init.js\";\n\nexport const implicit = Symbol(\"implicit\");\n\nexport default function ordinal() {\n  var index = new InternMap(),\n      domain = [],\n      range = [],\n      unknown = implicit;\n\n  function scale(d) {\n    let i = index.get(d);\n    if (i === undefined) {\n      if (unknown !== implicit) return unknown;\n      index.set(d, i = domain.push(d) - 1);\n    }\n    return range[i % range.length];\n  }\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [], index = new InternMap();\n    for (const value of _) {\n      if (index.has(value)) continue;\n      index.set(value, domain.push(value) - 1);\n    }\n    return scale;\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), scale) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return ordinal(domain, range).unknown(unknown);\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n","import {range as sequence} from \"d3-array\";\nimport {initRange} from \"./init.js\";\nimport ordinal from \"./ordinal.js\";\n\nexport default function band() {\n  var scale = ordinal().unknown(undefined),\n      domain = scale.domain,\n      ordinalRange = scale.range,\n      r0 = 0,\n      r1 = 1,\n      step,\n      bandwidth,\n      round = false,\n      paddingInner = 0,\n      paddingOuter = 0,\n      align = 0.5;\n\n  delete scale.unknown;\n\n  function rescale() {\n    var n = domain().length,\n        reverse = r1 < r0,\n        start = reverse ? r1 : r0,\n        stop = reverse ? r0 : r1;\n    step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);\n    if (round) step = Math.floor(step);\n    start += (stop - start - step * (n - paddingInner)) * align;\n    bandwidth = step * (1 - paddingInner);\n    if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);\n    var values = sequence(n).map(function(i) { return start + step * i; });\n    return ordinalRange(reverse ? values.reverse() : values);\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? ([r0, r1] = _, r0 = +r0, r1 = +r1, rescale()) : [r0, r1];\n  };\n\n  scale.rangeRound = function(_) {\n    return [r0, r1] = _, r0 = +r0, r1 = +r1, round = true, rescale();\n  };\n\n  scale.bandwidth = function() {\n    return bandwidth;\n  };\n\n  scale.step = function() {\n    return step;\n  };\n\n  scale.round = function(_) {\n    return arguments.length ? (round = !!_, rescale()) : round;\n  };\n\n  scale.padding = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, paddingOuter = +_), rescale()) : paddingInner;\n  };\n\n  scale.paddingInner = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, _), rescale()) : paddingInner;\n  };\n\n  scale.paddingOuter = function(_) {\n    return arguments.length ? (paddingOuter = +_, rescale()) : paddingOuter;\n  };\n\n  scale.align = function(_) {\n    return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;\n  };\n\n  scale.copy = function() {\n    return band(domain(), [r0, r1])\n        .round(round)\n        .paddingInner(paddingInner)\n        .paddingOuter(paddingOuter)\n        .align(align);\n  };\n\n  return initRange.apply(rescale(), arguments);\n}\n\nfunction pointish(scale) {\n  var copy = scale.copy;\n\n  scale.padding = scale.paddingOuter;\n  delete scale.paddingInner;\n  delete scale.paddingOuter;\n\n  scale.copy = function() {\n    return pointish(copy());\n  };\n\n  return scale;\n}\n\nexport function point() {\n  return pointish(band.apply(null, arguments).paddingInner(1));\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","export default function number(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n","export default function constants(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, ±Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"−\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer “value” part that can be\n        // grouped, and fractional or exponential “suffix” part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function tickFormat(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","var t0 = new Date,\n    t1 = new Date;\n\nexport default function newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = arguments.length === 0 ? new Date : new Date(+date)), date;\n  }\n\n  interval.floor = function(date) {\n    return floori(date = new Date(+date)), date;\n  };\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [], previous;\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n","import interval from \"./interval.js\";\n\nvar millisecond = interval(function() {\n  // noop\n}, function(date, step) {\n  date.setTime(+date + step);\n}, function(start, end) {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = function(k) {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return interval(function(date) {\n    date.setTime(Math.floor(date / k) * k);\n  }, function(date, step) {\n    date.setTime(+date + step * k);\n  }, function(start, end) {\n    return (end - start) / k;\n  });\n};\n\nexport default millisecond;\nexport var milliseconds = millisecond.range;\n","export const durationSecond = 1000;\nexport const durationMinute = durationSecond * 60;\nexport const durationHour = durationMinute * 60;\nexport const durationDay = durationHour * 24;\nexport const durationWeek = durationDay * 7;\nexport const durationMonth = durationDay * 30;\nexport const durationYear = durationDay * 365;\n","import interval from \"./interval.js\";\nimport {durationSecond} from \"./duration.js\";\n\nvar second = interval(function(date) {\n  date.setTime(date - date.getMilliseconds());\n}, function(date, step) {\n  date.setTime(+date + step * durationSecond);\n}, function(start, end) {\n  return (end - start) / durationSecond;\n}, function(date) {\n  return date.getUTCSeconds();\n});\n\nexport default second;\nexport var seconds = second.range;\n","import interval from \"./interval.js\";\nimport {durationMinute, durationSecond} from \"./duration.js\";\n\nvar minute = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getMinutes();\n});\n\nexport default minute;\nexport var minutes = minute.range;\n","import interval from \"./interval.js\";\nimport {durationHour, durationMinute, durationSecond} from \"./duration.js\";\n\nvar hour = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getHours();\n});\n\nexport default hour;\nexport var hours = hour.range;\n","import interval from \"./interval.js\";\nimport {durationDay, durationMinute} from \"./duration.js\";\n\nvar day = interval(\n  date => date.setHours(0, 0, 0, 0),\n  (date, step) => date.setDate(date.getDate() + step),\n  (start, end) => (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay,\n  date => date.getDate() - 1\n);\n\nexport default day;\nexport var days = day.range;\n","import interval from \"./interval.js\";\nimport {durationMinute, durationWeek} from \"./duration.js\";\n\nfunction weekday(i) {\n  return interval(function(date) {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step * 7);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport var sunday = weekday(0);\nexport var monday = weekday(1);\nexport var tuesday = weekday(2);\nexport var wednesday = weekday(3);\nexport var thursday = weekday(4);\nexport var friday = weekday(5);\nexport var saturday = weekday(6);\n\nexport var sundays = sunday.range;\nexport var mondays = monday.range;\nexport var tuesdays = tuesday.range;\nexport var wednesdays = wednesday.range;\nexport var thursdays = thursday.range;\nexport var fridays = friday.range;\nexport var saturdays = saturday.range;\n","import interval from \"./interval.js\";\n\nvar month = interval(function(date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setMonth(date.getMonth() + step);\n}, function(start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, function(date) {\n  return date.getMonth();\n});\n\nexport default month;\nexport var months = month.range;\n","import interval from \"./interval.js\";\n\nvar year = interval(function(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setFullYear(date.getFullYear() + step);\n}, function(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}, function(date) {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\nyear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport default year;\nexport var years = year.range;\n","import interval from \"./interval.js\";\nimport {durationMinute} from \"./duration.js\";\n\nvar utcMinute = interval(function(date) {\n  date.setUTCSeconds(0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getUTCMinutes();\n});\n\nexport default utcMinute;\nexport var utcMinutes = utcMinute.range;\n","import interval from \"./interval.js\";\nimport {durationHour} from \"./duration.js\";\n\nvar utcHour = interval(function(date) {\n  date.setUTCMinutes(0, 0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getUTCHours();\n});\n\nexport default utcHour;\nexport var utcHours = utcHour.range;\n","import interval from \"./interval.js\";\nimport {durationDay} from \"./duration.js\";\n\nvar utcDay = interval(function(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCDate(date.getUTCDate() + step);\n}, function(start, end) {\n  return (end - start) / durationDay;\n}, function(date) {\n  return date.getUTCDate() - 1;\n});\n\nexport default utcDay;\nexport var utcDays = utcDay.range;\n","import interval from \"./interval.js\";\nimport {durationWeek} from \"./duration.js\";\n\nfunction utcWeekday(i) {\n  return interval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport var utcSunday = utcWeekday(0);\nexport var utcMonday = utcWeekday(1);\nexport var utcTuesday = utcWeekday(2);\nexport var utcWednesday = utcWeekday(3);\nexport var utcThursday = utcWeekday(4);\nexport var utcFriday = utcWeekday(5);\nexport var utcSaturday = utcWeekday(6);\n\nexport var utcSundays = utcSunday.range;\nexport var utcMondays = utcMonday.range;\nexport var utcTuesdays = utcTuesday.range;\nexport var utcWednesdays = utcWednesday.range;\nexport var utcThursdays = utcThursday.range;\nexport var utcFridays = utcFriday.range;\nexport var utcSaturdays = utcSaturday.range;\n","import interval from \"./interval.js\";\n\nvar utcMonth = interval(function(date) {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, function(start, end) {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, function(date) {\n  return date.getUTCMonth();\n});\n\nexport default utcMonth;\nexport var utcMonths = utcMonth.range;\n","import interval from \"./interval.js\";\n\nvar utcYear = interval(function(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, function(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, function(date) {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport default utcYear;\nexport var utcYears = utcYear.range;\n","import {bisector, tickStep} from \"d3-array\";\nimport {durationDay, durationHour, durationMinute, durationMonth, durationSecond, durationWeek, durationYear} from \"./duration.js\";\nimport millisecond from \"./millisecond.js\";\nimport second from \"./second.js\";\nimport minute from \"./minute.js\";\nimport hour from \"./hour.js\";\nimport day from \"./day.js\";\nimport {sunday as week} from \"./week.js\";\nimport month from \"./month.js\";\nimport year from \"./year.js\";\nimport utcMinute from \"./utcMinute.js\";\nimport utcHour from \"./utcHour.js\";\nimport utcDay from \"./utcDay.js\";\nimport {utcSunday as utcWeek} from \"./utcWeek.js\";\nimport utcMonth from \"./utcMonth.js\";\nimport utcYear from \"./utcYear.js\";\n\nfunction ticker(year, month, week, day, hour, minute) {\n\n  const tickIntervals = [\n    [second,  1,      durationSecond],\n    [second,  5,  5 * durationSecond],\n    [second, 15, 15 * durationSecond],\n    [second, 30, 30 * durationSecond],\n    [minute,  1,      durationMinute],\n    [minute,  5,  5 * durationMinute],\n    [minute, 15, 15 * durationMinute],\n    [minute, 30, 30 * durationMinute],\n    [  hour,  1,      durationHour  ],\n    [  hour,  3,  3 * durationHour  ],\n    [  hour,  6,  6 * durationHour  ],\n    [  hour, 12, 12 * durationHour  ],\n    [   day,  1,      durationDay   ],\n    [   day,  2,  2 * durationDay   ],\n    [  week,  1,      durationWeek  ],\n    [ month,  1,      durationMonth ],\n    [ month,  3,  3 * durationMonth ],\n    [  year,  1,      durationYear  ]\n  ];\n\n  function ticks(start, stop, count) {\n    const reverse = stop < start;\n    if (reverse) [start, stop] = [stop, start];\n    const interval = count && typeof count.range === \"function\" ? count : tickInterval(start, stop, count);\n    const ticks = interval ? interval.range(start, +stop + 1) : []; // inclusive stop\n    return reverse ? ticks.reverse() : ticks;\n  }\n\n  function tickInterval(start, stop, count) {\n    const target = Math.abs(stop - start) / count;\n    const i = bisector(([,, step]) => step).right(tickIntervals, target);\n    if (i === tickIntervals.length) return year.every(tickStep(start / durationYear, stop / durationYear, count));\n    if (i === 0) return millisecond.every(Math.max(tickStep(start, stop, count), 1));\n    const [t, step] = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n    return t.every(step);\n  }\n\n  return [ticks, tickInterval];\n}\n\nconst [utcTicks, utcTickInterval] = ticker(utcYear, utcMonth, utcWeek, utcDay, utcHour, utcMinute);\nconst [timeTicks, timeTickInterval] = ticker(year, month, week, day, hour, minute);\n\nexport {utcTicks, utcTickInterval, timeTicks, timeTickInterval};\n","import {\n  timeDay,\n  timeSunday,\n  timeMonday,\n  timeThursday,\n  timeYear,\n  utcDay,\n  utcSunday,\n  utcMonday,\n  utcThursday,\n  utcYear\n} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newDate(y, m, d) {\n  return {y: y, m: m, d: d, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"f\": formatMicroseconds,\n    \"g\": formatYearISO,\n    \"G\": formatFullYearISO,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"q\": formatQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatSeconds,\n    \"u\": formatWeekdayNumberMonday,\n    \"U\": formatWeekNumberSunday,\n    \"V\": formatWeekNumberISO,\n    \"w\": formatWeekdayNumberSunday,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"f\": formatUTCMicroseconds,\n    \"g\": formatUTCYearISO,\n    \"G\": formatUTCFullYearISO,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"q\": formatUTCQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatUTCSeconds,\n    \"u\": formatUTCWeekdayNumberMonday,\n    \"U\": formatUTCWeekNumberSunday,\n    \"V\": formatUTCWeekNumberISO,\n    \"w\": formatUTCWeekdayNumberSunday,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"f\": parseMicroseconds,\n    \"g\": parseYear,\n    \"G\": parseFullYear,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"q\": parseQuarter,\n    \"Q\": parseUnixTimestamp,\n    \"s\": parseUnixTimestampSeconds,\n    \"S\": parseSeconds,\n    \"u\": parseWeekdayNumberMonday,\n    \"U\": parseWeekNumberSunday,\n    \"V\": parseWeekNumberISO,\n    \"w\": parseWeekdayNumberSunday,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, Z) {\n    return function(string) {\n      var d = newDate(1900, undefined, 1),\n          i = parseSpecifier(d, specifier, string += \"\", 0),\n          week, day;\n      if (i != string.length) return null;\n\n      // If a UNIX timestamp is specified, return it.\n      if (\"Q\" in d) return new Date(d.Q);\n      if (\"s\" in d) return new Date(d.s * 1000 + (\"L\" in d ? d.L : 0));\n\n      // If this is utcParse, never use the local timezone.\n      if (Z && !(\"Z\" in d)) d.Z = 0;\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // If the month was not specified, inherit from the quarter.\n      if (d.m === undefined) d.m = \"q\" in d ? d.q : 0;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"V\" in d) {\n        if (d.V < 1 || d.V > 53) return null;\n        if (!(\"w\" in d)) d.w = 1;\n        if (\"Z\" in d) {\n          week = utcDate(newDate(d.y, 0, 1)), day = week.getUTCDay();\n          week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          week = localDate(newDate(d.y, 0, 1)), day = week.getDay();\n          week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);\n          week = timeDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n        day = \"Z\" in d ? utcDate(newDate(d.y, 0, 1)).getUTCDay() : localDate(newDate(d.y, 0, 1)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return localDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatQuarter(d) {\n    return 1 + ~~(d.getMonth() / 3);\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  function formatUTCQuarter(d) {\n    return 1 + ~~(d.getUTCMonth() / 3);\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", false);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier += \"\", true);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  return new Map(names.map((name, i) => [name.toLowerCase(), i]));\n}\n\nfunction parseWeekdayNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekdayNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.u = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberISO(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.V = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseQuarter(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.q = n[0] * 3 - 3, i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMicroseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 6));\n  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction parseUnixTimestamp(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseUnixTimestampSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.s = +n[0], i + n[0].length) : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMicroseconds(d, p) {\n  return formatMilliseconds(d, p) + \"000\";\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekdayNumberMonday(d) {\n  var day = d.getDay();\n  return day === 0 ? 7 : day;\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction dISO(d) {\n  var day = d.getDay();\n  return (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n}\n\nfunction formatWeekNumberISO(d, p) {\n  d = dISO(d);\n  return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);\n}\n\nfunction formatWeekdayNumberSunday(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatYearISO(d, p) {\n  d = dISO(d);\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatFullYearISO(d, p) {\n  var day = d.getDay();\n  d = (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMicroseconds(d, p) {\n  return formatUTCMilliseconds(d, p) + \"000\";\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekdayNumberMonday(d) {\n  var dow = d.getUTCDay();\n  return dow === 0 ? 7 : dow;\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction UTCdISO(d) {\n  var day = d.getUTCDay();\n  return (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n}\n\nfunction formatUTCWeekNumberISO(d, p) {\n  d = UTCdISO(d);\n  return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n}\n\nfunction formatUTCWeekdayNumberSunday(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCYearISO(d, p) {\n  d = UTCdISO(d);\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCFullYearISO(d, p) {\n  var day = d.getUTCDay();\n  d = (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n\nfunction formatUnixTimestamp(d) {\n  return +d;\n}\n\nfunction formatUnixTimestampSeconds(d) {\n  return Math.floor(+d / 1000);\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n","import {timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeTicks, timeTickInterval} from \"d3-time\";\nimport {timeFormat} from \"d3-time-format\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport nice from \"./nice.js\";\n\nfunction date(t) {\n  return new Date(t);\n}\n\nfunction number(t) {\n  return t instanceof Date ? +t : +new Date(+t);\n}\n\nexport function calendar(ticks, tickInterval, year, month, week, day, hour, minute, second, format) {\n  var scale = continuous(),\n      invert = scale.invert,\n      domain = scale.domain;\n\n  var formatMillisecond = format(\".%L\"),\n      formatSecond = format(\":%S\"),\n      formatMinute = format(\"%I:%M\"),\n      formatHour = format(\"%I %p\"),\n      formatDay = format(\"%a %d\"),\n      formatWeek = format(\"%b %d\"),\n      formatMonth = format(\"%B\"),\n      formatYear = format(\"%Y\");\n\n  function tickFormat(date) {\n    return (second(date) < date ? formatMillisecond\n        : minute(date) < date ? formatSecond\n        : hour(date) < date ? formatMinute\n        : day(date) < date ? formatHour\n        : month(date) < date ? (week(date) < date ? formatDay : formatWeek)\n        : year(date) < date ? formatMonth\n        : formatYear)(date);\n  }\n\n  scale.invert = function(y) {\n    return new Date(invert(y));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? domain(Array.from(_, number)) : domain().map(date);\n  };\n\n  scale.ticks = function(interval) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], interval == null ? 10 : interval);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    return specifier == null ? tickFormat : format(specifier);\n  };\n\n  scale.nice = function(interval) {\n    var d = domain();\n    if (!interval || typeof interval.range !== \"function\") interval = tickInterval(d[0], d[d.length - 1], interval == null ? 10 : interval);\n    return interval ? domain(nice(d, interval)) : scale;\n  };\n\n  scale.copy = function() {\n    return copy(scale, calendar(ticks, tickInterval, year, month, week, day, hour, minute, second, format));\n  };\n\n  return scale;\n}\n\nexport default function time() {\n  return initRange.apply(calendar(timeTicks, timeTickInterval, timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]), arguments);\n}\n","export default function nice(domain, interval) {\n  domain = domain.slice();\n\n  var i0 = 0,\n      i1 = domain.length - 1,\n      x0 = domain[i0],\n      x1 = domain[i1],\n      t;\n\n  if (x1 < x0) {\n    t = i0, i0 = i1, i1 = t;\n    t = x0, x0 = x1, x1 = t;\n  }\n\n  domain[i0] = interval.floor(x0);\n  domain[i1] = interval.ceil(x1);\n  return domain;\n}\n","// Interactions\nexport const Select = 'select';\nexport const Zoom = 'zoom';\nexport const Pan = 'pan';\nexport const Filter = 'filter';\nexport const Sort = 'sort';\nexport const Brush = 'brush';\nexport const Annotate = 'annotate';\nexport const Arrange = 'arrange';\n\n// Interaction defaults\nexport const SelectOpacity = 1;\nexport const UnselectOpacity = 0.2;\nexport const OpacityField = '__opacity__';\nexport const SelectField = '__selected__';\n\n// Events\nexport const Scroll = 'scroll';\nexport const DoubleClick = 'dblclick';\nexport const MouseDown = 'mousedown';\nexport const MouseUp = 'mouseup';\nexport const Shift = 'shift';\nexport const Meta = 'meta';\nexport const MouseOver = 'mouseover';\nexport const MouseLeave = 'mouseleave';\n\n// Chart components\nexport const Axis = 'axis';\nexport const Tick = 'tick';\nexport const TickDomain = 'domain';\nexport const Background = 'background';\nexport const Foreground = 'foreground';\n\n// Chart marks / defaults\nexport const DefaultSvgId = 'svgPlot';\nexport const SvgContainer = 'svg';\nexport const SvgGroup = 'g';\nexport const Circle = 'circle';\nexport const Ellipse = 'ellipse';\nexport const Line = 'line';\nexport const Polygon = 'polygon';\nexport const Polyline = 'polyline';\nexport const Rect = 'rect';\nexport const Path = 'path';\nexport const Text = 'text';\n\n// View fields\nexport const Left = 'left';\nexport const Right = 'right';\nexport const Top = 'top';\nexport const Bottom = 'bottom';\n\n// Legend and title constants\nexport const SizeLegend = 'size';\nexport const CategoricalColorLegend = 'colorCat';\n\nexport const FillAttr = 'fill';\nexport const ColorAttr = 'color';\nexport const StrokeAttr = 'stroke';\n\nexport const RoleProperty = '__role__';\nexport const LegendRole = 'legend';\nexport const AxisDomainRole = 'axis-domain';\nexport const AxisTitleRole = 'axis-title';\nexport const LegendTitleRole = 'legend-title';\nexport const OrphanTickRole = 'orphan-tick';\nexport const ViewportRole = 'viewport';\nexport const MarkRole = 'mark';\n","export default function(x) {\n    return x;\n}\n","export class Transform {\n    constructor(...args) {\n        if (args[0] instanceof Transform) {\n            const [other] = args;\n            this.translate = {...other.translate};\n            this.scale = {...other.scale};\n            this.rotate = other.rotate;\n        } else {\n            const [tx, ty, sx, sy, r] = args;\n            this.translate = {x: tx || 0, y: ty || 0};\n            this.scale = {x: sx || 1, y: sy || 1}\n            this.rotate = r || 0;\n        }\n    }\n\n    getTransform(appendTransform = new Transform()) {\n        return 'translate(' + (this.translate.x + appendTransform.translate.x) + ',' +\n            (this.translate.y + appendTransform.translate.y) + ') scale(' + \n            (this.scale.x * appendTransform.scale.x) + ',' +\n            (this.scale.y * appendTransform.scale.y) + ') rotate(' +\n            (this.rotate + appendTransform.rotate) + ')';  \n    }\n}\n","import { CategoricalColorLegend, Line, OpacityField, SelectOpacity } from '../state/constants';\nimport { Transform } from '../util/transform';\n\nexport function parseTransform(element, isGlobal, transforms = new Transform()) {\n    const transformList = element.transform.baseVal;\n\n    for (let i = 0; i < transformList.numberOfItems; ++i) {\n        const transform = transformList.getItem(i);\n        const matrix = transform.matrix;\n\n        switch (transform.type) {\n            case transform.SVG_TRANSFORM_TRANSLATE:\n                transforms.translate.x += matrix.e;\n                transforms.translate.y += matrix.f;\n                break;\n            case transform.SVG_TRANSFORM_SCALE:\n                transforms.scale.x += matrix.a;\n                transforms.scale.y += matrix.d;\n                break;\n            case transform.SVG_TRANSFORM_ROTATE:\n                transforms.rotate += transform.angle;\n                break;\n            default:\n                break;\n        }\n    }\n\n    transforms.translate.x += element.hasAttribute('cx') && isGlobal ? +element.getAttribute('cx') : 0;\n    transforms.translate.y += element.hasAttribute('cy') && isGlobal ? +element.getAttribute('cy') : 0;\n\n    return transforms;\n}\n\nexport function inferMarkAttributes(state) { \n    for (let i = 0; i < state.svgMarks.length; ++i) {\n        const mark = state.svgMarks[i];\n        if (mark.type === Line) continue; \n            \n        const svgRect = state.svg._getBBox();\n        const markRect = mark._getBBox();\n        const markX = state.xAxis.ordinal.length \n            ? i \n            : state.yAxis.ordinal.length\n            ? markRect.right - svgRect.left \n            : markRect.centerX - svgRect.left;\n        const markY = state.yAxis.ordinal.length \n            ? i \n            : state.xAxis.ordinal.length\n            ? markRect.top - svgRect.top\n            : markRect.centerY - svgRect.top; \n\n        const iterable = { };\n        iterable[state.xAxis.title ? state.xAxis.title.innerHTML : 'x'] = state.xAxis.ordinal.length ? state.xAxis.scale.domain()[markX] : state.xAxis.scale.invert(markX);\n        iterable[state.yAxis.title ? state.yAxis.title.innerHTML : 'y'] = state.yAxis.ordinal.length ? state.yAxis.scale.domain()[markY] : state.yAxis.scale.invert(markY);\n        \n        for (let j = 0; j < state.legends.length; ++j) {\n            const legend = state.legends[j];\n            const val = legend.type === CategoricalColorLegend \n                ? legend.scale.domain()[legend.scale.range().indexOf(window.getComputedStyle(mark)[legend.matchingAttr])]\n                : legend.scale.invert(markRect.width);\n\n            iterable[legend.title ? legend.title.innerHTML : 'legend-' + j] = val;\n        }\n\n        mark.style['pointer-events'] = 'fill';\n        mark.__inferred__data__ = iterable;\n        mark[OpacityField] = mark.hasAttribute('opacity') \n            ? +mark.getAttribute('opacity')\n            : window.getComputedStyle(mark).opacity || SelectOpacity; \n    }\n}\n\nexport function getFormatVal(element) {\n    if (!element) return null;\n    const elData = element.innerHTML.replace(/–/g, '-').replace(/−/g, '-'); // Replace with hyphen for int parsing\n\n    return element.__data__ || +element.__data__ === 0 \n        ? element.__data__.datum ? element.__data__.datum.value\n        : element.__data__\n        : isNaN(parseInt(elData)) ? elData\n        : +(elData.replace(/,/g, ''));\n}\n","import { Right, Left, Top } from '../state/constants';\nimport { sum } from 'd3-array';\nimport { getFormatVal } from '../parsers/attribute-parsers';\n\nexport function copyElement(element) {\n    const newElement = element.cloneNode(true);\n    for (const [key, value] of Object.entries(element)) {\n      newElement[key] = value;\n    }\n  \n    return newElement;\n  }\n\nexport function computeCenterPos(element, orient) {\n  const clientRect = element.getBoundingClientRect();\n  const offset = orient === Right || orient === Left ? clientRect.width / 2 : clientRect.height / 2;\n  return clientRect[orient] + (orient === Left || orient === Top ? offset : -offset);\n}\n\nexport function flattenRGB(rgb) {\n  return sum(rgb.replace(/[^\\d,]/g, '').split(','));\n}\n\nexport function convertPtToPx(pt) {\n  if (!pt || !pt.includes('pt')) return pt;\n  return +pt.split('pt')[0] * 4/3;\n}\n\nexport function SVGToScreen(svg, element, svgX, svgY) {\n    const p = svg.createSVGPoint();\n    p.x = svgX;\n    p.y = svgY;\n    return p.matrixTransform(element.getScreenCTM());\n}\n\nexport function sortByViewPos(field, objects, useField=false) {\n    const comparator = (dim, invert) => (a, b) => field == null\n        ? (a._getBBox()[dim] - b._getBBox()[dim]) * (invert ? -1 : 1)\n        : useField \n        ? getFormatVal(a[field]) - getFormatVal(b[field]) \n        : ((a[field] ? a[field] : a.marks[0])._getBBox()[dim] - (b[field] ? b[field] : b.marks[0])._getBBox()[dim]) * (invert ? -1 : 1)\n    objects.sort(comparator('centerX', false));\n    objects.sort(comparator('centerY', true));\n}\n","import identity from './identity.js';\nimport { copyElement } from '../util/util.js';\nimport { Transform } from '../util/transform.js';\nimport { count } from 'd3-array';\n\nvar top = 1,\n    right = 2,\n    bottom = 3,\n    left = 4,\n    epsilon = 1e-6;\n\nfunction translateX(x, _y) {\n  return \"translate(\" + x + \",\" + _y + \")\";\n}\n\nfunction translateY(y, _x) {\n  return \"translate(\" + _x + \",\" + y + \")\";\n}\n\nfunction number(scale) {\n  return d => +scale(d);\n}\n\nfunction center(scale, offset) {\n  offset = Math.max(0, scale.bandwidth() - offset * 2) / 2;\n  if (scale.round()) offset = Math.round(offset);\n  return d => +scale(d) + offset;\n}\n\nfunction entering() {\n  return !this.__axis;\n}\n\nfunction axis(orient, scale, state) {\n  var tickArguments = [],\n      tickValues = null,\n      tickFormat = null,\n      tickSizeInner = 6,\n      tickSizeOuter = 6,\n      tickPadding = 3,\n      offset = typeof window !== \"undefined\" && window.devicePixelRatio > 1 ? 0 : 0.5,\n      k = orient === top || orient === left ? -1 : 1,\n      x = orient === left || orient === right ? \"x\" : \"y\",\n      transform = orient === top || orient === bottom ? translateX : translateY,\n      diff = null, \n      range_index = orient === top || orient === bottom ? 0 : 1,\n      scale_transform = null,\n      svgAxis = orient === top || orient === bottom ? state.xAxis : state.yAxis,\n      ticks = svgAxis.ticks;\n\n  function axis() {\n    var values = tickValues == null ? (scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain()) : tickValues,\n        format = tickFormat == null ? (scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : identity) : tickFormat,\n        position = (scale.bandwidth ? center : number)(scale.copy(), offset)\n    values = orient === left || orient === right ? values.reverse() : values;\n\n    // function ordinalTransform(element, transform) {\n    //     const global_position =\n    //       element.getBoundingClientRect().right - element.parentElement._global_transform[0] - SVG.state().svg.getBoundingClientRect().left;\n        \n    //     if (!element._t) element._t = [global_position, \n    //       element.hasAttribute(\"transform\") ? +element.getAttribute(\"transform\").match(/(-?\\d+\\.?\\d*e?-?\\d*)/g)[0] : global_position];\n    //     let new_pos = transform.applyX(element._t[0]);\n\n    //     new_pos < svg_axis.range[0] || new_pos > svg_axis.range[1] ? \n    //       element.style.display = \"none\" : element.style.display = \"block\";\n\n    //     return (new_pos - element._t[0]) + element._t[1];\n    // }\n\n    function updateTick(tick, value) {\n      const label = tick.label;\n      const tickMarks = tick.marks;\n\n      label.innerHTML = svgAxis.ordinal.length || label.innerHTML === format(value) ? label.innerHTML : format(value);\n\n      // const offset_label = label.hasAttribute(\"transform\") ?\n      //   (orient === top || orient === bottom ? \n      //     label.getAttribute(\"transform\").match(/(-?\\d+\\.?\\d*e?-?\\d*)/g)[1] :\n      //     label.getAttribute(\"transform\").match(/(-?\\d+\\.?\\d*e?-?\\d*)/g)[0]) :\n      //   0;\n\n      // let text_anchor = label.hasAttribute(\"transform\") ?\n      //   (orient === top || orient === bottom ? \n      //     label.getAttribute(\"transform\").match(/(-?\\d+\\.?\\d*e?-?\\d*)/g)[0] :\n      //     label.getAttribute(\"transform\").match(/(-?\\d+\\.?\\d*e?-?\\d*)/g)[1]) :\n      //   (orient === top || orient === bottom ? \n      //     label._global_transform[0] :\n      //     label._global_transform[1]);;\n      // diff = diff == null ? +text_anchor - position(value) : diff;\n\n      // if (scale_transform) {\n      //   var label_t = transform(ordinal_transform(label, scale_transform), +Math.abs(offset_label) > 1e-2 ? +offset_label : 0);\n      // } else {\n      //   var label_t = transform(position(value) + (Math.abs(diff) < 5 ? diff : 0) + svg_axis.global_range[range_index] - label._global_transform[range_index], +Math.abs(offset_label) > 1e-2 ? +offset_label : 0);\n      // }\n\n      // let rotate = label.hasAttribute(\"transform\") && label.getAttribute(\"transform\").includes(\"rotate\") ? +label.getAttribute(\"transform\").match(/(-?\\d+\\.?\\d*e?-?\\d*)/g).pop() : null;\n      const svgRect = state.svg.getBoundingClientRect();\n\n      if (label.clientRect) {\n        const lx = label.clientRect.left + label.clientRect.width / 2 - svgRect.left;\n        const ly = label.clientRect.top + label.clientRect.height / 2 - svgRect.top;\n  \n        const translateX = orient === bottom ? position(value) - lx : 0;\n        const translateY = orient === left ? position(value) - ly : 0; \n        label.setAttribute('transform', label.localTransform.getTransform(new Transform(translateX, translateY)));\n      }\n      \n      for (const mark of tickMarks) {\n        // let offset_mark = mark.hasAttribute(\"transform\") ?\n        // (orient === top || orient === bottom ? \n        //   mark.getAttribute(\"transform\").match(/(-?\\d+\\.?\\d*e?-?\\d*)/g)[1] :\n        //   mark.getAttribute(\"transform\").match(/(-?\\d+\\.?\\d*e?-?\\d*)/g)[0]) :\n        // 0;\n\n        // if (scale_transform) {\n        //   var mark_t = transform(ordinal_transform(label, scale_transform), +Math.abs(offset_label) > 1e-2 ? +offset_label : 0);\n        // } else {\n        //   var mark_t = transform(position(value) + svg_axis.global_range[range_index] - label._global_transform[range_index], +Math.abs(offset_mark) > 1e-2 ? +offset_mark : 0);\n        // }\n        if (!mark.clientRect) continue;\n        const tx = mark.clientRect.left + mark.clientRect.width / 2 - svgRect.left;\n        const ty = mark.clientRect.top + mark.clientRect.height / 2 - svgRect.top;\n\n        const translateX = orient === bottom ? position(value) - tx : 0;\n        const translateY = orient === left ? position(value) - ty : 0; \n        // if (translateY) console.log([value, position(value)])\n        // if (!mark.localTransform) continue;\n        mark.setAttribute('transform', mark.localTransform.getTransform(new Transform(translateX, translateY)));\n      }\n    }\n\n    for (var counter = 0; counter < values.length && counter < ticks.length; ++counter) {\n      updateTick(ticks[counter], svgAxis.ordinal.length ? svgAxis.ordinal[counter] : values[counter]);\n    }\n\n    for ( ; counter < values.length; ++counter) {\n      let newTick = { \n        'label': copyElement(ticks[0].label), \n        'marks': ticks[0].marks.map(tick => copyElement(tick)), \n      };\n\n      updateTick(newTick, values[counter]);\n      ticks[0].label.parentElement.appendChild(newTick.label);\n      ticks[0].marks.forEach((d, i) => d.parentElement.insertBefore(newTick.marks[i], d));\n      ticks.push(newTick);\n    }\n\n    const length = ticks.length;\n    for ( ; counter < length; ++counter) {\n      const pos = ticks.length - 1;\n      if (ticks[pos].label) ticks[pos].label.remove();\n      ticks[pos].marks.forEach(d => d.remove());\n      ticks.pop();\n    }\n  }\n\n  axis.applyTransform = function(_) {\n    return arguments.length ? (scale_transform = _, axis) : axis; \n  }\n\n  axis.scale = function(_) {\n    return arguments.length ? (scale = _, axis) : scale;\n  };\n\n  axis.ticks = function() {\n    return tickArguments = Array.from(arguments), axis;\n  };\n\n  axis.tickArguments = function(_) {\n    return arguments.length ? (tickArguments = _ == null ? [] : Array.from(_), axis) : tickArguments.slice();\n  };\n\n  axis.tickValues = function(_) {\n    return arguments.length ? (tickValues = _ == null ? null : Array.from(_), axis) : tickValues && tickValues.slice();\n  };\n\n  axis.tickFormat = function(_) {\n    return arguments.length ? (tickFormat = _, axis) : tickFormat;\n  };\n\n  axis.tickSize = function(_) {\n    return arguments.length ? (tickSizeInner = tickSizeOuter = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeInner = function(_) {\n    return arguments.length ? (tickSizeInner = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeOuter = function(_) {\n    return arguments.length ? (tickSizeOuter = +_, axis) : tickSizeOuter;\n  };\n\n  axis.tickPadding = function(_) {\n    return arguments.length ? (tickPadding = +_, axis) : tickPadding;\n  };\n\n  axis.offset = function(_) {\n    return arguments.length ? (offset = +_, axis) : offset;\n  };\n\n  return axis;\n}\n\nexport function axisTop(scale, SVG) {\n  return axis(top, scale, SVG);\n}\n\nexport function axisRight(scale, SVG) {\n  return axis(right, scale, SVG);\n}\n\nexport function axisBottom(scale, SVG) {\n  return axis(bottom, scale, SVG);\n}\n\nexport function axisLeft(scale, SVG) {\n  return axis(left, scale, SVG);\n}\n","import { scaleLinear, scaleOrdinal } from \"d3-scale\";\nimport { CategoricalColorLegend, ColorAttr, FillAttr, Legend, LegendRole, RoleProperty, SizeLegend, StrokeAttr } from \"../state/constants\";\nimport { sortByViewPos } from \"../util/util\";\n\nfunction inferScale(legend) {\n    var scale;\n    \n    if (legend.type === CategoricalColorLegend) { // Ordinal legends\n        const domain = legend.marks.map(d => d.label.innerHTML);\n        const range = legend.marks.map(d => window.getComputedStyle(d.mark)[legend.matchingAttr]);\n        scale = scaleOrdinal().domain(domain).range(range);\n    } else { // Size legend\n        const domain = legend.marks.map(d => +d.label.innerHTML);\n        const range = legend.marks.map(d => d.mark._getBBox().width);\n        scale = scaleLinear().domain(domain).range(range);\n    }\n\n    legend.scale = scale;\n}\n\nexport function parseLegends(state, legends) {\n    for (const legend of legends) {\n        const mark1Style = window.getComputedStyle(legend.marks[0].mark);\n        const mark2Style = window.getComputedStyle(legend.marks[1].mark);\n        let matchingAttr = null;\n\n        if (mark1Style.fill !== mark2Style.fill) {\n            matchingAttr = FillAttr;\n        } else if (mark1Style.color !== mark2Style.color) {\n            matchingAttr = ColorAttr;\n        } else if (mark1Style.stroke !== mark2Style.stroke) {\n            matchingAttr = StrokeAttr;\n        }\n\n        if (matchingAttr) {\n            legend.type = CategoricalColorLegend;\n            legend.matchingAttr = matchingAttr;\n        } else {\n            legend.type = SizeLegend;\n        }\n\n        for (const {label, mark} of legend.marks) {\n            label[RoleProperty] = mark[RoleProperty] = LegendRole;\n            mark.legend = legend;\n            mark.style['pointer-events'] = 'fill';\n        }\n\n        inferScale(legend);\n        sortByViewPos('label', legend.marks, legend.type === SizeLegend);\n        state.legends.push(legend);\n    }\n}\n","import { min, max, mean } from 'd3-array';\nimport { scaleTime, scaleBand, scaleLinear } from 'd3-scale';\nimport { AxisDomainRole, AxisTitleRole, Bottom, Left, LegendTitleRole, \n    MarkRole, OrphanTickRole, Right, RoleProperty, Tick, Top, ViewportRole } from '../state/constants';\nimport { axisBottom, axisLeft } from '../_d3/axis';\nimport { getFormatVal } from './attribute-parsers';\nimport { computeCenterPos, convertPtToPx, sortByViewPos } from '../util/util';\nimport { parseLegends } from './legend-parsers';\n\nconst epsilon = 2;\n\nexport function parseChart(state) {\n    const candidateGroups = collectCandidateTextGroups();\n    const [axes, legends, titles] = pruneGroups(candidateGroups);\n    groupAxes(axes);\n    parseLegends(state, legends);\n    assignTitles(titles.filter(d => !d[RoleProperty]));\n\n    function assignTitles(titles) {\n        function calculatePos(el) {\n            const elBBox = el._getBBox();\n            return [elBBox.centerX, elBBox.centerY];\n        }\n\n        function getClosestTitle(x, y) {\n            const closestTitle = {title: null, distance: Number.MAX_VALUE};\n            for (const title of titles) {\n                const [titleX, titleY] = calculatePos(title);\n                const posDiff = Math.abs(titleX - x) + Math.abs(titleY - y);\n\n                if (posDiff < closestTitle.distance) {\n                    closestTitle.title = title;\n                    closestTitle.distance = posDiff;\n                }\n            }\n\n            return closestTitle.title;\n        }\n\n        [state.xAxis, state.yAxis].forEach(function(axis) {\n            const axisPos = axis.ticks.filter(d => d.label).map(tickGroup => calculatePos(tickGroup.label));\n            axis.title = getClosestTitle(mean(axisPos.map(d => d[0])), mean(axisPos.map(d => d[1])));\n            if (axis.title) axis.title[RoleProperty] = AxisTitleRole;\n        });\n        state.legends.map(function(legend) {\n            const legendPos = legend.marks.filter(d => d.label).map(mark => calculatePos(mark.label));\n            legend.title = getClosestTitle(mean(legendPos.map(d => d[0])), mean(legendPos.map(d => d[1])));\n            if (legend.title) legend.title[RoleProperty] = LegendTitleRole;\n        });\n\n        state.title = titles.filter(d => !d[RoleProperty])[0];\n    }\n\n    function groupAxes(axes) {\n        const axisMap = new Map();\n        const orphanTicks = [];\n\n        function addTicks(text, alignment, ticks) {\n            if (alignment === Top || alignment === Bottom) {\n                state.xAxis.ticks.push({label: text, marks: ticks});\n            } else {\n                state.yAxis.ticks.push({label: text, marks: ticks});\n            }\n            ticks.forEach(tick => text ? tick[RoleProperty] = Tick : tick[RoleProperty] = OrphanTickRole)\n        }\n\n        for (const [alignment, axis] of axes) {\n            for (const {text, tick} of axis) {\n                if (!text) {\n                    orphanTicks.push({alignment: alignment, tick: tick});\n                    continue;\n                }\n\n                axisMap.has(text) ? axisMap.get(text).ticks.push(tick) \n                    : axisMap.set(text, {alignment: alignment, ticks: [tick]});\n            }\n        }\n\n        for (const [text, {alignment, ticks}] of axisMap.entries()) {\n            addTicks(text, alignment, ticks);\n        }\n        \n        if (orphanTicks.length >= axisMap.size - 1) {\n            for (const {alignment, tick} of orphanTicks) {\n                addTicks(null, alignment, [tick]);\n            }\n        }\n\n        [state.xAxis, state.yAxis].forEach(axis => sortByViewPos('label', axis.ticks, typeof getFormatVal(axis.ticks[0].label) !== 'string'));\n    }\n\n    function collectCandidateTicks() {\n        const positionMap = {};\n        for (const svgMark of state.svgMarks) {\n            const bbox = svgMark._getBBox();\n            const xOffset = 'x,' + [bbox.centerX, bbox.width, bbox.height].join(',');\n            const yOffset = 'y,' + [bbox.centerY, bbox.width, bbox.height].join(',');\n\n            let foundX = false, foundY = false;\n            for (const _key of Object.keys(positionMap)) { // Handle minor misalignments / offsets\n                const [axis, offset, width, height] = _key.split(',');\n\n                if (axis === 'x' && +width === bbox.width && +height === bbox.height && Math.abs(bbox.centerX - offset) < epsilon) {\n                    foundX = true;\n                    positionMap[_key].push(svgMark);\n                }\n                if (axis === 'y' && +width === bbox.width && +height === bbox.height && Math.abs(bbox.centerY - offset) < epsilon) {\n                    foundY = true;\n                    positionMap[_key].push(svgMark);\n                }\n            }\n\n            if (!foundX) positionMap[xOffset] = [svgMark];\n            if (!foundY) positionMap[yOffset] = [svgMark];\n        }\n    \n        return positionMap;\n    }\n\n    function collectTextKeys() {\n        const groups = new WeakMap();\n\n        for (const textMark of state.textMarks) {\n            const textBBox = textMark._getBBox();\n            const group = { closestMark: null, distance: Number.MAX_VALUE };\n    \n            for (const svgMark of state.svgMarks) {\n                const markBBox = svgMark._getBBox();\n                const posDiff = (markBBox.width <= 1 && markBBox.height > 10) || (markBBox.height <= 1 && markBBox.width > 10) \n                    ? min([\n                        Math.abs(textBBox.centerX - markBBox.right) + Math.abs(textBBox.centerY - markBBox.top),\n                        Math.abs(textBBox.centerX - markBBox.right) + Math.abs(textBBox.centerY - markBBox.bottom),\n                        Math.abs(textBBox.centerX - markBBox.left) + Math.abs(textBBox.centerY - markBBox.top),\n                        Math.abs(textBBox.centerX - markBBox.left) + Math.abs(textBBox.centerY - markBBox.bottom)\n                    ])\n                    : Math.abs(textBBox.centerX - markBBox.centerX) + Math.abs(textBBox.centerY - markBBox.centerY);\n    \n                if (posDiff < group.distance) {\n                    group.closestMark = svgMark;\n                    group.distance = posDiff;\n                }\n            }\n\n            groups.set(textMark, group);\n        }\n\n        return groups;\n    }\n\n    function separateOthers(others, textKeys) {\n        const legends = [], titles = [];\n\n        for (const [alignment, group] of others) {\n            if (group.length === 1) {\n                titles.push(...group);\n            } else {\n                let isLegend = true;\n                for (const text of group) {\n                    const textBBox = text._getBBox();\n                    const markBBox = textKeys.get(text).closestMark._getBBox();\n\n                    if (alignment === Left || alignment === Right) {\n                        if (textBBox.left - markBBox.right < 0 && markBBox.left - textBBox.right < 0) {\n                            isLegend = false;\n                        }\n                    } else if (textBBox.top - markBBox.bottom < 0 && markBBox.top - textBBox.bottom < 0) {\n                        isLegend = false;\n                    }\n                }\n\n                if (isLegend) {\n                    legends.push({title: '', marks: group.map(text => {\n                        return {label: text, mark: textKeys.get(text).closestMark};\n                     })});\n                } else {\n                    titles.push(...group);\n                }\n            }\n        }\n\n        return [legends, titles];\n    }\n\n    function pruneGroups(candidateGroups) {\n        const axes = [], others = [];\n        const tickCandidates = collectCandidateTicks(); // Get SVG candidate tick groups\n        const textKeys = collectTextKeys(); // Get closest mark to each text element\n\n        for (const {alignment, marks: textGroup} of candidateGroups) {\n            if (textGroup.length === 1) {\n                others.push([alignment, textGroup]);\n                continue;\n            }\n            let anyMatched = false;\n            \n            for (const [_, tickGroup] of Object.entries(tickCandidates)) {\n                if (tickGroup.length < textGroup.length) continue;\n\n                let textMatched = true;\n                const tickStyles = { };\n                const matchedTicks = new WeakMap();  \n\n                for (const text of textGroup) {\n                    const textBBox = textKeys.get(text).closestMark._getBBox();\n                    let tickMatch = false; \n\n                    for (const tick of tickGroup) {\n                        const tickBBox = tick._getBBox();\n                        const xOffset = Math.abs(tickBBox.centerX - textBBox.centerX);\n                        const yOffset = Math.abs(tickBBox.centerY - textBBox.centerY);\n\n                        if (((xOffset < epsilon && tickBBox.width < epsilon) || (yOffset < epsilon && tickBBox.height < epsilon)) \n                            && !matchedTicks.get(tick)) {\n                                matchedTicks.set(tick, text);\n                                tickMatch = true;\n\n                                const style = window.getComputedStyle(tick);\n                                const tickStyle = [style.stroke, style.color, style.fill, tickBBox.width, tickBBox.height].join(',');\n                                tickStyles[tickStyle] = tickStyle in tickStyles ? tickStyles[tickStyle] + 1 : 1;\n                                break;\n                        }\n                    }\n\n                    if (!tickMatch) {\n                        textMatched = false;\n                        break;\n                    } \n                }\n\n                const styleKey = Object.keys(tickStyles)[0];\n                if (textMatched && tickStyles[styleKey] === textGroup.length) {\n                    axes.push([alignment, tickGroup.map(d => {\n                        return {tick: d, text: matchedTicks.get(d)};\n                    })]);\n                    anyMatched = true;\n                }\n            }\n\n            if (!anyMatched) {\n                others.push([alignment, textGroup]);\n            }\n        }\n        \n        return [axes, ...separateOthers(others, textKeys)];\n    }\n\n    function collectCandidateTextGroups() {\n        const positions = {[Right]: {}, [Left]: {}, [Top]: {}, [Bottom]: {}};\n\n        for (const textMark of state.textMarks) {\n            const textBBox = textMark._getBBox();\n            for (const [position, _map] of Object.entries(positions)) {\n                const offset = textBBox[position];\n                let found = false;\n                \n                for (const _key of Object.keys(_map)) { // Handle minor misalignments / offsets\n                    if (Math.abs(offset - _key) < epsilon) {\n                        found = true;\n                        _map[_key].push(textMark);\n                    }\n                }\n\n                if (!found) _map[offset] = [textMark];\n            }\n        }\n\n        const markAssignment = new WeakMap();\n        const alignmentMap = new WeakMap();\n        for (const [alignment, candidateGroup] of Object.entries(positions)) {\n            for (const [_, marks] of Object.entries(candidateGroup)) {\n                for (const mark of marks) {\n                    if (!markAssignment.get(mark) || marks.length > markAssignment.get(mark).length) {\n                        markAssignment.set(mark, marks);\n                        alignmentMap.set(marks, alignment);\n                    }\n                }\n            }\n        }\n\n        let candidateGroups = [];\n        for (let i = 0; i < state.textMarks.length; ++i) {\n            const textMark = state.textMarks[i];\n            const marks = markAssignment.get(textMark);\n            \n            if (!candidateGroups.includes(marks)) {\n                candidateGroups.push(marks);\n            }\n        }\n        return candidateGroups.map(d => {\n            return {alignment: alignmentMap.get(d), marks: d};\n        });\n    }\n}\n\nexport function cleanMarks(state) {\n    for (const mark of state.svgMarks) {\n        const clientRect = mark._getBBox()\n        if (clientRect.width >= state.xAxis.range[1] - state.xAxis.range[0] &&\n            clientRect.height >= state.yAxis.range[0] - state.yAxis.range[1]) {\n                mark[RoleProperty] = ViewportRole;\n                continue;\n            }\n        \n        const xLeft = state.xAxis.ticks[0].marks[0]._getBBox().left;\n        const xRight = state.xAxis.ticks[state.xAxis.ticks.length - 1].marks[0]._getBBox().right;\n        const yTop = state.yAxis.ticks[state.yAxis.ticks.length - 1].marks[0]._getBBox().top;\n        const yBottom = state.yAxis.ticks[0].marks[0]._getBBox().bottom;\n\n        if ((clientRect.left <= xLeft && clientRect.right >= xRight && clientRect.top >= yBottom) || \n            (clientRect.top <= yTop && clientRect.bottom >= yBottom && clientRect.right <= xLeft)) {\n                mark[RoleProperty] = AxisDomainRole;\n            }\n    }\n\n    state.svgMarks = state.svgMarks.filter(d => !d[RoleProperty]);\n    state.svgMarks.forEach(d => d[RoleProperty] = MarkRole);\n    sortByViewPos(null, state.svgMarks, false);\n}\n\nexport function computeDomain(axis) {\n    for (const [_, value] of Object.entries(axis.ticks)) {\n        if (!value.label) continue;\n        const formatVal = getFormatVal(value.label);\n\n        if (typeof formatVal === 'string') {\n            axis.ordinal.push(formatVal);\n        } else {\n            axis.domain[0] = axis.domain[0] === null ? formatVal : min([axis.domain[0], formatVal]);\n            axis.domain[1] = axis.domain[1] === null ? formatVal : max([axis.domain[1], formatVal]);\n        }\n    }\n}\n\nexport function configureAxes(state) {\n    const svgClientRect = state.svg.getBoundingClientRect();\n\n    if (state.xAxis.scale && !state.xAxis.ordinal.length) {\n        // Infer original X-axis domain\n        const tickLeft = computeCenterPos(\n            state.xAxis.ticks.filter(d => getFormatVal(d.label) === state.xAxis.domain[0])[0].marks[0], Left\n        );\n        const tickRight = computeCenterPos(\n            state.xAxis.ticks.filter(d => getFormatVal(d.label) === state.xAxis.domain[1])[0].marks[0], Left\n        );\n        \n        const ticks = [tickLeft, tickRight].map(d => d - svgClientRect.left);\n        const newDomainX = state.xAxis.range.map(\n            state.xAxis.scale.copy().range(ticks).invert, state.xAxis.scale\n        );\n        \n        state.xAxis.scale.domain(newDomainX);\n    }\n\n    if (state.yAxis.scale && !state.yAxis.ordinal.length) {\n        // Infer original Y-axis domain\n        const tickTop = computeCenterPos(\n            state.yAxis.ticks.filter(d => getFormatVal(d.label) === state.yAxis.domain[0])[0].marks[0], Top\n        );\n        const tickBottom = computeCenterPos(\n            state.yAxis.ticks.filter(d => getFormatVal(d.label) === state.yAxis.domain[1])[0].marks[0], Top\n        );\n\n        const ticks = [tickTop, tickBottom].map(d => d - svgClientRect.top);\n        const newDomainY = state.yAxis.range.map(\n            state.yAxis.scale.copy().range(ticks).invert, state.yAxis.scale\n        );\n\n        state.yAxis.scale.domain(newDomainY);\n    }\n}\n\nexport function deconstructChart(state) {\n    parseChart(state);\n    computeDomain(state.xAxis);\n    computeDomain(state.yAxis);\n\n    const width = +convertPtToPx(state.svg.getAttribute('width'));\n    const height = +convertPtToPx(state.svg.getAttribute('height'));\n    const svgBBox = state.svg._getBBox();\n\n    if (!state.xAxis.ticks.length && !state.yAxis.ticks.length) {\n        state.xAxis.range = [0, width];\n        state.yAxis.range = [height, 0];\n        cleanMarks(state);\n        return;\n    }\n    \n    const yTick = state.yAxis.ticks[0].marks[0];\n    const yTickBB = yTick._getBBox(); \n    const yTickRange = [yTickBB.left, yTickBB.left + yTickBB.width];\n\n    const xTick = state.xAxis.ticks[0].marks[0];\n    const xTickBB = xTick._getBBox();\n    const xTickRange = [xTickBB.top + xTickBB.height, xTickBB.top];\n\n    const xMin = max([yTickRange[0] - svgBBox.left, 0]);\n    const xMax = max([min([yTickRange[1] - svgBBox.left, width]), state.xAxis.ticks[state.xAxis.ticks.length - 1].marks[0]._getBBox().right]);\n    const yMin = max([xTickRange[1] - svgBBox.top, 0]);\n    const yMax = min([xTickRange[0] - svgBBox.top, height]);\n\n    state.xAxis.range = [xMin, xMax];\n    state.yAxis.range = [yMax, yMin];\n\n    state.xAxis.scale = (state.xAxis.domain[0] instanceof Date ? scaleTime() : (state.xAxis.ordinal.length ? scaleBand() : scaleLinear()))\n        .domain(state.xAxis.ordinal.length ? state.xAxis.ordinal : state.xAxis.domain)\n        .range(state.xAxis.range)\n    state.xAxis.axis = axisBottom(state.xAxis.scale, state)\n        .ticks(state.xAxis.ticks.length);\n\n    state.yAxis.scale = (state.yAxis.domain[0] instanceof Date ? scaleTime() : (state.yAxis.ordinal.length ? scaleBand() : scaleLinear()))\n        .domain(state.yAxis.ordinal.length ? state.yAxis.ordinal : state.yAxis.domain)\n        .range(state.yAxis.range);\n    state.yAxis.axis = axisLeft(state.yAxis.scale, state)\n        .ticks(state.yAxis.ticks.length);\n        // .tickFormat(d => {\n    // let s = state.y_axis.ticks[0]['label'].innerHTML;\n    //     return s.includes(\"M\") || s.includes(\"k\") ? d3.format(\".2s\")(d) : d3.format(\",\")(d);\n    // });\n\n    configureAxes(state);\n    cleanMarks(state);\n    \n    // TO-DO: Domain path 0.5 difference.\n    // if (state.hasDomain) {\n    //     let axes = [].slice.call(state.svg.querySelectorAll(\".domain\")).map((d) => { return d.getBoundingClientRect() });\n    //     let y_axis = axes[0].width < axes[1].width ? axes[0] : axes[1];\n    //     let x_axis = axes[0].height < axes[1].height ? axes[0] : axes[1];\n\n    //     var x_min = x_axis.left - state.svg.getBoundingClientRect().left;\n    //     var x_max = x_axis.right - state.svg.getBoundingClientRect().left;\n\n    //     var y_max = y_axis.bottom - state.svg.getBoundingClientRect().top;\n    //     var y_min = y_axis.top - state.svg.getBoundingClientRect().top;\n    // } else {\n\n    // if (yTick.clientRect.right < xTick.clientRect.left) {\n    //     var x_min = y_tick.right - state.svg.getBoundingClientRect().left;\n    //     var x_max = width;\n    // } else {\n    //     var x_min = y_tick.left - state.svg.getBoundingClientRect().left;\n    //     var x_max = d3.min([y_tick.width + x_min, width]);\n    // }\n\n    // if (x_tick.top > y_tick.bottom) {\n    //     var y_max = x_tick.top - state.svg.getBoundingClientRect().top;\n    //     var y_min = 0;\n    // } else {\n    //     var y_max = x_tick.bottom - state.svg.getBoundingClientRect().top;\n    //     var y_min = d3.max([y_max - x_tick.height, 0]);\n    // }\n    // }\n\n    // state.xAxis.scale = (state.xAxis.domain[0] instanceof Date ? d3.scaleTime() : (state.xAxis.ordinal.length ? d3.scaleBand() : d3.scaleLinear()))\n        // .domain(state.xAxis.ordinal.length ? state.xAxis.ordinal : state.xAxis.domain)\n        // .range(state.xAxis.range)\n    // state.x_axis.scale = (state.x_axis.domain[0] instanceof Date ? d3.scaleTime() : d3.scaleLinear())\n    //     .domain(state.x_axis.ordinal.length ? state.x_axis.range : state.x_axis.domain)\n    //     .range(state.x_axis.range);\n    // state.xAxis.axis = axisBottom(state.x_axis.scale, SVG).ticks(state.x_axis.ticks.length);\n    // state.x_axis.axis(state.x_axis.ticks);\n    // .tickSize(state.x_axis.ticks[1].children[0].getAttribute(\"y2\"))\n    // .ticks(typeof x_axis.ticks[0].__data__ === \"string\" ? state.x_axis.ordinal.length : state.x_axis.ticks.length);\n\n    // configureAxes();\n\n    // let diff_1_y = +state.y_axis.ticks[1]['label'].innerHTML - +state.y_axis.ticks[0]['label'].innerHTML;\n    // let diff_2_y = +state.y_axis.ticks[2]['label'].innerHTML - +state.y_axis.ticks[1]['label'].innerHTML;\n\n    // let diff_1_x = +state.x_axis.ticks[1]['label'].innerHTML - +state.x_axis.ticks[0]['label'].innerHTML;\n    // if (state.x_axis.ticks.length < 3) {\n    //     var diff_2_x = 0;\n    // } else {\n    //     var diff_2_x = +state.x_axis.ticks[2]['label'].innerHTML - +state.x_axis.ticks[1]['label'].innerHTML;\n    // }\n\n    // let diff_tick_a = state.x_axis.ticks[1]['ticks'][0].getBoundingClientRect().left - \n    //     state.x_axis.ticks[0]['ticks'][0].getBoundingClientRect().left;\n\n    // if (state.x_axis.ticks.length < 3) {\n    //     var diff_tick_b = 0;\n    // } else {\n    //     var diff_tick_b = state.x_axis.ticks[2]['ticks'][0].getBoundingClientRect().left - \n    //         state.x_axis.ticks[1]['ticks'][0].getBoundingClientRect().left;\n    // }\n\n    // if (Math.abs(diff_1_x - diff_2_x) > 5e-1 || Math.abs(diff_tick_a - diff_tick_b) > 5e-1) {\n    //     // let tick_diff_1 = state.x_axis.ticks['ticks'][1].getBoundingClientRect().left - \n    //     //     state.x_axis.ticks['ticks'][0].getBoundingClientRect().left;\n    //     // let tick_diff_2 = state.x_axis.ticks['ticks'][2].getBoundingClientRect().left - \n    //     //     state.x_axis.ticks['ticks'][1].getBoundingClientRect().left;\n\n    //     if (Math.abs(diff_tick_a - diff_tick_b) < 5e-1) {\n    //         let format = state.x_axis.ticks['ticks'][0].childNodes[1].innerHTML;\n    //         if (format != state.x_axis.ticks[0].__data__ && typeof format === \"string\") { \n    //             var exponent = format.match(/^(e|\\d+)\\^(e|\\d+)$/);\n    //             var superscript = format.match(/^(e|d+)([\\u2070-\\u209F\\u00B2\\u00B3\\u00B9])$/);\n    //             if (exponent) {\n    //                 var base = exponent[1];\n    //                 base = (base === 'e' ? Math.E : parseInt(base));\n    //             } else if (superscript) {\n    //                 var base = superscript[1];\n    //                 base = (base === 'e' ? Math.E : parseInt(base));\n    //             }\n    //         }\n    //     } \n        \n    //     function format(d) {\n    //         function digitToSuperscript(superChar) {\n    //             let table = \"⁰¹²³⁴⁵⁶⁷⁸⁹\";\n    //             return table[superChar];\n    //         }\n\n    //         let exp = Math.log(d) / Math.log(base);\n    //         return superscript ? 'e' + String(exp).replace(/\\d/g, digitToSuperscript) : d + '^' + exp;\n    //     }\n\n    //     state.x_axis.scale = d3.scaleLog()\n    //         .domain(state.x_axis.domain)\n    //         .range(state.x_axis.range);\n    //     state.x_axis.axis = axisBottom(state.x_axis.scale, SVG)\n    //         // .tickSize(state.x_axis.ticks[1].children[0].getAttribute(\"y2\"))\n    //         .ticks(state.x_axis.ticks.filter(d => d['label'].innerHTML).length)\n    //     if (base) {\n    //         state.x_axis.scale = state.x_axis.scale.base(base);\n    //         state.x_axis.axis = state.x_axis.axis.tickFormat(d => exponent || superscript ? format(d) : d);\n    //     }\n    // } else {\n    //     state.x_axis.scale = (state.x_axis.domain[0] instanceof Date ? d3.scaleTime() : (state.x_axis.ordinal.length ? d3.scaleBand() : d3.scaleLinear()))\n    //         .domain(state.x_axis.ordinal.length ? state.x_axis.ordinal : state.x_axis.domain)\n    //         .range(state.x_axis.range)\n    //     // state.x_axis.scale = (state.x_axis.domain[0] instanceof Date ? d3.scaleTime() : d3.scaleLinear())\n    //     //     .domain(state.x_axis.ordinal.length ? state.x_axis.range : state.x_axis.domain)\n    //     //     .range(state.x_axis.range);\n    //     state.x_axis.axis = axisBottom(state.x_axis.scale, SVG)\n    //         .ticks(state.x_axis.ticks.length);\n    //     // state.x_axis.axis(state.x_axis.ticks);\n    //         // .tickSize(state.x_axis.ticks[1].children[0].getAttribute(\"y2\"))\n    //         // .ticks(typeof x_axis.ticks[0].__data__ === \"string\" ? state.x_axis.ordinal.length : state.x_axis.ticks.length);\n    // }\n\n    // if (Math.abs(diff_1_y - diff_2_y) > 5e-1) {\n    //     state.y_axis.scale = d3.scaleLog()\n    //         .domain(state.y_axis.domain)\n    //         .range(state.y_axis.range);\n    //     state.y_axis.axis = d3.axisLeft(state.y_axis.scale)\n    //         .tickSize(-state.y_axis.ticks[1].children[0].getAttribute(\"x2\"))\n    //         .ticks(state.y_axis.ticks.length);\n    // } else {\n    //     state.y_axis.scale = (state.y_axis.domain[0] instanceof Date ? d3.scaleTime() : (state.y_axis.ordinal.length ? d3.scaleBand() : d3.scaleLinear()))\n    //         .domain(state.y_axis.ordinal.length ? state.y_axis.ordinal : state.y_axis.domain)\n    //         .range(state.y_axis.range);\n    //     state.y_axis.axis = axisLeft(state.y_axis.scale, SVG)\n    //         .ticks(state.y_axis.ticks.length)\n    //         .tickFormat(d => {\n    //             let s = state.y_axis.ticks[0]['label'].innerHTML;\n    //             return s.includes(\"M\") || s.includes(\"k\") ? d3.format(\".2s\")(d) : d3.format(\",\")(d);\n    //         });\n    //     // state.y_axis.axis(state.y_axis.ticks);\n    //         // .tickSize(-state.y_axis.ticks[1].children[0].getAttribute(\"x2\"))\n    //         // .ticks(typeof state.y_axis.ticks[0].__data__ === \"string\" ? state.y_axis.ordinal.length : state.y_axis.ticks.length);\n    // }\n}\n","export class ViewState {\n    constructor() {\n        this.hasDomain = false;\n        this.svg = null;\n        this.svgMarks = [];\n        this.textMarks = [];\n\n        this.xAxis = {\n            domain: [null, null],\n            ordinal: [],\n            range: [null, null],\n            ticks: [],\n            scale: null,\n            axis: null,\n            title: null\n        };\n        this.yAxis = {\n            domain: [null, null],\n            ordinal: [],\n            range: [null, null],\n            ticks: [],\n            scale: null,\n            axis: null,\n            title: null\n        };\n        \n        this.legends = [];\n        this.title = null;\n        \n        this.interactions = {\n            selection: {\n                control: null,\n                active: false\n            },\n            zoom: {\n                control: null,\n                axisControl: null\n            },\n            pan: {\n                control: null,\n                axisControl: null,\n                flag: false\n            },\n            brush: {\n                control: null,\n                axisControl: null,\n                flag: true,\n                active: false,\n                on_elem: false\n            },\n            filter: {\n                control: null,\n                active: false\n            },\n            sort: {\n                control: null\n            },\n            annotate: {\n                flag: false\n            },\n            arrange: {\n                flag: false\n            }\n        }\n    }\n}\n","/*\n * Generated by PEG.js 0.10.0.\n *\n * http://pegjs.org/\n */\n\n\"use strict\";\n\nfunction peg$subclass(child, parent) {\n  function ctor() { this.constructor = child; }\n  ctor.prototype = parent.prototype;\n  child.prototype = new ctor();\n}\n\nfunction peg$SyntaxError(message, expected, found, location) {\n  this.message  = message;\n  this.expected = expected;\n  this.found    = found;\n  this.location = location;\n  this.name     = \"SyntaxError\";\n\n  if (typeof Error.captureStackTrace === \"function\") {\n    Error.captureStackTrace(this, peg$SyntaxError);\n  }\n}\n\npeg$subclass(peg$SyntaxError, Error);\n\npeg$SyntaxError.buildMessage = function(expected, found) {\n  var DESCRIBE_EXPECTATION_FNS = {\n        literal: function(expectation) {\n          return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\n        },\n\n        \"class\": function(expectation) {\n          var escapedParts = \"\",\n              i;\n\n          for (i = 0; i < expectation.parts.length; i++) {\n            escapedParts += expectation.parts[i] instanceof Array\n              ? classEscape(expectation.parts[i][0]) + \"-\" + classEscape(expectation.parts[i][1])\n              : classEscape(expectation.parts[i]);\n          }\n\n          return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts + \"]\";\n        },\n\n        any: function(expectation) {\n          return \"any character\";\n        },\n\n        end: function(expectation) {\n          return \"end of input\";\n        },\n\n        other: function(expectation) {\n          return expectation.description;\n        }\n      };\n\n  function hex(ch) {\n    return ch.charCodeAt(0).toString(16).toUpperCase();\n  }\n\n  function literalEscape(s) {\n    return s\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/\"/g,  '\\\\\"')\n      .replace(/\\0/g, '\\\\0')\n      .replace(/\\t/g, '\\\\t')\n      .replace(/\\n/g, '\\\\n')\n      .replace(/\\r/g, '\\\\r')\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\n  }\n\n  function classEscape(s) {\n    return s\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/\\]/g, '\\\\]')\n      .replace(/\\^/g, '\\\\^')\n      .replace(/-/g,  '\\\\-')\n      .replace(/\\0/g, '\\\\0')\n      .replace(/\\t/g, '\\\\t')\n      .replace(/\\n/g, '\\\\n')\n      .replace(/\\r/g, '\\\\r')\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\n  }\n\n  function describeExpectation(expectation) {\n    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);\n  }\n\n  function describeExpected(expected) {\n    var descriptions = new Array(expected.length),\n        i, j;\n\n    for (i = 0; i < expected.length; i++) {\n      descriptions[i] = describeExpectation(expected[i]);\n    }\n\n    descriptions.sort();\n\n    if (descriptions.length > 0) {\n      for (i = 1, j = 1; i < descriptions.length; i++) {\n        if (descriptions[i - 1] !== descriptions[i]) {\n          descriptions[j] = descriptions[i];\n          j++;\n        }\n      }\n      descriptions.length = j;\n    }\n\n    switch (descriptions.length) {\n      case 1:\n        return descriptions[0];\n\n      case 2:\n        return descriptions[0] + \" or \" + descriptions[1];\n\n      default:\n        return descriptions.slice(0, -1).join(\", \")\n          + \", or \"\n          + descriptions[descriptions.length - 1];\n    }\n  }\n\n  function describeFound(found) {\n    return found ? \"\\\"\" + literalEscape(found) + \"\\\"\" : \"end of input\";\n  }\n\n  return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\n};\n\nfunction peg$parse(input, options) {\n  options = options !== void 0 ? options : {};\n\n  var peg$FAILED = {},\n\n      peg$startRuleFunctions = { svg_path: peg$parsesvg_path },\n      peg$startRuleFunction  = peg$parsesvg_path,\n\n      peg$c0 = function(data) {\n          if (!data) return [];\n          for (var cmds=[],i=0;i<data.length;i++) cmds=cmds.concat.apply(cmds,data[i]);\n          var first=cmds[0];\n          if (first && first.code=='m'){ // Per spec, first moveto is never relative\n            delete first.relative;\n            first.code = 'M';\n          }\n          return cmds;\n        },\n      peg$c1 = function(first, more) { return merge(first,more) },\n      peg$c2 = /^[Mm]/,\n      peg$c3 = peg$classExpectation([\"M\", \"m\"], false, false),\n      peg$c4 = function(c, first, more) {\n          var move = commands(c,[first]);\n          if (more) move = move.concat(commands(c=='M' ? 'L' : 'l',more[1]));\n          return move;\n        },\n      peg$c5 = /^[Zz]/,\n      peg$c6 = peg$classExpectation([\"Z\", \"z\"], false, false),\n      peg$c7 = function() { return commands('Z') },\n      peg$c8 = /^[Ll]/,\n      peg$c9 = peg$classExpectation([\"L\", \"l\"], false, false),\n      peg$c10 = function(c, args) { return commands(c,args) },\n      peg$c11 = /^[Hh]/,\n      peg$c12 = peg$classExpectation([\"H\", \"h\"], false, false),\n      peg$c13 = function(c, args) { return commands(c,args.map(function(x){ return {x:x}})) },\n      peg$c14 = /^[Vv]/,\n      peg$c15 = peg$classExpectation([\"V\", \"v\"], false, false),\n      peg$c16 = function(c, args) { return commands(c,args.map(function(y){ return {y:y}})) },\n      peg$c17 = /^[Cc]/,\n      peg$c18 = peg$classExpectation([\"C\", \"c\"], false, false),\n      peg$c19 = function(a, b, c) { return { x1:a.x, y1:a.y, x2:b.x, y2:b.y, x:c.x, y:c.y } },\n      peg$c20 = /^[Ss]/,\n      peg$c21 = peg$classExpectation([\"S\", \"s\"], false, false),\n      peg$c22 = function(b, c) { return { x2:b.x, y2:b.y, x:c.x, y:c.y } },\n      peg$c23 = /^[Qq]/,\n      peg$c24 = peg$classExpectation([\"Q\", \"q\"], false, false),\n      peg$c25 = function(a, b) { return { x1:a.x, y1:a.y, x:b.x, y:b.y } },\n      peg$c26 = /^[Tt]/,\n      peg$c27 = peg$classExpectation([\"T\", \"t\"], false, false),\n      peg$c28 = /^[Aa]/,\n      peg$c29 = peg$classExpectation([\"A\", \"a\"], false, false),\n      peg$c30 = function(rx, ry, xrot, large, sweep, xy) { return { rx:rx, ry:ry, xAxisRotation:xrot, largeArc:large, sweep:sweep, x:xy.x, y:xy.y } },\n      peg$c31 = function(x, y) { return { x:x, y:y } },\n      peg$c32 = function(n) { return n*1 },\n      peg$c33 = function(parts) { return parts.join('')*1 },\n      peg$c34 = /^[01]/,\n      peg$c35 = peg$classExpectation([\"0\", \"1\"], false, false),\n      peg$c36 = function(bit) { return bit=='1' },\n      peg$c37 = function() { return '' },\n      peg$c38 = \",\",\n      peg$c39 = peg$literalExpectation(\",\", false),\n      peg$c40 = function(parts) { return parts.join('') },\n      peg$c41 = \".\",\n      peg$c42 = peg$literalExpectation(\".\", false),\n      peg$c43 = /^[eE]/,\n      peg$c44 = peg$classExpectation([\"e\", \"E\"], false, false),\n      peg$c45 = /^[+\\-]/,\n      peg$c46 = peg$classExpectation([\"+\", \"-\"], false, false),\n      peg$c47 = /^[0-9]/,\n      peg$c48 = peg$classExpectation([[\"0\", \"9\"]], false, false),\n      peg$c49 = function(digits) { return digits.join('') },\n      peg$c50 = /^[ \\t\\n\\r]/,\n      peg$c51 = peg$classExpectation([\" \", \"\\t\", \"\\n\", \"\\r\"], false, false),\n\n      peg$currPos          = 0,\n      peg$savedPos         = 0,\n      peg$posDetailsCache  = [{ line: 1, column: 1 }],\n      peg$maxFailPos       = 0,\n      peg$maxFailExpected  = [],\n      peg$silentFails      = 0,\n\n      peg$result;\n\n  if (\"startRule\" in options) {\n    if (!(options.startRule in peg$startRuleFunctions)) {\n      throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n    }\n\n    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n  }\n\n  function text() {\n    return input.substring(peg$savedPos, peg$currPos);\n  }\n\n  function location() {\n    return peg$computeLocation(peg$savedPos, peg$currPos);\n  }\n\n  function expected(description, location) {\n    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n    throw peg$buildStructuredError(\n      [peg$otherExpectation(description)],\n      input.substring(peg$savedPos, peg$currPos),\n      location\n    );\n  }\n\n  function error(message, location) {\n    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n    throw peg$buildSimpleError(message, location);\n  }\n\n  function peg$literalExpectation(text, ignoreCase) {\n    return { type: \"literal\", text: text, ignoreCase: ignoreCase };\n  }\n\n  function peg$classExpectation(parts, inverted, ignoreCase) {\n    return { type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\n  }\n\n  function peg$anyExpectation() {\n    return { type: \"any\" };\n  }\n\n  function peg$endExpectation() {\n    return { type: \"end\" };\n  }\n\n  function peg$otherExpectation(description) {\n    return { type: \"other\", description: description };\n  }\n\n  function peg$computePosDetails(pos) {\n    var details = peg$posDetailsCache[pos], p;\n\n    if (details) {\n      return details;\n    } else {\n      p = pos - 1;\n      while (!peg$posDetailsCache[p]) {\n        p--;\n      }\n\n      details = peg$posDetailsCache[p];\n      details = {\n        line:   details.line,\n        column: details.column\n      };\n\n      while (p < pos) {\n        if (input.charCodeAt(p) === 10) {\n          details.line++;\n          details.column = 1;\n        } else {\n          details.column++;\n        }\n\n        p++;\n      }\n\n      peg$posDetailsCache[pos] = details;\n      return details;\n    }\n  }\n\n  function peg$computeLocation(startPos, endPos) {\n    var startPosDetails = peg$computePosDetails(startPos),\n        endPosDetails   = peg$computePosDetails(endPos);\n\n    return {\n      start: {\n        offset: startPos,\n        line:   startPosDetails.line,\n        column: startPosDetails.column\n      },\n      end: {\n        offset: endPos,\n        line:   endPosDetails.line,\n        column: endPosDetails.column\n      }\n    };\n  }\n\n  function peg$fail(expected) {\n    if (peg$currPos < peg$maxFailPos) { return; }\n\n    if (peg$currPos > peg$maxFailPos) {\n      peg$maxFailPos = peg$currPos;\n      peg$maxFailExpected = [];\n    }\n\n    peg$maxFailExpected.push(expected);\n  }\n\n  function peg$buildSimpleError(message, location) {\n    return new peg$SyntaxError(message, null, null, location);\n  }\n\n  function peg$buildStructuredError(expected, found, location) {\n    return new peg$SyntaxError(\n      peg$SyntaxError.buildMessage(expected, found),\n      expected,\n      found,\n      location\n    );\n  }\n\n  function peg$parsesvg_path() {\n    var s0, s1, s2, s3, s4;\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$parsewsp();\n    while (s2 !== peg$FAILED) {\n      s1.push(s2);\n      s2 = peg$parsewsp();\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsemoveTo_drawTo_commandGroups();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = [];\n        s4 = peg$parsewsp();\n        while (s4 !== peg$FAILED) {\n          s3.push(s4);\n          s4 = peg$parsewsp();\n        }\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c0(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsemoveTo_drawTo_commandGroups() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsemoveTo_drawTo_commandGroup();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = [];\n      s5 = peg$parsewsp();\n      while (s5 !== peg$FAILED) {\n        s4.push(s5);\n        s5 = peg$parsewsp();\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsemoveTo_drawTo_commandGroup();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parsemoveTo_drawTo_commandGroup();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsemoveTo_drawTo_commandGroup() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsemoveto();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = [];\n      s5 = peg$parsewsp();\n      while (s5 !== peg$FAILED) {\n        s4.push(s5);\n        s5 = peg$parsewsp();\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsedrawto_command();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parsedrawto_command();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsedrawto_command() {\n    var s0;\n\n    s0 = peg$parseclosepath();\n    if (s0 === peg$FAILED) {\n      s0 = peg$parselineto();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parsehorizontal_lineto();\n        if (s0 === peg$FAILED) {\n          s0 = peg$parsevertical_lineto();\n          if (s0 === peg$FAILED) {\n            s0 = peg$parsecurveto();\n            if (s0 === peg$FAILED) {\n              s0 = peg$parsesmooth_curveto();\n              if (s0 === peg$FAILED) {\n                s0 = peg$parsequadratic_bezier_curveto();\n                if (s0 === peg$FAILED) {\n                  s0 = peg$parsesmooth_quadratic_bezier_curveto();\n                  if (s0 === peg$FAILED) {\n                    s0 = peg$parseelliptical_arc();\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsemoveto() {\n    var s0, s1, s2, s3, s4, s5, s6;\n\n    s0 = peg$currPos;\n    if (peg$c2.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c3); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecoordinate_pair();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$currPos;\n          s5 = peg$parsecomma_wsp();\n          if (s5 === peg$FAILED) {\n            s5 = null;\n          }\n          if (s5 !== peg$FAILED) {\n            s6 = peg$parselineto_argument_sequence();\n            if (s6 !== peg$FAILED) {\n              s5 = [s5, s6];\n              s4 = s5;\n            } else {\n              peg$currPos = s4;\n              s4 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s4;\n            s4 = peg$FAILED;\n          }\n          if (s4 === peg$FAILED) {\n            s4 = null;\n          }\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c4(s1, s3, s4);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseclosepath() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    if (peg$c5.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c6); }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c7();\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parselineto() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (peg$c8.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c9); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parselineto_argument_sequence();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c10(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parselineto_argument_sequence() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsecoordinate_pair();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parsecomma_wsp();\n      if (s4 === peg$FAILED) {\n        s4 = null;\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsecoordinate_pair();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parsecomma_wsp();\n        if (s4 === peg$FAILED) {\n          s4 = null;\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parsecoordinate_pair();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsehorizontal_lineto() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (peg$c11.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c12); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecoordinate_sequence();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c13(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecoordinate_sequence() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsenumber();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parsecomma_wsp();\n      if (s4 === peg$FAILED) {\n        s4 = null;\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parsecomma_wsp();\n        if (s4 === peg$FAILED) {\n          s4 = null;\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parsenumber();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsevertical_lineto() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (peg$c14.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c15); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecoordinate_sequence();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c16(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecurveto() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (peg$c17.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c18); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecurveto_argument_sequence();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c10(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecurveto_argument_sequence() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsecurveto_argument();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parsecomma_wsp();\n      if (s4 === peg$FAILED) {\n        s4 = null;\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsecurveto_argument();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parsecomma_wsp();\n        if (s4 === peg$FAILED) {\n          s4 = null;\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parsecurveto_argument();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecurveto_argument() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsecoordinate_pair();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsecomma_wsp();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecoordinate_pair();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parsecomma_wsp();\n          if (s4 === peg$FAILED) {\n            s4 = null;\n          }\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parsecoordinate_pair();\n            if (s5 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c19(s1, s3, s5);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsesmooth_curveto() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (peg$c20.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c21); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsesmooth_curveto_argument_sequence();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c10(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsesmooth_curveto_argument_sequence() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsesmooth_curveto_argument();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parsecomma_wsp();\n      if (s4 === peg$FAILED) {\n        s4 = null;\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsesmooth_curveto_argument();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parsecomma_wsp();\n        if (s4 === peg$FAILED) {\n          s4 = null;\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parsesmooth_curveto_argument();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsesmooth_curveto_argument() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$parsecoordinate_pair();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsecomma_wsp();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecoordinate_pair();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c22(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsequadratic_bezier_curveto() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (peg$c23.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c24); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsequadratic_bezier_curveto_argument_sequence();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c10(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsequadratic_bezier_curveto_argument_sequence() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsequadratic_bezier_curveto_argument();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parsecomma_wsp();\n      if (s4 === peg$FAILED) {\n        s4 = null;\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsequadratic_bezier_curveto_argument();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parsecomma_wsp();\n        if (s4 === peg$FAILED) {\n          s4 = null;\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parsequadratic_bezier_curveto_argument();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsequadratic_bezier_curveto_argument() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$parsecoordinate_pair();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsecomma_wsp();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecoordinate_pair();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c25(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsesmooth_quadratic_bezier_curveto() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (peg$c26.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c27); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsesmooth_quadratic_bezier_curveto_argument_sequence();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c10(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsesmooth_quadratic_bezier_curveto_argument_sequence() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsecoordinate_pair();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parsecomma_wsp();\n      if (s4 === peg$FAILED) {\n        s4 = null;\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsecoordinate_pair();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parsecomma_wsp();\n        if (s4 === peg$FAILED) {\n          s4 = null;\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parsecoordinate_pair();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseelliptical_arc() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (peg$c28.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c29); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parseelliptical_arc_argument_sequence();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c10(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseelliptical_arc_argument_sequence() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parseelliptical_arc_argument();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parsecomma_wsp();\n      if (s4 === peg$FAILED) {\n        s4 = null;\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parseelliptical_arc_argument();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parsecomma_wsp();\n        if (s4 === peg$FAILED) {\n          s4 = null;\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parseelliptical_arc_argument();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseelliptical_arc_argument() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9, s10, s11;\n\n    s0 = peg$currPos;\n    s1 = peg$parsenonnegative_number();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsecomma_wsp();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsenonnegative_number();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parsecomma_wsp();\n          if (s4 === peg$FAILED) {\n            s4 = null;\n          }\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parsenumber();\n            if (s5 !== peg$FAILED) {\n              s6 = peg$parsecomma_wsp();\n              if (s6 !== peg$FAILED) {\n                s7 = peg$parseflag();\n                if (s7 !== peg$FAILED) {\n                  s8 = peg$parsecomma_wsp();\n                  if (s8 === peg$FAILED) {\n                    s8 = null;\n                  }\n                  if (s8 !== peg$FAILED) {\n                    s9 = peg$parseflag();\n                    if (s9 !== peg$FAILED) {\n                      s10 = peg$parsecomma_wsp();\n                      if (s10 === peg$FAILED) {\n                        s10 = null;\n                      }\n                      if (s10 !== peg$FAILED) {\n                        s11 = peg$parsecoordinate_pair();\n                        if (s11 !== peg$FAILED) {\n                          peg$savedPos = s0;\n                          s1 = peg$c30(s1, s3, s5, s7, s9, s11);\n                          s0 = s1;\n                        } else {\n                          peg$currPos = s0;\n                          s0 = peg$FAILED;\n                        }\n                      } else {\n                        peg$currPos = s0;\n                        s0 = peg$FAILED;\n                      }\n                    } else {\n                      peg$currPos = s0;\n                      s0 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecoordinate_pair() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$parsenumber();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsecomma_wsp();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsenumber();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c31(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsenonnegative_number() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    s1 = peg$parsefloating_point_constant();\n    if (s1 === peg$FAILED) {\n      s1 = peg$parsedigit_sequence();\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c32(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsenumber() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    s2 = peg$parsesign();\n    if (s2 === peg$FAILED) {\n      s2 = null;\n    }\n    if (s2 !== peg$FAILED) {\n      s3 = peg$parsefloating_point_constant();\n      if (s3 !== peg$FAILED) {\n        s2 = [s2, s3];\n        s1 = s2;\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s1;\n      s1 = peg$FAILED;\n    }\n    if (s1 === peg$FAILED) {\n      s1 = peg$currPos;\n      s2 = peg$parsesign();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsedigit_sequence();\n        if (s3 !== peg$FAILED) {\n          s2 = [s2, s3];\n          s1 = s2;\n        } else {\n          peg$currPos = s1;\n          s1 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c33(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parseflag() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    if (peg$c34.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c35); }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c36(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsecomma_wsp() {\n    var s0, s1, s2, s3, s4;\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$parsewsp();\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parsewsp();\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsecomma();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = [];\n        s4 = peg$parsewsp();\n        while (s4 !== peg$FAILED) {\n          s3.push(s4);\n          s4 = peg$parsewsp();\n        }\n        if (s3 !== peg$FAILED) {\n          s1 = [s1, s2, s3];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      s2 = peg$parsecomma();\n      if (s2 !== peg$FAILED) {\n        s3 = [];\n        s4 = peg$parsewsp();\n        while (s4 !== peg$FAILED) {\n          s3.push(s4);\n          s4 = peg$parsewsp();\n        }\n        if (s3 !== peg$FAILED) {\n          s2 = [s2, s3];\n          s1 = s2;\n        } else {\n          peg$currPos = s1;\n          s1 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c37();\n      }\n      s0 = s1;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecomma() {\n    var s0;\n\n    if (input.charCodeAt(peg$currPos) === 44) {\n      s0 = peg$c38;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c39); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsefloating_point_constant() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    s2 = peg$parsefractional_constant();\n    if (s2 !== peg$FAILED) {\n      s3 = peg$parseexponent();\n      if (s3 === peg$FAILED) {\n        s3 = null;\n      }\n      if (s3 !== peg$FAILED) {\n        s2 = [s2, s3];\n        s1 = s2;\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s1;\n      s1 = peg$FAILED;\n    }\n    if (s1 === peg$FAILED) {\n      s1 = peg$currPos;\n      s2 = peg$parsedigit_sequence();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parseexponent();\n        if (s3 !== peg$FAILED) {\n          s2 = [s2, s3];\n          s1 = s2;\n        } else {\n          peg$currPos = s1;\n          s1 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c40(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsefractional_constant() {\n    var s0, s1, s2, s3, s4;\n\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    s2 = peg$parsedigit_sequence();\n    if (s2 === peg$FAILED) {\n      s2 = null;\n    }\n    if (s2 !== peg$FAILED) {\n      if (input.charCodeAt(peg$currPos) === 46) {\n        s3 = peg$c41;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c42); }\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = peg$parsedigit_sequence();\n        if (s4 !== peg$FAILED) {\n          s2 = [s2, s3, s4];\n          s1 = s2;\n        } else {\n          peg$currPos = s1;\n          s1 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s1;\n      s1 = peg$FAILED;\n    }\n    if (s1 === peg$FAILED) {\n      s1 = peg$currPos;\n      s2 = peg$parsedigit_sequence();\n      if (s2 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 46) {\n          s3 = peg$c41;\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c42); }\n        }\n        if (s3 !== peg$FAILED) {\n          s2 = [s2, s3];\n          s1 = s2;\n        } else {\n          peg$currPos = s1;\n          s1 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c40(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parseexponent() {\n    var s0, s1, s2, s3, s4;\n\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    if (peg$c43.test(input.charAt(peg$currPos))) {\n      s2 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c44); }\n    }\n    if (s2 !== peg$FAILED) {\n      s3 = peg$parsesign();\n      if (s3 === peg$FAILED) {\n        s3 = null;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = peg$parsedigit_sequence();\n        if (s4 !== peg$FAILED) {\n          s2 = [s2, s3, s4];\n          s1 = s2;\n        } else {\n          peg$currPos = s1;\n          s1 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s1;\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c40(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsesign() {\n    var s0;\n\n    if (peg$c45.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c46); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsedigit_sequence() {\n    var s0, s1, s2;\n\n    s0 = peg$currPos;\n    s1 = [];\n    if (peg$c47.test(input.charAt(peg$currPos))) {\n      s2 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c48); }\n    }\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        if (peg$c47.test(input.charAt(peg$currPos))) {\n          s2 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c48); }\n        }\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c49(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsewsp() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    if (peg$c50.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c51); }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c37();\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n\n    function merge(first,more){\n      if (!more) return [first];\n      for (var a=[first],i=0,l=more.length;i<l;i++) a[i+1]=more[i][1];\n      return a;\n    }\n\n    var cmds = {m:'moveto',l:'lineto',h:'horizontal lineto',v:'vertical lineto',c:'curveto',s:'smooth curveto',q:'quadratic curveto',t:'smooth quadratic curveto',a:'elliptical arc',z:'closepath'};\n    for (var code in cmds) cmds[code.toUpperCase()]=cmds[code];\n    function commands(code,args){\n      if (!args) args=[{}];\n      for (var i=args.length;i--;){\n        var cmd={code:code,command:cmds[code]};\n        if (code==code.toLowerCase()) cmd.relative=true;\n        for (var k in args[i]) cmd[k]=args[i][k];\n        args[i] = cmd;\n      }\n      return args;\n    }\n\n\n  peg$result = peg$startRuleFunction();\n\n  if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n    return peg$result;\n  } else {\n    if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n      peg$fail(peg$endExpectation());\n    }\n\n    throw peg$buildStructuredError(\n      peg$maxFailExpected,\n      peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,\n      peg$maxFailPos < input.length\n        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)\n        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)\n    );\n  }\n}\n\nmodule.exports = {\n  SyntaxError: peg$SyntaxError,\n  parse:       peg$parse\n};\n","// v1.0 exported just the parser function. To maintain backwards compatibility,\n// we export additional named features as properties of that function.\nvar parserFunction = require('./parser.js').parse;\nparserFunction.parseSVG = parserFunction;\nparserFunction.makeAbsolute = makeSVGPathCommandsAbsolute;\nmodule.exports = parserFunction;\n\nfunction makeSVGPathCommandsAbsolute(commands) {\n\tvar subpathStart, prevCmd={x:0,y:0};\n\tvar attr = {x:'x0',y:'y0',x1:'x0',y1:'y0',x2:'x0',y2:'y0'};\n\tcommands.forEach(function(cmd) {\n\t\tif (cmd.command==='moveto') subpathStart=cmd;\n\t\tcmd.x0=prevCmd.x; cmd.y0=prevCmd.y;\n\t\tfor (var a in attr) if (a in cmd) cmd[a] += cmd.relative ? cmd[attr[a]] : 0;\n\t\tif (!('x' in cmd)) cmd.x = prevCmd.x; // V\n\t\tif (!('y' in cmd)) cmd.y = prevCmd.y; // X\n\t\tcmd.relative = false;\n\t\tcmd.code = cmd.code.toUpperCase();\n\t\tif (cmd.command=='closepath') {\n\t\t\tcmd.x = subpathStart.x;\n\t\t\tcmd.y = subpathStart.y;\n\t\t}\n\t\tprevCmd = cmd;\n\t});\n\treturn commands;\n}\n","import {\n    SvgContainer, SvgGroup, TickDomain, Background, Foreground, Circle, Ellipse, Line, Polygon, \n    Polyline, Rect, Path, Text, DefaultSvgId, MarkRole\n} from '../state/constants.js';\n\nimport { Transform } from '../util/transform.js';\nimport { ViewState } from '../state/view-state.js';\nimport { parseTransform } from '../parsers/attribute-parsers';\nimport * as parser from 'svg-path-parser';\nimport { SVGToScreen } from '../util/util.js';\n\nconst markTypes = [Circle, Ellipse, Line, Polygon, Polyline, Rect, Path];\nvar id = 1;\n\nfunction extractElementInformation(svg, element, transform) {\n    element._getBBox = element.nodeName === SvgContainer \n        ? function() { return this.getBoundingClientRect(); } \n        : function() {\n            const clientRect = this.getBoundingClientRect(), svgRect = this.getBBox();\n            const p1 = SVGToScreen(svg, this, svgRect.x, svgRect.y)\n            const p2 = SVGToScreen(svg, this, svgRect.x + svgRect.width, svgRect.y + svgRect.height);\n            const width = Math.abs(p1.x - p2.x), height = Math.abs(p1.y - p2.y);\n            const left = clientRect.left + clientRect.width / 2 - width / 2, \n                top = clientRect.top + clientRect.height / 2 - height / 2;\n\n            return {\n                width: width,\n                height: height,\n                left: left,\n                right: left + width,\n                top: top,\n                bottom: top + height,\n                centerX: left + width / 2,\n                centerY: top + height / 2\n            }\n      }\n\n    element.localTransform = parseTransform(element, false);\n    element.globalPosition = parseTransform(element, true, new Transform(transform));\n}\n\nfunction inferTypeFromPath(element) { \n    let commands = parser.parseSVG(element.getAttribute('d'));\n    if (!commands.length) return;\n\n    element.contour = commands;\n    let endCmd = commands[commands.length - 1];\n    const relCommands = ['v', 'h'];\n\n    if (commands.length === 3 && commands[1].code === 'A' && endCmd.code === 'A') {\n        element.type = Ellipse;\n    } else if (endCmd.code !== 'Z') {\n        element.type = Line;\n    } else if (commands.length === 5 && relCommands.includes(commands[1].code) && relCommands.includes(commands[2].code) && \n        relCommands.includes(commands[3].code)) {\n            element.type = Rect;\n    } else {\n        element.type = Polygon;\n    }\n}\n\nfunction analyzeDomTree(element, state, transform) {\n    if (!element) return;\n    if (element.className && (element.className.baseVal === Background || \n        element.className.baseVal === Foreground)) return;\n\n    if (element.nodeName === SvgContainer) {\n        state.svg = element;\n        extractElementInformation(state.svg, element, transform);\n        if (!element.id) element.id = DefaultSvgId + '-' + id++;\n    } else if (element.nodeName === SvgGroup) {\n        parseTransform(element, true, transform);\n    } else if (element.nodeName === Text) {\n        extractElementInformation(state.svg, element, transform);\n        element.removeAttribute('textLength');\n        state.textMarks.push(element);\n        element.style['pointer-events'] = 'none';\n        element.style['user-select'] = 'none';\n    } else if (markTypes.includes(element.nodeName)) {\n        extractElementInformation(state.svg, element, transform);\n        const markType = element.nodeName;\n\n        if (markType === Path) {\n            inferTypeFromPath(element);\n            element.setAttribute('vector-effect', 'non-scaling-stroke');\n        } else if (markType === Polyline || markType === Polygon || markType === Line) {\n            element.type = markType;\n            element.setAttribute('vector-effect', 'non-scaling-stroke');\n        }\n\n        if (element.className && element.className.baseVal === TickDomain) {\n            state.hasDomain = true;\n        } else {\n            element.setAttribute(MarkRole, 'true');\n            state.svgMarks.push(element);\n        }\n    }\n\n    for (const child of element.childNodes) {\n        analyzeDomTree(child, state, new Transform(transform));\n    }\n}\n\nexport function inspect(svg) {\n    let state = new ViewState();\n    analyzeDomTree(svg, state, new Transform());\n    console.log(state);\n    return state;\n}\n","import { group, max, mean, min, sum } from \"d3-array\";\nimport { CategoricalColorLegend } from \"../state/constants\";\n\nexport const MATCH_TYPES = {\n    NONE: 0,\n    ATTRIBUTE: 1,\n    AGGREGATE: 2\n};\n\nexport const AGGREGATIONS = {\n    COUNT: d => d.length,\n    MIN: min,\n    MAX: max,\n    MEAN: mean,\n    SUM: sum\n};\n\nfunction getEncodings(state) {\n    const e = [state.xAxis, state.yAxis];\n    return state.legends ? [...e, ...state.legends] : e;\n}\n\nfunction iterateAggregates(state1, state2, aggregateFields, encoding1, encoding2) {\n    const fields = encoding1.type === CategoricalColorLegend ? aggregateFields.map(d => d.title.innerHTML) : [encoding1.title.innerHTML];\n    const marks = state1.svgMarks.map(d => d.__inferred__data__);\n    const totals = state2.svgMarks.map(d => d.__inferred__data__[encoding2.title.innerHTML]);\n\n    if (encoding1.type === CategoricalColorLegend) {\n        var groups = Array.from(group(marks, d => d[encoding1.title.innerHTML]).values());\n    } else {\n        var groups = [marks];\n    }\n\n    for (const [aggregateName, aggregateFn] of Object.entries(AGGREGATIONS)) {\n        for (const field of fields) {\n            const vals = groups.map(g => aggregateFn(g.map(d => d[field])));\n\n            if (vals.filter(d => totals.filter(e => Math.abs(e - d) <= 1).length).length === totals.length) {\n                return [MATCH_TYPES.AGGREGATE, aggregateName, aggregateFields];\n            }\n        }\n    }\n\n    return [MATCH_TYPES.NONE, null, null];\n}\n\nfunction inferMapping(state1, state2, state1AggregateFields, state2AggregateFields, encoding1, encoding2) {\n    const title1 = encoding1.title.innerHTML.toLowerCase();\n    const title2 = encoding2.title.innerHTML.toLowerCase();\n\n    if (title1 === title2) {\n        return {\n            encoding1: encoding1,\n            encoding2: encoding2,\n            state1: state1,\n            state2: state2,\n            match: MATCH_TYPES.ATTRIBUTE\n        };\n    }\n\n    const [forwardAggregates, fFn, fFields] = iterateAggregates(state1, state2, state1AggregateFields, encoding1, encoding2);\n    const [backwardsAggregates, bFn, bFields] = iterateAggregates(state2, state1, state2AggregateFields, encoding2, encoding1);\n    return {\n        encoding1: forwardAggregates ? encoding1 : encoding2,\n        encoding2: forwardAggregates ? encoding2 : encoding1,\n        state1: forwardAggregates ? state1 : state2,\n        state2: forwardAggregates ? state2 : state1,\n        match: forwardAggregates || backwardsAggregates,\n        fn: fFn || bFn,\n        fields: fFields || bFields\n    }; \n}\n\nfunction iterateEncodings(states, encodings) {\n    const matches = [];\n\n    for (let i = 0; i < encodings.length; ++i) {\n        for (let j = i + 1; j < encodings.length; ++j) {\n            for (const encoding1 of encodings[i]) {\n                for (const encoding2 of encodings[j]) {\n                    const obj = inferMapping(\n                        states[i], states[j], \n                        encodings[i].filter(d => d !== encoding1), \n                        encodings[j].filter(d => d !== encoding2), \n                        encoding1, encoding2\n                    );\n                    if (obj.match !== MATCH_TYPES.NONE) matches.push(obj);\n                }\n            }\n        }\n    }\n\n    return matches;\n}\n\nfunction constructMappings(linkings) {\n    const linkMap = new WeakMap();\n    for (const link of linkings) {\n        const {encoding1, encoding2, state1, state2, fields} = link;\n\n        if (link.match === MATCH_TYPES.ATTRIBUTE) { // Direct link\n            const e1Marks = encoding1.type ? encoding1.marks : state1.svgMarks;\n            const e2Marks = encoding2.type ? encoding2.marks : state2.svgMarks;\n            \n            for (const e1Mark of e1Marks) {\n                const m1 = encoding1.type ? e1Mark.mark : e1Mark;\n                const e1Match = encoding1.type ? e1Mark.label.innerHTML : e1Mark.__inferred__data__[encoding1.title.innerHTML];\n\n                const e2Matches = e2Marks.filter(d => (encoding2.type ? d.label.innerHTML : d.__inferred__data__[encoding2.title.innerHTML]) === e1Match);\n                const m2 = encoding2.type ? e2Matches.map(d => d.mark) : e2Matches;\n\n                linkMap.set(m1, (linkMap.has(m1) ? [...linkMap.get(m1), ...m2] : m2));\n                for (const e2Mark of m2) {\n                    linkMap.has(e2Mark) ? linkMap.get(e2Mark).push(m1) : linkMap.set(e2Mark, [m1]);\n                }\n            }\n        } else { // Aggregate link\n            for (const field of fields) {\n                const val = {encoding: encoding2, state: state2, fn: link.fn};\n                if (field.type) {\n                    for (const {mark} of field.marks) {\n                        linkMap.set(mark, linkMap.has(mark) ? [...linkMap.get(mark), val] : [val]);\n                    }\n                } else {\n                    linkMap.set(field, linkMap.has(field) ? [...linkMap.get(field), val] : [val]);\n                }\n            }\n        }\n    }\n    return linkMap;\n}\n\nexport function link(states) {\n    const encodings = states.map(d => getEncodings(d));\n    const linkings = iterateEncodings(states, encodings);\n    return constructMappings(linkings);\n}\n","export default function sum(values, valueof) {\n  let sum = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value = +value) {\n        sum += value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if (value = +valueof(value, ++index, values)) {\n        sum += value;\n      }\n    }\n  }\n  return sum;\n}\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we don’t ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that don’t fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isn’t worried about “live” collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// don’t; we’d rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import { pointer, select } from \"d3-selection\";\n\nvar brush;\n\nfunction getBrush(svg) {\n    return select(svg)\n            .append('rect')\n            .attr('opacity', 0.35)\n            .attr('x', 0)\n            .attr('y', 0)\n            .attr('width', 0)\n            .attr('height', 0)\n            .attr('id', svg.id + '-brush-rect')\n            .style('fill', 'gray')\n            .style('stroke', '#fff');\n}\n\nexport function brushStart(state, event) {\n    brush = getBrush(state.svg);\n    const [x, y] = pointer(event, state.svg);\n    brush.attr('x', x)\n        .attr('y', y);\n}\n\nexport function brushMove(state, event) {\n    event.preventDefault();\n\n    const [x, y] = pointer(event);\n    const rectX = +brush.node().getAttribute('x'), rectY = +brush.node().getAttribute('y');\n    const width = x - rectX, height = y - rectY;\n    const xTranslate = width < 0 ? width : 0;\n    const yTranslate = height < 0 ? height : 0;\n    \n    brush.attr('width', Math.abs(width))\n        .attr('height', Math.abs(height))\n        .attr('transform', 'translate(' + xTranslate + ',' + yTranslate + ')');\n    return [rectX, rectY, width, height];\n}\n\nexport function brushEnd(event) {\n    brush.remove();\n    // if (+brush.node().getAttribute('width') === 0 || +brush.node().getAttribute(\"height\") === 0) { \n    //     return true;\n    // } else {\n    //     brush.remove();\n    //     return false;\n    // }\n}\n","import sourceEvent from \"./sourceEvent.js\";\n\nexport default function(event, node) {\n  event = sourceEvent(event);\n  if (node === undefined) node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\n","export default function(event) {\n  let sourceEvent;\n  while (sourceEvent = event.sourceEvent) event = sourceEvent;\n  return event;\n}\n","import array from \"./array.js\";\nimport {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([document.querySelectorAll(selector)], [document.documentElement])\n      : new Selection([array(selector)], root);\n}\n","// import { max, min } from \"d3-array\";\n\nimport { selectAll } from \"d3-selection\";\nimport { CategoricalColorLegend, LegendRole, MarkRole, OpacityField, RoleProperty, SelectField, SelectOpacity, UnselectOpacity } from \"../state/constants\";\n\n// function getFormattedDate(date) {\n//     var year = date.getFullYear();\n  \n//     var month = (1 + date.getMonth()).toString();\n//     month = month.length > 1 ? month : '0' + month;\n  \n//     var day = date.getDate().toString();\n//     day = day.length > 1 ? day : '0' + day;\n    \n//     return month + '/' + day + '/' + year;\n//   }  \n\n// function createTooltip(id, c=null) {\n//     if (document.querySelector('#' + id)) return;\n\n//     const div = document.createElement(\"div\");\n//     div.id = id;\n//     div.setAttribute(\"class\", c ? c : \"tooltip\");\n//     div.style = \"opacity:1; visibility:visible; position:absolute; background-color:white; z-index:999; \" +\n//         \"border:solid; border-width:1px; border-radius:2px; padding:2px; font-size:14px; font-weight:500; pointer-events:none;\";\n//     document.body.insertBefore(div, null);\n// }\n\n// function line(SVG, event, mark, i, id=null, c=null) {\n//     if (mark.hasAttribute(\"__legend__\")) return;\n//     if (!id && d3.selectAll(\".brush_tooltip\").nodes().length) return;\n\n//     let transform = mark.getAttribute('transform');\n//     let x_scale = 1, x_translate = 0;\n//     if (transform) {\n//         let t = transform.match(/(-?\\d+\\.?\\d*)/g);\n//         x_translate = +t[0];\n//         x_scale = +t[2];\n//     }\n\n//     let offset = SVG.state().x_axis.ticks[0]['ticks'][0].parentNode._global_transform[0] \n//         +SVG.state().svg.getBoundingClientRect().left,\n//         path_x = event.clientX - offset,\n//         start = SVG.state().x_axis.range[0], \n//         end = mark.getTotalLength(),\n//         target, \n//         pos;\n\n//     create_tooltip(\"tooltip\" + (id ? id : \"\"), c);\n//     let tooltip = document.querySelector(\"#tooltip\" + (id ? id : \"\"));\n//     // tooltip.style['visibility'] = 'visible';\n//     if (path_x < SVG.state().x_axis.range[0] || SVG.state().x_axis.range[1] < path_x) {\n//         d3.selectAll(\".hover\").attr(\"visibility\", \"hidden\");\n//         if (tooltip) tooltip.style[\"visibility\"] = \"hidden\";\n//     } else {\n//         d3.selectAll(\".hover\").attr(\"visibility\", \"visible\");\n//         if (tooltip) tooltip.style[\"visibility\"] = \"visible\";\n//     }\n \n//     path_x = (path_x - x_translate) / x_scale;\n//     while (true){\n//         target = Math.floor((start + end) / 2);\n//         pos = mark.getPointAtLength(target);\n//         if ((target === end || target === start) && pos.x !== path_x) {\n//             break;\n//         }\n\n//         if (pos.x > path_x) {\n//             end = target;\n//         } else if (pos.x < path_x) {\n//             start = target;\n//         } else {\n//             break; //position found\n//         }\n//     }\n\n//     let y = pos.y + SVG.state().y_axis.ticks[0]['ticks'][0].parentNode._global_transform[1];\n//     let y_domain = SVG.state().y_axis.scale.invert(\n//         y - SVG.state().y_axis.ticks[0]['ticks'][0].parentNode._global_transform[1]\n//     );\n//     let data_x = SVG.state().x_axis.scale.invert(path_x);\n//     data_x = typeof data_x === \"number\" ? Math.round(data_x) : getFormattedDate(data_x);\n\n//     // tooltip.innerHTML = (SVG.state().titles.x ? SVG.state().titles.x + \":\" : \"\") + data_x + \"<hr style='margin:0px;border:0.5px solid black;opacity:1;'>\" + \n//     //     (SVG.state().titles.y ? SVG.state().titles.y + \":\" : \"\") + Math.round(y_domain);\n//     if (mark.hasAttribute(\"opacity\") && +mark.getAttribute(\"opacity\") !== 1) return;\n//     let color = mark.type === \"line\" || mark.type === \"polyline\" ? window.getComputedStyle(mark)['stroke'] : window.getComputedStyle(mark)['fill'];\n//     if (i === 1) {\n//         tooltip.innerHTML = SVG.state().svg_marks.length === 1 ? Math.round(y_domain) :\n//             \"<div><span class='dot' style='background-color:\" + color + \";'></span>\" +\n//             \"<div style='display:inline;margin-right:20px;'>\" + (mark.__data__ && mark.__data__.key ? mark.__data__.key : \"\") + \"</div> \" +\n//             \"<div style='display:inline;float:right;'>\" + Math.round(y_domain) + \"</div></div>\";\n//     } else {\n//         tooltip.innerHTML = SVG.state().svg_marks.length === 1 ? Math.round(y_domain) :\n//             \"<div><span class='dot' style='background-color:\" + color + \";'></span>\" +\n//             \"<div style='display:inline;margin-right:20px;'>\" + (mark.__data__ && mark.__data__.key ? mark.__data__.key : \"\") + \"</div> \" +\n//             \"<div style='display:inline;float:right;'>\" + Math.round(y_domain) + \"</div></div>\" +\n//             tooltip.innerHTML;\n//     }\n    \n//     d3.selectAll(\".dot\")\n//         .style(\"height\", \"10px\")\n//         .style(\"width\", \"10px\")\n//         // .style(\"background-color\", \"#bbb\")\n//         .style(\"border-radius\", \"50%\")\n//         .style(\"display\", \"inline-block\");\n    \n//     tooltip.style['color'] = mark.type === \"line\" ? window.getComputedStyle(mark)['stroke'] : \"black\";\n//     tooltip.style['left'] = event.pageX + 7.5;\n//     tooltip.style['top'] = /*SVG.state().svg.getBoundingClientRect().top + 10;*/\n//     event.pageY - event.clientY + y + \n//         SVG.state().svg.getBoundingClientRect().top - 15;\n\n//     let circle = SVG.state().svg.querySelector(\"#_circle\" + (id ? id : \"\") + i);\n//     if (circle) {\n//         circle.setAttribute(\"cx\", (path_x * x_scale + x_translate) \n//             + SVG.state().x_axis.ticks[0]['ticks'][0].parentNode._global_transform[0]);\n//         circle.setAttribute(\"cy\", y);\n//         circle.setAttribute(\"display\", \"\");\n//     } else {\n//         // console.log(mark)\n//         circle = document.createElementNS(\"http://www.w3.org/2000/svg\", \"circle\");\n//         circle.setAttribute(\"r\", 6);\n//         circle.setAttribute(\"fill\", mark.type === \"line\" || mark.type === \"polyline\" ? window.getComputedStyle(mark)['stroke'] : \n//             window.getComputedStyle(mark)['fill']);\n//         circle.setAttribute(\"opacity\", 0.75);\n//         circle.setAttribute(\"stroke\", \"black\");\n//         // circle.setAttribute(\"stroke\", window.getComputedStyle(mark)['fill']);\n//         circle.setAttribute(\"stroke-width\", '1px');\n//         circle.id = \"_circle\" + (id ? id : \"\") + i;\n//         circle.setAttribute(\"class\", c ? c : \"hover\");\n//         SVG.state().svg.append(circle);\n//         circle.setAttribute(\"cx\", (path_x * x_scale + x_translate) \n//             + SVG.state().x_axis.ticks[0]['ticks'][0].parentNode._global_transform[0]);\n//         circle.setAttribute(\"cy\", y);\n//     }\n    \n//     let line = SVG.state().svg.querySelector(\"#_hoverline\" + (id ? id : \"\"));\n//     if (line) { \n//         line.setAttribute(\"x1\", event.clientX - SVG.state().svg.getBoundingClientRect().left);\n//         line.setAttribute(\"x2\", event.clientX - SVG.state().svg.getBoundingClientRect().left);\n//         line.setAttribute(\"display\", \"\");\n//         // line.setAttribute(\"visibility\", \"hidden\");\n//     } else {\n//         line = document.createElementNS(\"http://www.w3.org/2000/svg\", \"line\");\n//         line.setAttribute(\"stroke\", \"black\");\n//         line.setAttribute(\"stroke-width\", 1.5);\n//         line.setAttribute(\"opacity\", \"0.5\");\n//         line.style['pointer-events'] = 'none';\n//         // line.setAttribute(\"visibility\", \"hidden\");\n//         line.setAttribute(\"class\", c ? c : \"hover\")\n//         line.setAttribute(\"y1\", \n//             SVG.state().y_axis.range[0] + SVG.state().y_axis.ticks[0]['ticks'][0].parentNode._global_transform[1]);\n//         line.setAttribute(\"y2\", \n//             SVG.state().y_axis.range[1] + SVG.state().y_axis.ticks[0]['ticks'][0].parentNode._global_transform[1]);\n//         line.setAttribute(\"x1\", event.clientX - SVG.state().svg.getBoundingClientRect().left);\n//         line.setAttribute(\"x2\", event.clientX - SVG.state().svg.getBoundingClientRect().left);\n//         line.id = \"_hoverline\" + (id ? id : \"\");\n//         SVG.state().svg.append(line);\n//     }\n// }\n\n\n// function createHover(state) {\n//     function mouseleave() {\n//         console.log('leave')\n//         state.interactions.brush.on_elem = false;\n//         let tooltip = document.querySelector(\"#tooltip\");\n//         tooltip.style['visibility'] = 'hidden';\n//     }\n    \n//     function highlight(event) {\n//         state.interactions.selection.active = true;\n//         if (event.target.role === 'legend') {\n//             document.getElementById(\"filterMode\").style['opacity'] = 1;\n//             document.getElementById(\"filterMode\").style['display'] = 'block';\n\n//             event.target.active = true;\n//             event.target.legend.marks.forEach(d => {\n//                 if (!d.mark.active) d.mark.setAttribute('opacity', 0.25);\n//                 else d.mark.setAttribute('opacity', 1);\n//             });\n//             const minC = min(event.target.legend.marks.filter(d => d.mark.active).map(d => +d.label.innerHTML ? +d.label.innerHTML : d.label.__data__));\n//             const maxC = max(event.target.legend.marks.filter(d => d.mark.active).map(d => +d.label.innerHTML ? +d.label.innerHTML : d.label.__data__));\n//             console.log([minC, maxC])\n//             for (const mark of state.svgMarks) {\n//                 if (window.getComputedStyle(mark).fill !== window.getComputedStyle(event.target).fill) continue;\n//                 let condition = mark.__inferred__data__[event.target.legend.title ? event.target.legend.title.innerHTML : 'legend'];\n//                 condition = condition >= minC && condition <= maxC;\n//                 if (!condition) {\n//                     mark.setAttribute(\"opacity\", 0.25);\n//                 } else {\n//                     mark.setAttribute(\"opacity\", 1);\n//                 }\n//             }\n//             return;\n//         } else if (!event.target.getAttribute('__mark__')) return;\n\n//         document.getElementById(\"filterMode\").style['opacity'] = 1;\n//         document.getElementById(\"filterMode\").style['display'] = 'block';\n\n//         let pan_elem = document.getElementById(\"panMode\");\n//         let brush_elem = document.getElementById(\"brushMode\");\n//         let filter_elem = document.getElementById(\"filterMode\");\n//         let annotate_elem = document.getElementById(\"annotateMode\");\n\n//         pan_elem.style['opacity'] = 0.4;\n//         brush_elem.style['opacity'] = 1;\n//         annotate_elem.style['opacity'] = 0.4;\n\n//         state.interactions.pan.flag = false;\n//         state.interactions.brush.flag = true;\n//         state.interactions.annotate.flag = false;\n//         state.svg.style['cursor'] = 'crosshair';\n\n\n//         // if (event.target.hasAttribute(\"__legend__\")) {\n//         //     event.target.active = true;\n//         //     let p = SVG.state().legend.filter(d => d['glyph'].active);\n//         //     let min_c = d3.min(p.map(d => {\n//         //         return (+d['glyph'].getBoundingClientRect().bottom - +d['glyph'].getBoundingClientRect().top) / 1;\n//         //     }));\n//         //     let max_c = d3.max(p.map(d => {\n//         //         return (+d['glyph'].getBoundingClientRect().bottom - +d['glyph'].getBoundingClientRect().top) / 1;\n//         //     }));\n//         //     console.log([min_c, max_c])\n\n//         //     let color = window.getComputedStyle(event.target).fill;\n//         //     let color1 = color;\n//         //     color = \"none\";\n//         //     let width, height;\n//         //     if (color === \"none\") {\n//         //         width = (+event.target.getBoundingClientRect().bottom - +event.target.getBoundingClientRect().top) / 1;\n//         //         // height = (+event.target.getBoundingClientRect().bottom - +event.target.getBoundingClientRect().top) / 2;\n//         //     }\n//         //     for (const mark of SVG.state().svg_marks) {\n//         //         let condition;\n//         //         if (color === \"none\") {\n//         //             if (window.getComputedStyle(mark).fill !== color1) continue;\n//         //             let m_width = (+mark.getBoundingClientRect().bottom - +mark.getBoundingClientRect().top) / 1;\n//         //             // let m_height = (+mark.getBoundingClientRect().bottom - +mark.getBoundingClientRect().top) / 2;\n//         //             condition = min_c > m_width || m_width > max_c;\n//         //         } else {\n//         //             condition = window.getComputedStyle(mark).fill != color;\n//         //         }\n//         //         if (condition) {\n//         //             mark.setAttribute(\"opacity\", 0.25);\n//         //         } else {\n//         //             mark.setAttribute(\"opacity\", 1);\n//         //         }\n//         //     }\n//         //     var keys = (event.ctrlKey ? \" ctrl \" : \"\") + (event.shiftKey ? \" shift \" : \"\") + (event.altKey ? \" alt \" : \"\");\n//         //     // document.getElementById(\"logfile\").innerHTML += event.type + \" [\" + keys + \"] \" + SVG.state().svg.id + \" to filter by legend <br/>\";\n            \n//         //     return;\n//         // } \n\n//         let ctrl = event.ctrlKey, cmd = event.metaKey, alt = event.altKey, shift = event.shiftKey;\n\n//         if (ctrl || cmd || alt || shift) {\n//             let opacity = !event.target.hasAttribute(\"opacity\") ? 0.25 : \n//                 +event.target.getAttribute(\"opacity\") === 1 ? 0.25 : 1;\n//             event.target.setAttribute(\"opacity\", opacity);\n//         } else {\n//             event.target.setAttribute(\"opacity\", 1);\n//             for (const mark of state.svgMarks) {\n//                 if (mark === event.target) continue;\n//                 mark.setAttribute(\"opacity\", 0.25);\n//             }\n//         }\n\n//         // var keys = (event.ctrlKey ? \" ctrl \" : \"\") + (event.shiftKey ? \" shift \" : \"\") + (event.altKey ? \" alt \" : \"\");\n//         // let tooltips = document.querySelectorAll(\".tooltip\");\n//         // if (tooltips.length) tooltips.forEach(d => d.style['visibility'] = 'hidden');\n//         // d3.selectAll(\".hover\").attr(\"display\", \"none\")\n//         // document.getElementById(\"logfile\").innerHTML += event.type + \" [\" + keys + \"] \" + SVG.state().svg.id + \" to select mark <br/>\";\n//     }\n\n//     function showData(event) {\n//         state.interactions.brush.on_elem = true;\n\n//         createTooltip(\"tooltip\");\n//         let tooltip = document.querySelector(\"#tooltip\");\n//         let data = \"\";\n//         let mark = event.target;\n\n//         if (!mark.__inferred__data__) return;\n        \n//         for (const [key, value] of Object.entries(mark.__inferred__data__)) {\n//             data += String(key) + \": \" + String(value);\n//             data += \"<br/>\";\n//         }\n    \n//         tooltip.innerHTML = data;\n//         tooltip.style['visibility'] = 'visible';\n//         tooltip.style['left'] = event.pageX + 7;\n//         tooltip.style['top'] = event.pageY;\n//     }\n\n//     function showline(event) {\n//         const marks = SVG.state().svg_marks;\n//         var i = 0;\n//         for (const mark of marks) {\n//             // if (mark.style['opacity'] && +mark.style['opacity'] !== 1) return;\n//             ++i;\n//             // if (i == 2) break;\n//             line(SVG, event, mark, i);\n//         }\n//         if (marks.length > 1) {\n//             let tooltip = document.getElementById(\"tooltip\");\n//             [...tooltip.children]\n//                 .sort((a,b) => +a.children[2].innerHTML < +b.children[2].innerText ? 1 : -1)\n//                 .forEach(node => tooltip.appendChild(node));\n//             if (marks[0].type !== \"polyline\") {\n//                 for (let i = 0; i < tooltip.children.length - 1; ++i) {\n//                     tooltip.children[i].children[2].innerHTML = +tooltip.children[i].children[2].innerHTML - \n//                         +tooltip.children[i + 1].children[2].innerHTML;\n//                 }\n//             }\n//         }\n//     }\n\n//     function mousedown(event) {\n//         let marks = state.svgMarks;\n//         for (const mark of marks) {\n//             mark.style['opacity'] = mark.style['opacity'] && mark.style['opacity'] === 0.5 ? 1 : 0.5; \n//         }\n//         this.style['opacity'] = this.style['opacity'] && this.style['opacity'] === 1 ? 0.5 : 1; \n//     }\n\n//     for (const mark of state.svgMarks) {\n//         if (true || !mark.type || mark.type === 'ellipse' || (!state.xAxis.ticks.length && !state.yAxis.ticks.length)) {\n//             mark.addEventListener('mouseenter', showData);\n//             mark.addEventListener('mouseleave', mouseleave);\n//         } else {\n//             SVG.state().svg.addEventListener('mousemove', showline);\n//             mark.addEventListener('mouseenter', function(event) {\n//                 SVG.state().interactions.brush.on_elem = true;\n//             });\n//             mark.addEventListener('mouseleave', function(event) {\n//                 SVG.state().interactions.brush.on_elem = false;\n//             });\n//         }\n//         mark.style['cursor'] = 'pointer';\n//         // mark.addEventListener('mousedown', mousedown);\n//     }\n//     if (state.legends[0]) {\n//         state.legends[0].marks.forEach(d => {\n//             d.mark.style['pointer-events'] = 'fill';\n//             d.mark.style['cursor'] = 'pointer';\n//         });\n//     } \n    \n//     document.addEventListener('click', highlight);\n\n//     control.addEventListener(\"change\", function() {\n//         if (!this.checked) {\n//             d3.select(\"#\" + SVG.state().svg.id).selectAll(\".hover\").attr(\"display\", \"none\");\n//             let tooltips = document.querySelectorAll(\".tooltip\");\n//             if (tooltips.length) tooltips.forEach(d => d.style['visibility'] = 'hidden');\n//         } \n\n//         for (const mark of SVG.state().svg_marks) {\n//             if (true || !mark.type || mark.type === \"ellipse\" || (!SVG.state().x_axis.ticks.length && !SVG.state().y_axis.ticks.length)) {\n//                 this.checked ? mark.addEventListener('mouseenter', show_data) : mark.removeEventListener('mouseenter', show_data);\n//                 this.checked ? mark.addEventListener('mouseleave', mouseleave) : mark.removeEventListener('mouseleave', mouseleave);\n//             } else {\n//                 this.checked ? SVG.state().svg.addEventListener('mousemove', showline) : SVG.state().svg.removeEventListener('mousemove', showline);\n//             }\n//             // this.checked ? mark.addEventListener('mousedown', mousedown) : mark.removeEventListener('mousedown', mousedown);\n//         }\n//     });\n// }\n\n// function add_click(SVG) {\n//     for (const mark of svg_objects.svg_marks) {\n//         mark.addEventListener('click', show_data);\n//     }\n// }\n\n// function select(state) {\n//     createHover(state);\n//     // add_click(svg_objects);\n// }\n\n// select.applyBrush = function(state, x, y, width, height) {\n//     d3.selectAll(\".brush_tooltip\").remove();\n\n//     let event1 = { clientX: x, pageX: x, clientY: y, pageY: y };\n//     let event2 = { clientX: x + +width, pageX: x + +width, clientY: y + +height, pageY: y + +height}\n//     let i = 0;\n//     for (const mark of state.svgMarks) {\n//         ++i;\n//         line(state, event1, mark, i, \"brush1\", \"brush_tooltip\");\n//         line(state, event2, mark, i, \"brush2\", \"brush_tooltip\");\n//     }\n\n//     if (state.svgMmarks.length > 1) {\n//         let tooltips = [document.getElementById(\"tooltipbrush1\"), document.getElementById(\"tooltipbrush2\")];\n//         console.log(tooltips)\n//         for (const tooltip of tooltips) {\n//             [...tooltip.children]\n//                 .sort((a,b) => +a.children[2].innerHTML < +b.children[2].innerText ? 1 : -1)\n//                 .forEach(node => tooltip.appendChild(node));\n//             if (SVG.state().svg_marks[0].type !== \"polyline\") {\n//                 for (let i = 0; i < tooltip.children.length - 1; ++i) {\n//                     tooltip.children[i].children[2].innerHTML = +tooltip.children[i].children[2].innerHTML - \n//                         +tooltip.children[i + 1].children[2].innerHTML;\n//                 }\n//             }\n//         }\n//     }\n// }\n\n// select.updateBrush = function(SVG) {\n//     if (!document.getElementById(\"_hoverlinebrush1\")) return;\n//     let x1 = document.getElementById(\"_hoverlinebrush1\").getBoundingClientRect().left;\n//     let y1 = document.getElementById(\"_hoverlinebrush1\").getBoundingClientRect().top;\n//     let x2 = document.getElementById(\"_hoverlinebrush2\").getBoundingClientRect().left;\n//     let y2 = document.getElementById(\"_hoverlinebrush2\").getBoundingClientRect().top;\n\n//     let event1 = { clientX: x1, pageX: x1, clientY: y1, pageY: y1 };\n//     let event2 = { clientX: x2, pageX: x2, clientY: y2, pageY: y2 }\n//     let i = 0;\n//     for (const mark of SVG.state().svg_marks) {\n//         ++i;\n//         line(SVG, event1, mark, i, \"brush1\", \"brush_tooltip\");\n//         line(SVG, event2, mark, i, \"brush2\", \"brush_tooltip\");\n//     }\n\n//     if (SVG.state().svg_marks.length > 1) {\n//         let tooltips = [document.getElementById(\"tooltipbrush1\"), document.getElementById(\"tooltipbrush2\")];\n//         for (const tooltip of tooltips) {\n//             [...tooltip.children]\n//                 .sort((a,b) => +a.children[2].innerHTML < +b.children[2].innerText ? 1 : -1)\n//                 .forEach(node => tooltip.appendChild(node));\n//             for (let i = 0; i < tooltip.children.length - 1; ++i) {\n//                 tooltip.children[i].children[2].innerHTML = +tooltip.children[i].children[2].innerHTML - \n//                     +tooltip.children[i + 1].children[2].innerHTML;\n//             }\n//         }\n//     }\n// }\n\n// select.selectLegend = function(state, condition) {\n//         // state.legends[0].marks.forEach(d => {\n//         //     if (d.mark.active) d.mark.setAttribute('opacity', 0.25);\n//         //     else d.mark.setAttribute('opacity', 1);\n//         // });\n//         const minC = min(state.legends[0].marks.map(d => +d.label.innerHTML));\n//         const maxC = max(state.legends[0].marks.map(d => +d.label.innerHTML));\n//         console.log([minC, maxC]);\n//         var attr = [];\n\n//         if (typeof condition[0] === 'string') {\n//             state.legends[0].marks.forEach(d => {\n//                 if (!condition.includes(d.label.innerHTML)) d.mark.setAttribute('opacity', 0.25);\n//                 else {\n//                     d.mark.setAttribute('opacity', 1);\n//                     attr.push(window.getComputedStyle(d.mark)[state.legends[0].matchingAttr]);\n//                 }\n//             });\n//         } else {\n//             state.legends[0].marks.forEach(d => {\n//                 if (+d.label.innerHTML < condition[0] || +d.label.innerHTML > condition[1]) d.mark.setAttribute('opacity', 0.25);\n//                 else d.mark.setAttribute('opacity', 1);\n//             });\n//         }\n//         console.log(attr)\n//         for (const mark of state.svgMarks) {\n//             // if (window.getComputedStyle(mark).fill !== window.getComputedStyle(event.target).fill) continue;\n//             let _condition = mark.__inferred__data__ ? +mark.__inferred__data__[state.legends[0].title ? state.legends[0].title.innerHTML : 'legend'] : window.getComputedStyle(mark)[state.legends[0].matchingAttr];\n\n//             _condition = typeof condition[0] === 'string' ? attr.includes(_condition) : _condition >= condition[0] && _condition <= condition[1];\n\n//             if (!_condition) {\n//                 mark.setAttribute(\"opacity\", 0.25);\n//             } else {\n//                 mark.setAttribute(\"opacity\", 1);\n//             }\n//         }\n//         return;\n// }\n\n// export { select };\n\nfunction setOpacity(marks, opacity) {\n    selectAll(marks).attr('opacity', opacity);\n}\n\nfunction setSelection(marks, selection, opacity) {\n    selectAll(marks).each(function() {\n        this[SelectField] = selection;\n    });\n    setOpacity(marks, opacity);\n}\n\nfunction selectAllMarks(marks) {\n    setSelection(marks, false, marks[0][OpacityField] || SelectOpacity);\n}\n\nfunction unselectAllMarks(marks) {\n    setSelection(marks, false, UnselectOpacity);\n}\n\nexport function selectMarks(allMarks, marks) {\n    unselectAllMarks(allMarks);\n    setSelection(marks, true, SelectOpacity);\n}\n\nfunction appendMarks() {\n    \n}\n\nfunction selectLegend(state, mark) {\n    const legend = mark.legend;\n\n    if (legend.type === CategoricalColorLegend) {\n        const val = legend.scale.domain()[legend.scale.range().indexOf(window.getComputedStyle(mark)[legend.matchingAttr])];\n        var condition = [val];\n    } else {\n        const val = legend.scale.invert(mark._getBBox().width);\n        var condition = [val, val];\n    }\n\n    const candidateMarks = state.svgMarks.filter(function(d) {\n        const data = d.__inferred__data__[legend.title.innerHTML];\n        return typeof condition[0] === 'string' ? condition.includes(data) : data >= condition[0] && data <= condition[1];\n    });\n\n    selectMarks(legend.marks.map(d => d.mark), [mark]);\n    selectMarks(state.svgMarks, candidateMarks);\n}\n\nexport function isSelected(mark) {\n    return mark.hasAttribute('opacity') && +mark.getAttribute('opacity') === SelectOpacity;\n}\n\nexport function selectSVG(state, target) {\n    var flag = true;\n\n    if (target[RoleProperty] === MarkRole) {\n        selectMarks(state.svgMarks, [target]);\n    } else if (target[RoleProperty] === LegendRole) {\n        selectLegend(state, target);\n    } else {\n        flag = false;\n        selectAllMarks(state.svgMarks);\n        state.legends.forEach(d => selectAllMarks(d.marks.map(e => e.mark)));\n    }\n\n    return flag;\n}\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","import { deconstructChart } from '../parsers/view-parsers.js';\nimport { inferMarkAttributes } from '../parsers/attribute-parsers.js';\nimport { inspect } from './inspect.js';\nimport { link } from './link.js';\n// import { createMenu } from '../toolbar/menu.js';\n\nimport { selectMarks, selectSVG } from '../handlers/select.js';\nimport { SelectField } from '../state/constants.js';\nimport { brushEnd, brushMove, brushStart } from '../handlers/brush.js';\nimport { max, min } from 'd3-array';\nimport { pointer } from 'd3-selection';\n// import { brush } from '../handlers/brush.js';\n// import { zoom } from '../handlers/zoom.js';\n// import { filter } from '../handlers/filter.js';\n// import { sort } from '../handlers/sort.js';\n// import { annotate } from '../handlers/annotate.js';\n// import { arrange } from '../handlers/arrange.js';\n\nexport function orchestrate(svg) { \n    const states = svg.map(d => initialize(inspect(d)));\n    const linkMap = link(states);\n    states.forEach(d => coordinateInteractions(d, linkMap));\n\n    function initialize(state) {\n        // states[0].svg.style['cursor'] = 'crosshair';\n\n        // Infer view information\n        deconstructChart(state);\n        inferMarkAttributes(state);\n        return state;\n    }\n\n    function coordinateInteractions(state, linkMap) {\n        var mouseMoved = false;\n\n        function selector(event) {\n            if (mouseMoved) return;\n\n            const target = event.target;\n            if (!selectSVG(state, target)) {\n                states.forEach(d => selectSVG(d, d.svg));\n                return;\n            }\n            \n            if (linkMap.has(target)) {\n                for (const mark of linkMap.get(target)) {\n                    if (mark[SelectField]) continue;\n                    const newEvent = new PointerEvent(event.type, event);\n                    mark.dispatchEvent(newEvent);\n                }\n            }\n        }\n\n        function brusher(event) {\n            function bMove(event) {\n                // filter(\n                //     state,\n                //     +rect.getAttribute(\"x\") + +svg.getBoundingClientRect().left + x_translate,\n                //     +rect.getAttribute(\"y\") + +svg.getBoundingClientRect().top + y_translate,\n                //     Math.abs(+rect.getAttribute(\"width\")),\n                //     Math.abs(+rect.getAttribute(\"height\")),\n                //     e.ctrlKey || e.metaKey || e.altKey || e.shiftKey\n                // );\n                const mousePos = pointer(event);\n                if (Math.hypot(mouseStart[0] - mousePos[0], mouseStart[1] - mousePos[1]) < 2) return;\n                mouseMoved = true;\n\n                const [x, y, width, height] = brushMove(state, event);\n                const x1 = state.xAxis.scale.invert(x), x2 = state.xAxis.scale.invert(x + width),\n                    y1 = state.yAxis.scale.invert(y), y2 = state.yAxis.scale.invert(y + height);\n                brushedMarks = state.svgMarks.filter(function(d) {\n                    const xField = d.__inferred__data__[state.xAxis.title.innerHTML];\n                    const yField = d.__inferred__data__[state.yAxis.title.innerHTML];\n                    return xField >= min([x1, x2]) && xField <= max([x1, x2]) && yField >= min([y1, y2]) && yField <= max([y1, y2]);\n                });\n            }\n\n            function bEnd(event) {\n                brushEnd(state, event);\n                selectMarks(state.svgMarks, brushedMarks);\n                state.svg.removeEventListener('mousemove', bMove);\n                document.removeEventListener('mouseup', bEnd);\n            }\n\n            mouseMoved = false;\n            var brushedMarks, mouseStart = pointer(event);\n\n            brushStart(state, event);\n            state.svg.addEventListener('mousemove', bMove);\n            document.addEventListener('mouseup', bEnd);\n        }\n        \n        state.svg.addEventListener('click', selector);\n        state.svg.addEventListener('mousedown', brusher);\n    }    \n}\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","import { orchestrate } from './orchestration/orchestrate.js';\n\nexport function hydrate(svg) {\n    if (!svg) return;\n    if (!Array.isArray(svg)) svg = [svg];\n    \n    svg = svg.map(d => typeof d === 'string' ? document.querySelector(d) : d);\n    if (svg) return orchestrate(svg);\n}\n"],"names":["ascending","a","b","NaN","descending","bisector","f","compare1","compare2","delta","left","x","lo","hi","length","mid","d","zero","center","i","right","bisectRight","InternMap","Map","constructor","entries","key","keyof","super","Object","defineProperties","this","_intern","value","_key","set","get","intern_get","has","intern_set","delete","intern_delete","valueOf","identity","group","values","keys","map","reduce","regroup","groups","index","push","nest","e10","Math","sqrt","e5","e2","tickIncrement","start","stop","count","step","max","power","floor","log","LN10","error","pow","tickStep","step0","abs","step1","valueof","undefined","min","mean","sum","range","n","arguments","ceil","Array","initRange","domain","implicit","Symbol","ordinal","unknown","scale","_","slice","from","copy","apply","band","bandwidth","ordinalRange","r0","r1","round","paddingInner","paddingOuter","align","rescale","reverse","sequence","rangeRound","padding","factory","prototype","extend","parent","definition","create","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","color","format","m","l","trim","toLowerCase","exec","parseInt","rgbn","Rgb","rgba","hsla","hasOwnProperty","r","g","rgbConvert","o","opacity","rgb_formatHex","hex","rgb_formatRgb","clampa","clampi","isNaN","toString","h","s","Hsl","hslConvert","clamph","clampt","hsl2rgb","m1","m2","define","channels","assign","displayable","formatHex8","formatHsl","k","clamp","gamma","y","nogamma","t","exponential","constant","linear","rgbGamma","end","colorRgb","c","genericArray","nb","na","Date","setTime","reA","reB","source","am","bm","bs","bi","lastIndex","q","number","one","join","string","date","ArrayBuffer","isView","DataView","isArray","object","numberArray","unit","normalize","bimap","interpolate","d0","d1","polymap","j","bisect","target","transformer","transform","untransform","piecewise","output","input","interpolateValue","invert","interpolateNumber","interpolateRound","u","continuous","formatDecimalParts","p","toExponential","indexOf","coefficient","prefixExponent","re","formatSpecifier","specifier","match","Error","FormatSpecifier","fill","sign","symbol","width","comma","precision","type","exponent","toFixed","toLocaleString","replace","e","toPrecision","formatRounded","X","toUpperCase","locale","formatPrefix","prefixes","grouping","thousands","call","Number","substring","currencyPrefix","currency","currencySuffix","decimal","numerals","formatNumerals","String","percent","minus","nan","newFormat","formatTypes","prefix","test","suffix","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","out","i1","i0","formatTrim","charCodeAt","Infinity","tickFormat","precisionPrefix","precisionRound","precisionFixed","linearish","ticks","isFinite","nice","prestep","maxIter","formatLocale","t0","t1","newInterval","floori","offseti","field","interval","offset","previous","filter","every","millisecond","durationSecond","durationMinute","durationHour","durationDay","durationWeek","durationMonth","durationYear","second","getMilliseconds","getUTCSeconds","minute","getSeconds","getMinutes","hour","getHours","day","setHours","setDate","getDate","getTimezoneOffset","weekday","getDay","sunday","monday","thursday","month","setMonth","getMonth","getFullYear","year","setFullYear","utcMinute","setUTCSeconds","getUTCMinutes","utcHour","setUTCMinutes","getUTCHours","utcDay","setUTCHours","setUTCDate","getUTCDate","utcWeekday","getUTCDay","utcSunday","utcMonday","utcThursday","utcMonth","setUTCMonth","getUTCMonth","getUTCFullYear","utcYear","setUTCFullYear","ticker","week","tickIntervals","tickInterval","utcWeek","timeTicks","timeTickInterval","localDate","H","M","S","L","utcDate","UTC","newDate","timeFormat","pads","numberRe","percentRe","requoteRe","pad","requote","formatRe","names","formatLookup","name","parseWeekdayNumberSunday","w","parseWeekdayNumberMonday","parseWeekNumberSunday","U","parseWeekNumberISO","V","parseWeekNumberMonday","W","parseFullYear","parseYear","parseZone","Z","parseQuarter","parseMonthNumber","parseDayOfMonth","parseDayOfYear","parseHour24","parseMinutes","parseSeconds","parseMilliseconds","parseMicroseconds","parseLiteralPercent","parseUnixTimestamp","Q","parseUnixTimestampSeconds","formatDayOfMonth","formatHour24","formatHour12","formatDayOfYear","timeDay","timeYear","formatMilliseconds","formatMicroseconds","formatMonthNumber","formatMinutes","formatSeconds","formatWeekdayNumberMonday","formatWeekNumberSunday","timeSunday","dISO","timeThursday","formatWeekNumberISO","formatWeekdayNumberSunday","formatWeekNumberMonday","timeMonday","formatYear","formatYearISO","formatFullYear","formatFullYearISO","formatZone","z","formatUTCDayOfMonth","formatUTCHour24","formatUTCHour12","formatUTCDayOfYear","formatUTCMilliseconds","getUTCMilliseconds","formatUTCMicroseconds","formatUTCMonthNumber","formatUTCMinutes","formatUTCSeconds","formatUTCWeekdayNumberMonday","dow","formatUTCWeekNumberSunday","UTCdISO","formatUTCWeekNumberISO","formatUTCWeekdayNumberSunday","formatUTCWeekNumberMonday","formatUTCYear","formatUTCYearISO","formatUTCFullYear","formatUTCFullYearISO","formatUTCZone","formatLiteralPercent","formatUnixTimestamp","formatUnixTimestampSeconds","calendar","formatMillisecond","formatSecond","formatMinute","formatHour","formatDay","formatWeek","formatMonth","x0","x1","time","timeMonth","timeWeek","timeHour","timeMinute","timeSecond","locale_dateTime","dateTime","locale_date","locale_time","locale_periods","periods","locale_weekdays","days","locale_shortWeekdays","shortDays","locale_months","months","locale_shortMonths","shortMonths","periodRe","periodLookup","weekdayRe","weekdayLookup","shortWeekdayRe","shortWeekdayLookup","monthRe","monthLookup","shortMonthRe","shortMonthLookup","formats","A","B","G","I","Y","utcFormats","parses","parseSpecifier","charAt","newParse","parse","utcFormat","utcParse","defaultLocale","Ellipse","Line","Polygon","Polyline","Rect","Path","Left","Right","Top","Bottom","SizeLegend","CategoricalColorLegend","LegendRole","MarkRole","Transform","args","other","translate","rotate","tx","ty","sx","sy","getTransform","appendTransform","parseTransform","element","isGlobal","transforms","transformList","baseVal","numberOfItems","getItem","matrix","SVG_TRANSFORM_TRANSLATE","SVG_TRANSFORM_SCALE","SVG_TRANSFORM_ROTATE","angle","hasAttribute","getAttribute","getFormatVal","elData","innerHTML","__data__","datum","copyElement","newElement","cloneNode","computeCenterPos","orient","clientRect","getBoundingClientRect","height","convertPtToPx","pt","includes","split","SVGToScreen","svg","svgX","svgY","createSVGPoint","matrixTransform","getScreenCTM","sortByViewPos","objects","useField","comparator","dim","_getBBox","marks","sort","axis","state","tickArguments","tickValues","tickSizeInner","tickSizeOuter","tickPadding","window","devicePixelRatio","svgAxis","xAxis","yAxis","position","updateTick","tick","label","tickMarks","svgRect","lx","ly","top","translateX","translateY","setAttribute","localTransform","mark","counter","newTick","parentElement","appendChild","forEach","insertBefore","pos","remove","pop","applyTransform","tickSize","inferScale","legend","getComputedStyle","matchingAttr","scaleOrdinal","scaleLinear","parseChart","candidateGroups","positions","textMark","textMarks","textBBox","_map","found","markAssignment","WeakMap","alignmentMap","alignment","candidateGroup","collectCandidateTextGroups","axes","legends","titles","others","tickCandidates","positionMap","svgMark","svgMarks","bbox","xOffset","centerX","yOffset","centerY","foundX","foundY","collectCandidateTicks","textKeys","closestMark","distance","MAX_VALUE","markBBox","posDiff","bottom","collectTextKeys","textGroup","anyMatched","tickGroup","textMatched","tickStyles","matchedTicks","text","tickMatch","tickBBox","style","tickStyle","stroke","styleKey","separateOthers","pruneGroups","isLegend","title","axisMap","orphanTicks","addTicks","size","groupAxes","mark1Style","mark2Style","parseLegends","calculatePos","el","elBBox","getClosestTitle","closestTitle","titleX","titleY","axisPos","legendPos","assignTitles","cleanMarks","xLeft","xRight","yTop","yBottom","computeDomain","formatVal","deconstructChart","svgBBox","yTickBB","yTickRange","xTickBB","xTickRange","xMin","xMax","yMin","yMax","SVG","scaleTime","scaleBand","axisLeft","svgClientRect","newDomainX","newDomainY","configureAxes","ViewState","hasDomain","interactions","selection","control","active","zoom","axisControl","pan","flag","brush","on_elem","annotate","arrange","peg$SyntaxError","message","expected","location","captureStackTrace","child","ctor","peg$subclass","buildMessage","DESCRIBE_EXPECTATION_FNS","literal","expectation","literalEscape","class","escapedParts","parts","classEscape","inverted","any","description","ch","descriptions","describeExpected","describeFound","parserFunction","options","peg$result","peg$FAILED","peg$startRuleFunctions","svg_path","peg$parsesvg_path","peg$startRuleFunction","peg$c1","first","more","merge","peg$c2","peg$c3","peg$classExpectation","peg$c5","peg$c6","peg$c8","peg$c9","peg$c10","commands","peg$c11","peg$c12","peg$c14","peg$c15","peg$c17","peg$c18","peg$c20","peg$c21","peg$c23","peg$c24","peg$c26","peg$c27","peg$c28","peg$c29","peg$c34","peg$c35","peg$c39","peg$literalExpectation","peg$c40","peg$c41","peg$c42","peg$c43","peg$c44","peg$c45","peg$c46","peg$c47","peg$c48","peg$c50","peg$c51","peg$currPos","peg$posDetailsCache","line","column","peg$maxFailPos","peg$maxFailExpected","startRule","ignoreCase","peg$computePosDetails","details","peg$computeLocation","startPos","endPos","startPosDetails","endPosDetails","peg$fail","s0","s1","s2","s3","s4","peg$parsewsp","s5","peg$parsemoveTo_drawTo_commandGroup","peg$parsemoveTo_drawTo_commandGroups","data","cmds","concat","code","relative","peg$c0","s6","peg$parsecoordinate_pair","peg$parsecomma_wsp","peg$parselineto_argument_sequence","move","peg$parsemoveto","peg$parsedrawto_command","peg$parseclosepath","peg$parselineto","peg$parsecoordinate_sequence","peg$parsehorizontal_lineto","peg$parsevertical_lineto","peg$parsecurveto_argument","peg$parsecurveto_argument_sequence","peg$parsecurveto","peg$parsesmooth_curveto_argument","peg$parsesmooth_curveto_argument_sequence","peg$parsesmooth_curveto","peg$parsequadratic_bezier_curveto_argument","peg$parsequadratic_bezier_curveto_argument_sequence","peg$parsequadratic_bezier_curveto","peg$parsesmooth_quadratic_bezier_curveto_argument_sequence","peg$parsesmooth_quadratic_bezier_curveto","peg$parseelliptical_arc_argument","peg$parseelliptical_arc_argument_sequence","peg$parseelliptical_arc","peg$parsenumber","y1","x2","y2","s7","s8","s9","s10","s11","xy","peg$parsenonnegative_number","peg$parseflag","rx","ry","xAxisRotation","largeArc","sweep","peg$parsefloating_point_constant","peg$parsedigit_sequence","peg$parsesign","peg$parsecomma","peg$parsefractional_constant","peg$parseexponent","v","cmd","command","parseSVG","makeAbsolute","subpathStart","prevCmd","attr","y0","svgPathParser","markTypes","id","extractElementInformation","nodeName","getBBox","p1","p2","globalPosition","analyzeDomTree","className","DefaultSvgId","removeAttribute","markType","parser.parseSVG","contour","endCmd","relCommands","inferTypeFromPath","childNodes","MATCH_TYPES","AGGREGATIONS","COUNT","MIN","MAX","MEAN","SUM","iterateAggregates","state1","state2","aggregateFields","encoding1","encoding2","fields","__inferred__data__","totals","aggregateName","aggregateFn","inferMapping","state1AggregateFields","state2AggregateFields","forwardAggregates","fFn","fFields","backwardsAggregates","bFn","bFields","fn","link","states","encodings","getEncodings","linkings","matches","obj","iterateEncodings","linkMap","e1Marks","e2Marks","e1Mark","e1Match","e2Matches","e2Mark","val","encoding","constructMappings","xhtml","xlink","xml","xmlns","namespaces","space","local","creatorInherit","document","ownerDocument","uri","namespaceURI","documentElement","createElement","createElementNS","creatorFixed","fullname","namespace","none","selector","querySelector","array","empty","childMatcher","node","find","childFirst","firstElementChild","children","update","EnterNode","_next","_parent","bindIndex","enter","exit","groupLength","dataLength","bindKey","keyValue","nodeByKeyValue","keyValues","arraylike","attrRemove","attrRemoveNS","removeAttributeNS","attrConstant","attrConstantNS","setAttributeNS","attrFunction","attrFunctionNS","defaultView","styleRemove","removeProperty","styleConstant","priority","setProperty","styleFunction","styleValue","getPropertyValue","propertyRemove","propertyConstant","propertyFunction","classArray","classList","ClassList","_node","_names","classedAdd","list","add","classedRemove","classedTrue","classedFalse","classedFunction","textRemove","textContent","textConstant","textFunction","htmlRemove","htmlConstant","htmlFunction","raise","nextSibling","parentNode","lower","previousSibling","firstChild","constantNull","removeChild","selection_cloneShallow","clone","selection_cloneDeep","parseTypenames","typenames","onRemove","typename","on","__on","removeEventListener","listener","onAdd","event","contextListener","addEventListener","dispatchEvent","params","CustomEvent","createEvent","initEvent","bubbles","cancelable","detail","dispatchConstant","dispatchFunction","next","querySelectorAll","splice","contains","root","Selection","parents","_groups","_parents","sourceEvent","currentTarget","ownerSVGElement","point","clientX","clientY","inverse","rect","clientLeft","clientTop","pageX","pageY","setSelection","selectAll","each","setOpacity","selectAllMarks","selectMarks","allMarks","unselectAllMarks","selectSVG","condition","candidateMarks","selectLegend","getBrush","select","append","orchestrate","initialize","console","inspect","markRect","markX","markY","iterable","inferMarkAttributes","mouseMoved","newEvent","PointerEvent","brusher","bMove","mousePos","pointer","hypot","mouseStart","preventDefault","rectX","rectY","xTranslate","yTranslate","brushMove","brushedMarks","xField","yField","bEnd","brushStart","coordinateInteractions","subgroups","subnode","subgroup","arrayAll","selectorAll","selectChild","childFind","selectChildren","childrenFilter","matcher","bind","enterGroup","updateGroup","exitGroup","_enter","_exit","sparse","onenter","onupdate","onexit","order","context","groups0","groups1","m0","merges","group0","group1","compareDocumentPosition","compare","compareNode","sortgroups","sortgroup","callback","nodes","getAttributeNS","property","classed","html","creator","insert","before","deep","dispatch","iterator"],"mappings":"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"}