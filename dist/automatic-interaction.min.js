!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).AutomaticInteraction={})}(this,(function(t){"use strict";function n(t,n){return null==t||null==n?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function e(t,n){return null==t||null==n?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function r(t){let r,o,u;function a(t,n,e=0,i=t.length){if(e<i){if(0!==r(n,n))return i;do{const r=e+i>>>1;o(t[r],n)<0?e=r+1:i=r}while(e<i)}return e}return 2!==t.length?(r=n,o=(e,r)=>n(t(e),r),u=(n,e)=>t(n)-e):(r=t===n||t===e?t:i,o=t,u=t),{left:a,center:function(t,n,e=0,r=t.length){const i=a(t,n,e,r-1);return i>e&&u(t[i-1],n)>-u(t[i],n)?i-1:i},right:function(t,n,e=0,i=t.length){if(e<i){if(0!==r(n,n))return i;do{const r=e+i>>>1;o(t[r],n)<=0?e=r+1:i=r}while(e<i)}return e}}}function i(){return 0}const o=r(n).right;r((function(t){return null===t?NaN:+t})).center;var u=o;class a extends Map{constructor(t,n=c){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),null!=t)for(const[n,e]of t)this.set(n,e)}get(t){return super.get(s(this,t))}has(t){return super.has(s(this,t))}set(t,n){return super.set(function({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):(t.set(r,e),e)}(this,t),n)}delete(t){return super.delete(function({_intern:t,_key:n},e){const r=n(e);t.has(r)&&(e=t.get(r),t.delete(r));return e}(this,t))}}function s({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):e}function c(t){return null!==t&&"object"==typeof t?t.valueOf():t}function l(t){return t}function f(t,...n){return function(t,n,e,r){return function t(i,o){if(o>=r.length)return e(i);const u=new a,s=r[o++];let c=-1;for(const t of i){const n=s(t,++c,i),e=u.get(n);e?e.push(t):u.set(n,[t])}for(const[n,e]of u)u.set(n,t(e,o));return n(u)}(t,0)}(t,l,l,n)}var h=Math.sqrt(50),g=Math.sqrt(10),p=Math.sqrt(2);function d(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=h?10:o>=g?5:o>=p?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=h?10:o>=g?5:o>=p?2:1)}function m(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=h?i*=10:o>=g?i*=5:o>=p&&(i*=2),n<t?-i:i}function y(t,n){let e;if(void 0===n)for(const n of t)null!=n&&(e<n||void 0===e&&n>=n)&&(e=n);else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&(e<i||void 0===e&&i>=i)&&(e=i)}return e}function v(t,n){let e;if(void 0===n)for(const n of t)null!=n&&(e>n||void 0===e&&n>=n)&&(e=n);else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&(e>i||void 0===e&&i>=i)&&(e=i)}return e}function x(t,n){let e=0,r=0;if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&(++e,r+=n);else{let i=-1;for(let o of t)null!=(o=n(o,++i,t))&&(o=+o)>=o&&(++e,r+=o)}if(e)return r/e}function _(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),o=new Array(i);++r<i;)o[r]=t+r*e;return o}function w(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}const M=Symbol("implicit");function A(){var t=new a,n=[],e=[],r=M;function i(i){let o=t.get(i);if(void 0===o){if(r!==M)return r;t.set(i,o=n.push(i)-1)}return e[o%e.length]}return i.domain=function(e){if(!arguments.length)return n.slice();n=[],t=new a;for(const r of e)t.has(r)||t.set(r,n.push(r)-1);return i},i.range=function(t){return arguments.length?(e=Array.from(t),i):e.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return A(n,e).unknown(r)},w.apply(i,arguments),i}function b(){var t,n,e=A().unknown(void 0),r=e.domain,i=e.range,o=0,u=1,a=!1,s=0,c=0,l=.5;function f(){var e=r().length,f=u<o,h=f?u:o,g=f?o:u;t=(g-h)/Math.max(1,e-s+2*c),a&&(t=Math.floor(t)),h+=(g-h-t*(e-s))*l,n=t*(1-s),a&&(h=Math.round(h),n=Math.round(n));var p=_(e).map((function(n){return h+t*n}));return i(f?p.reverse():p)}return delete e.unknown,e.domain=function(t){return arguments.length?(r(t),f()):r()},e.range=function(t){return arguments.length?([o,u]=t,o=+o,u=+u,f()):[o,u]},e.rangeRound=function(t){return[o,u]=t,o=+o,u=+u,a=!0,f()},e.bandwidth=function(){return n},e.step=function(){return t},e.round=function(t){return arguments.length?(a=!!t,f()):a},e.padding=function(t){return arguments.length?(s=Math.min(1,c=+t),f()):s},e.paddingInner=function(t){return arguments.length?(s=Math.min(1,t),f()):s},e.paddingOuter=function(t){return arguments.length?(c=+t,f()):c},e.align=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),f()):l},e.copy=function(){return b(r(),[o,u]).round(a).paddingInner(s).paddingOuter(c).align(l)},w.apply(f(),arguments)}function k(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function T(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function C(){}var N=.7,S=1/N,U="\\s*([+-]?\\d+)\\s*",D="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",B="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",L=/^#([0-9a-f]{3,8})$/,E=new RegExp(`^rgb\\(${U},${U},${U}\\)$`),H=new RegExp(`^rgb\\(${B},${B},${B}\\)$`),F=new RegExp(`^rgba\\(${U},${U},${U},${D}\\)$`),Y=new RegExp(`^rgba\\(${B},${B},${B},${D}\\)$`),$=new RegExp(`^hsl\\(${D},${B},${B}\\)$`),R=new RegExp(`^hsla\\(${D},${B},${B},${D}\\)$`),j={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function O(){return this.rgb().formatHex()}function V(){return this.rgb().formatRgb()}function q(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=L.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?X(n):3===e?new Z(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?P(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?P(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=E.exec(t))?new Z(n[1],n[2],n[3],1):(n=H.exec(t))?new Z(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=F.exec(t))?P(n[1],n[2],n[3],n[4]):(n=Y.exec(t))?P(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=$.exec(t))?tt(n[1],n[2]/100,n[3]/100,1):(n=R.exec(t))?tt(n[1],n[2]/100,n[3]/100,n[4]):j.hasOwnProperty(t)?X(j[t]):"transparent"===t?new Z(NaN,NaN,NaN,0):null}function X(t){return new Z(t>>16&255,t>>8&255,255&t,1)}function P(t,n,e,r){return r<=0&&(t=n=e=NaN),new Z(t,n,e,r)}function z(t){return t instanceof C||(t=q(t)),t?new Z((t=t.rgb()).r,t.g,t.b,t.opacity):new Z}function I(t,n,e,r){return 1===arguments.length?z(t):new Z(t,n,e,null==r?1:r)}function Z(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function W(){return`#${K(this.r)}${K(this.g)}${K(this.b)}`}function G(){const t=Q(this.opacity);return`${1===t?"rgb(":"rgba("}${J(this.r)}, ${J(this.g)}, ${J(this.b)}${1===t?")":`, ${t})`}`}function Q(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function J(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function K(t){return((t=J(t))<16?"0":"")+t.toString(16)}function tt(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new et(t,n,e,r)}function nt(t){if(t instanceof et)return new et(t.h,t.s,t.l,t.opacity);if(t instanceof C||(t=q(t)),!t)return new et;if(t instanceof et)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),u=NaN,a=o-i,s=(o+i)/2;return a?(u=n===o?(e-r)/a+6*(e<r):e===o?(r-n)/a+2:(n-e)/a+4,a/=s<.5?o+i:2-o-i,u*=60):a=s>0&&s<1?0:u,new et(u,a,s,t.opacity)}function et(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function rt(t){return(t=(t||0)%360)<0?t+360:t}function it(t){return Math.max(0,Math.min(1,t||0))}function ot(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}k(C,q,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:O,formatHex:O,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return nt(this).formatHsl()},formatRgb:V,toString:V}),k(Z,I,T(C,{brighter(t){return t=null==t?S:Math.pow(S,t),new Z(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?N:Math.pow(N,t),new Z(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Z(J(this.r),J(this.g),J(this.b),Q(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:W,formatHex:W,formatHex8:function(){return`#${K(this.r)}${K(this.g)}${K(this.b)}${K(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:G,toString:G})),k(et,(function(t,n,e,r){return 1===arguments.length?nt(t):new et(t,n,e,null==r?1:r)}),T(C,{brighter(t){return t=null==t?S:Math.pow(S,t),new et(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?N:Math.pow(N,t),new et(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new Z(ot(t>=240?t-240:t+120,i,r),ot(t,i,r),ot(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new et(rt(this.h),it(this.s),it(this.l),Q(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Q(this.opacity);return`${1===t?"hsl(":"hsla("}${rt(this.h)}, ${100*it(this.s)}%, ${100*it(this.l)}%${1===t?")":`, ${t})`}`}}));var ut=t=>()=>t;function at(t){return 1==(t=+t)?st:function(n,e){return e-n?function(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):ut(isNaN(n)?e:n)}}function st(t,n){var e=n-t;return e?function(t,n){return function(e){return t+e*n}}(t,e):ut(isNaN(t)?n:t)}var ct=function t(n){var e=at(n);function r(t,n){var r=e((t=I(t)).r,(n=I(n)).r),i=e(t.g,n.g),o=e(t.b,n.b),u=st(t.opacity,n.opacity);return function(n){return t.r=r(n),t.g=i(n),t.b=o(n),t.opacity=u(n),t+""}}return r.gamma=t,r}(1);function lt(t,n){n||(n=[]);var e,r=t?Math.min(n.length,t.length):0,i=n.slice();return function(o){for(e=0;e<r;++e)i[e]=t[e]*(1-o)+n[e]*o;return i}}function ft(t,n){var e,r=n?n.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),u=new Array(r);for(e=0;e<i;++e)o[e]=vt(t[e],n[e]);for(;e<r;++e)u[e]=n[e];return function(t){for(e=0;e<i;++e)u[e]=o[e](t);return u}}function ht(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}function gt(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function pt(t,n){var e,r={},i={};for(e in null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={}),n)e in t?r[e]=vt(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}}var dt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mt=new RegExp(dt.source,"g");function yt(t,n){var e,r,i,o=dt.lastIndex=mt.lastIndex=0,u=-1,a=[],s=[];for(t+="",n+="";(e=dt.exec(t))&&(r=mt.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),a[u]?a[u]+=i:a[++u]=i),(e=e[0])===(r=r[0])?a[u]?a[u]+=r:a[++u]=r:(a[++u]=null,s.push({i:u,x:gt(e,r)})),o=mt.lastIndex;return o<n.length&&(i=n.slice(o),a[u]?a[u]+=i:a[++u]=i),a.length<2?s[0]?function(t){return function(n){return t(n)+""}}(s[0].x):function(t){return function(){return t}}(n):(n=s.length,function(t){for(var e,r=0;r<n;++r)a[(e=s[r]).i]=e.x(t);return a.join("")})}function vt(t,n){var e,r,i=typeof n;return null==n||"boolean"===i?ut(n):("number"===i?gt:"string"===i?(e=q(n))?(n=e,ct):yt:n instanceof q?ct:n instanceof Date?ht:(r=n,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(n)?ft:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?pt:gt:lt))(t,n)}function xt(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}function _t(t){return+t}var wt=[0,1];function Mt(t){return t}function At(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:(e=isNaN(n)?NaN:.5,function(){return e});var e}function bt(t,n,e){var r=t[0],i=t[1],o=n[0],u=n[1];return i<r?(r=At(i,r),o=e(u,o)):(r=At(r,i),o=e(o,u)),function(t){return o(r(t))}}function kt(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<r;)i[a]=At(t[a],t[a+1]),o[a]=e(n[a],n[a+1]);return function(n){var e=u(t,n,1,r)-1;return o[e](i[e](n))}}function Tt(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ct(){var t,n,e,r,i,o,u=wt,a=wt,s=vt,c=Mt;function l(){var t,n,e,s=Math.min(u.length,a.length);return c!==Mt&&(t=u[0],n=u[s-1],t>n&&(e=t,t=n,n=e),c=function(e){return Math.max(t,Math.min(n,e))}),r=s>2?kt:bt,i=o=null,f}function f(n){return null==n||isNaN(n=+n)?e:(i||(i=r(u.map(t),a,s)))(t(c(n)))}return f.invert=function(e){return c(n((o||(o=r(a,u.map(t),gt)))(e)))},f.domain=function(t){return arguments.length?(u=Array.from(t,_t),l()):u.slice()},f.range=function(t){return arguments.length?(a=Array.from(t),l()):a.slice()},f.rangeRound=function(t){return a=Array.from(t),s=xt,l()},f.clamp=function(t){return arguments.length?(c=!!t||Mt,l()):c!==Mt},f.interpolate=function(t){return arguments.length?(s=t,l()):s},f.unknown=function(t){return arguments.length?(e=t,f):e},function(e,r){return t=e,n=r,l()}}function Nt(){return Ct()(Mt,Mt)}function St(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function Ut(t){return(t=St(Math.abs(t)))?t[1]:NaN}var Dt,Bt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Lt(t){if(!(n=Bt.exec(t)))throw new Error("invalid format: "+t);var n;return new Et({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function Et(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Ht(t,n){var e=St(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Lt.prototype=Et.prototype,Et.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Ft={"%":(t,n)=>(100*t).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>Ht(100*t,n),r:Ht,s:function(t,n){var e=St(t,n);if(!e)return t+"";var r=e[0],i=e[1],o=i-(Dt=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,u=r.length;return o===u?r:o>u?r+new Array(o-u+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+St(t,Math.max(0,n+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Yt(t){return t}var $t,Rt,jt,Ot=Array.prototype.map,Vt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function qt(t){var n,e,r=void 0===t.grouping||void 0===t.thousands?Yt:(n=Ot.call(t.grouping,Number),e=t.thousands+"",function(t,r){for(var i=t.length,o=[],u=0,a=n[0],s=0;i>0&&a>0&&(s+a+1>r&&(a=Math.max(1,r-s)),o.push(t.substring(i-=a,i+a)),!((s+=a+1)>r));)a=n[u=(u+1)%n.length];return o.reverse().join(e)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",u=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?Yt:function(t){return function(n){return n.replace(/[0-9]/g,(function(n){return t[+n]}))}}(Ot.call(t.numerals,String)),s=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function f(t){var n=(t=Lt(t)).fill,e=t.align,f=t.sign,h=t.symbol,g=t.zero,p=t.width,d=t.comma,m=t.precision,y=t.trim,v=t.type;"n"===v?(d=!0,v="g"):Ft[v]||(void 0===m&&(m=12),y=!0,v="g"),(g||"0"===n&&"="===e)&&(g=!0,n="0",e="=");var x="$"===h?i:"#"===h&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",_="$"===h?o:/[%p]/.test(v)?s:"",w=Ft[v],M=/[defgprs%]/.test(v);function A(t){var i,o,s,h=x,A=_;if("c"===v)A=w(t)+A,t="";else{var b=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:w(Math.abs(t),m),y&&(t=function(t){t:for(var n,e=t.length,r=1,i=-1;r<e;++r)switch(t[r]){case".":i=n=r;break;case"0":0===i&&(i=r),n=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(n+1):t}(t)),b&&0==+t&&"+"!==f&&(b=!1),h=(b?"("===f?f:c:"-"===f||"("===f?"":f)+h,A=("s"===v?Vt[8+Dt/3]:"")+A+(b&&"("===f?")":""),M)for(i=-1,o=t.length;++i<o;)if(48>(s=t.charCodeAt(i))||s>57){A=(46===s?u+t.slice(i+1):t.slice(i))+A,t=t.slice(0,i);break}}d&&!g&&(t=r(t,1/0));var k=h.length+t.length+A.length,T=k<p?new Array(p-k+1).join(n):"";switch(d&&g&&(t=r(T+t,T.length?p-A.length:1/0),T=""),e){case"<":t=h+t+A+T;break;case"=":t=h+T+t+A;break;case"^":t=T.slice(0,k=T.length>>1)+h+t+A+T.slice(k);break;default:t=T+h+t+A}return a(t)}return m=void 0===m?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),A.toString=function(){return t+""},A}return{format:f,formatPrefix:function(t,n){var e=f(((t=Lt(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Ut(n)/3))),i=Math.pow(10,-r),o=Vt[8+r/3];return function(t){return e(i*t)+o}}}}function Xt(t,n,e,r){var i,o=m(t,n,e);switch((r=Lt(null==r?",f":r)).type){case"s":var u=Math.max(Math.abs(t),Math.abs(n));return null!=r.precision||isNaN(i=function(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ut(n)/3)))-Ut(Math.abs(t)))}(o,u))||(r.precision=i),jt(r,u);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,Ut(n)-Ut(t))+1}(o,Math.max(Math.abs(t),Math.abs(n))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-Ut(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return Rt(r)}function Pt(t){var n=t.domain;return t.ticks=function(t){var e=n();return function(t,n,e){var r,i,o,u,a=-1;if(e=+e,(t=+t)==(n=+n)&&e>0)return[t];if((r=n<t)&&(i=t,t=n,n=i),0===(u=d(t,n,e))||!isFinite(u))return[];if(u>0){let e=Math.round(t/u),r=Math.round(n/u);for(e*u<t&&++e,r*u>n&&--r,o=new Array(i=r-e+1);++a<i;)o[a]=(e+a)*u}else{u=-u;let e=Math.round(t*u),r=Math.round(n*u);for(e/u<t&&++e,r/u>n&&--r,o=new Array(i=r-e+1);++a<i;)o[a]=(e+a)/u}return r&&o.reverse(),o}(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){var r=n();return Xt(r[0],r[r.length-1],null==t?10:t,e)},t.nice=function(e){null==e&&(e=10);var r,i,o=n(),u=0,a=o.length-1,s=o[u],c=o[a],l=10;for(c<s&&(i=s,s=c,c=i,i=u,u=a,a=i);l-- >0;){if((i=d(s,c,e))===r)return o[u]=s,o[a]=c,n(o);if(i>0)s=Math.floor(s/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;s=Math.ceil(s*i)/i,c=Math.floor(c*i)/i}r=i}return t},t}function zt(){var t=Nt();return t.copy=function(){return Tt(t,zt())},w.apply(t,arguments),Pt(t)}$t=qt({thousands:",",grouping:[3],currency:["$",""]}),Rt=$t.format,jt=$t.formatPrefix;var It=new Date,Zt=new Date;function Wt(t,n,e,r){function i(n){return t(n=0===arguments.length?new Date:new Date(+n)),n}return i.floor=function(n){return t(n=new Date(+n)),n},i.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},i.round=function(t){var n=i(t),e=i.ceil(t);return t-n<e-t?n:e},i.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},i.range=function(e,r,o){var u,a=[];if(e=i.ceil(e),o=null==o?1:Math.floor(o),!(e<r&&o>0))return a;do{a.push(u=new Date(+e)),n(e,o),t(e)}while(u<e&&e<r);return a},i.filter=function(e){return Wt((function(n){if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;n(t,-1),!e(t););else for(;--r>=0;)for(;n(t,1),!e(t););}))},e&&(i.count=function(n,r){return It.setTime(+n),Zt.setTime(+r),t(It),t(Zt),Math.floor(e(It,Zt))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(n){return r(n)%t==0}:function(n){return i.count(0,n)%t==0}):i:null}),i}var Gt=Wt((function(){}),(function(t,n){t.setTime(+t+n)}),(function(t,n){return n-t}));Gt.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Wt((function(n){n.setTime(Math.floor(n/t)*t)}),(function(n,e){n.setTime(+n+e*t)}),(function(n,e){return(e-n)/t})):Gt:null};var Qt=Gt;const Jt=1e3,Kt=6e4,tn=36e5,nn=864e5,en=6048e5,rn=2592e6,on=31536e6;var un=Wt((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,n){t.setTime(+t+n*Jt)}),(function(t,n){return(n-t)/Jt}),(function(t){return t.getUTCSeconds()})),an=un,sn=Wt((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Jt)}),(function(t,n){t.setTime(+t+n*Kt)}),(function(t,n){return(n-t)/Kt}),(function(t){return t.getMinutes()})),cn=sn,ln=Wt((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Jt-t.getMinutes()*Kt)}),(function(t,n){t.setTime(+t+n*tn)}),(function(t,n){return(n-t)/tn}),(function(t){return t.getHours()})),fn=ln,hn=Wt((t=>t.setHours(0,0,0,0)),((t,n)=>t.setDate(t.getDate()+n)),((t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Kt)/nn),(t=>t.getDate()-1)),gn=hn;function pn(t){return Wt((function(n){n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)}),(function(t,n){t.setDate(t.getDate()+7*n)}),(function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Kt)/en}))}var dn=pn(0),mn=pn(1);pn(2),pn(3);var yn=pn(4);pn(5),pn(6);var vn=Wt((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,n){t.setMonth(t.getMonth()+n)}),(function(t,n){return n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),xn=vn,_n=Wt((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n)}),(function(t,n){return n.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));_n.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Wt((function(n){n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)}),(function(n,e){n.setFullYear(n.getFullYear()+e*t)})):null};var wn=_n,Mn=Wt((function(t){t.setUTCSeconds(0,0)}),(function(t,n){t.setTime(+t+n*Kt)}),(function(t,n){return(n-t)/Kt}),(function(t){return t.getUTCMinutes()})),An=Mn,bn=Wt((function(t){t.setUTCMinutes(0,0,0)}),(function(t,n){t.setTime(+t+n*tn)}),(function(t,n){return(n-t)/tn}),(function(t){return t.getUTCHours()})),kn=bn,Tn=Wt((function(t){t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+n)}),(function(t,n){return(n-t)/nn}),(function(t){return t.getUTCDate()-1})),Cn=Tn;function Nn(t){return Wt((function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+7*n)}),(function(t,n){return(n-t)/en}))}var Sn=Nn(0),Un=Nn(1);Nn(2),Nn(3);var Dn=Nn(4);Nn(5),Nn(6);var Bn=Wt((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCMonth(t.getUTCMonth()+n)}),(function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),Ln=Bn,En=Wt((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)}),(function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));En.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Wt((function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)}),(function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e*t)})):null};var Hn=En;function Fn(t,n,e,i,o,u){const a=[[an,1,Jt],[an,5,5e3],[an,15,15e3],[an,30,3e4],[u,1,Kt],[u,5,3e5],[u,15,9e5],[u,30,18e5],[o,1,tn],[o,3,108e5],[o,6,216e5],[o,12,432e5],[i,1,nn],[i,2,1728e5],[e,1,en],[n,1,rn],[n,3,7776e6],[t,1,on]];function s(n,e,i){const o=Math.abs(e-n)/i,u=r((([,,t])=>t)).right(a,o);if(u===a.length)return t.every(m(n/on,e/on,i));if(0===u)return Qt.every(Math.max(m(n,e,i),1));const[s,c]=a[o/a[u-1][2]<a[u][2]/o?u-1:u];return s.every(c)}return[function(t,n,e){const r=n<t;r&&([t,n]=[n,t]);const i=e&&"function"==typeof e.range?e:s(t,n,e),o=i?i.range(t,+n+1):[];return r?o.reverse():o},s]}Fn(Hn,Ln,Sn,Cn,kn,An);const[Yn,$n]=Fn(wn,xn,dn,gn,fn,cn);function Rn(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function jn(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function On(t,n,e){return{y:t,m:n,d:e,H:0,M:0,S:0,L:0}}var Vn,qn,Xn={"-":"",_:" ",0:"0"},Pn=/^\s*\d+/,zn=/^%/,In=/[\\^$*+?|[\]().{}]/g;function Zn(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<e?new Array(e-o+1).join(n)+i:i)}function Wn(t){return t.replace(In,"\\$&")}function Gn(t){return new RegExp("^(?:"+t.map(Wn).join("|")+")","i")}function Qn(t){return new Map(t.map(((t,n)=>[t.toLowerCase(),n])))}function Jn(t,n,e){var r=Pn.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function Kn(t,n,e){var r=Pn.exec(n.slice(e,e+1));return r?(t.u=+r[0],e+r[0].length):-1}function te(t,n,e){var r=Pn.exec(n.slice(e,e+2));return r?(t.U=+r[0],e+r[0].length):-1}function ne(t,n,e){var r=Pn.exec(n.slice(e,e+2));return r?(t.V=+r[0],e+r[0].length):-1}function ee(t,n,e){var r=Pn.exec(n.slice(e,e+2));return r?(t.W=+r[0],e+r[0].length):-1}function re(t,n,e){var r=Pn.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function ie(t,n,e){var r=Pn.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function oe(t,n,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function ue(t,n,e){var r=Pn.exec(n.slice(e,e+1));return r?(t.q=3*r[0]-3,e+r[0].length):-1}function ae(t,n,e){var r=Pn.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function se(t,n,e){var r=Pn.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function ce(t,n,e){var r=Pn.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function le(t,n,e){var r=Pn.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function fe(t,n,e){var r=Pn.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function he(t,n,e){var r=Pn.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function ge(t,n,e){var r=Pn.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function pe(t,n,e){var r=Pn.exec(n.slice(e,e+6));return r?(t.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function de(t,n,e){var r=zn.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function me(t,n,e){var r=Pn.exec(n.slice(e));return r?(t.Q=+r[0],e+r[0].length):-1}function ye(t,n,e){var r=Pn.exec(n.slice(e));return r?(t.s=+r[0],e+r[0].length):-1}function ve(t,n){return Zn(t.getDate(),n,2)}function xe(t,n){return Zn(t.getHours(),n,2)}function _e(t,n){return Zn(t.getHours()%12||12,n,2)}function we(t,n){return Zn(1+gn.count(wn(t),t),n,3)}function Me(t,n){return Zn(t.getMilliseconds(),n,3)}function Ae(t,n){return Me(t,n)+"000"}function be(t,n){return Zn(t.getMonth()+1,n,2)}function ke(t,n){return Zn(t.getMinutes(),n,2)}function Te(t,n){return Zn(t.getSeconds(),n,2)}function Ce(t){var n=t.getDay();return 0===n?7:n}function Ne(t,n){return Zn(dn.count(wn(t)-1,t),n,2)}function Se(t){var n=t.getDay();return n>=4||0===n?yn(t):yn.ceil(t)}function Ue(t,n){return t=Se(t),Zn(yn.count(wn(t),t)+(4===wn(t).getDay()),n,2)}function De(t){return t.getDay()}function Be(t,n){return Zn(mn.count(wn(t)-1,t),n,2)}function Le(t,n){return Zn(t.getFullYear()%100,n,2)}function Ee(t,n){return Zn((t=Se(t)).getFullYear()%100,n,2)}function He(t,n){return Zn(t.getFullYear()%1e4,n,4)}function Fe(t,n){var e=t.getDay();return Zn((t=e>=4||0===e?yn(t):yn.ceil(t)).getFullYear()%1e4,n,4)}function Ye(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+Zn(n/60|0,"0",2)+Zn(n%60,"0",2)}function $e(t,n){return Zn(t.getUTCDate(),n,2)}function Re(t,n){return Zn(t.getUTCHours(),n,2)}function je(t,n){return Zn(t.getUTCHours()%12||12,n,2)}function Oe(t,n){return Zn(1+Cn.count(Hn(t),t),n,3)}function Ve(t,n){return Zn(t.getUTCMilliseconds(),n,3)}function qe(t,n){return Ve(t,n)+"000"}function Xe(t,n){return Zn(t.getUTCMonth()+1,n,2)}function Pe(t,n){return Zn(t.getUTCMinutes(),n,2)}function ze(t,n){return Zn(t.getUTCSeconds(),n,2)}function Ie(t){var n=t.getUTCDay();return 0===n?7:n}function Ze(t,n){return Zn(Sn.count(Hn(t)-1,t),n,2)}function We(t){var n=t.getUTCDay();return n>=4||0===n?Dn(t):Dn.ceil(t)}function Ge(t,n){return t=We(t),Zn(Dn.count(Hn(t),t)+(4===Hn(t).getUTCDay()),n,2)}function Qe(t){return t.getUTCDay()}function Je(t,n){return Zn(Un.count(Hn(t)-1,t),n,2)}function Ke(t,n){return Zn(t.getUTCFullYear()%100,n,2)}function tr(t,n){return Zn((t=We(t)).getUTCFullYear()%100,n,2)}function nr(t,n){return Zn(t.getUTCFullYear()%1e4,n,4)}function er(t,n){var e=t.getUTCDay();return Zn((t=e>=4||0===e?Dn(t):Dn.ceil(t)).getUTCFullYear()%1e4,n,4)}function rr(){return"+0000"}function ir(){return"%"}function or(t){return+t}function ur(t){return Math.floor(+t/1e3)}function ar(t){return new Date(t)}function sr(t){return t instanceof Date?+t:+new Date(+t)}function cr(t,n,e,r,i,o,u,a,s,c){var l=Nt(),f=l.invert,h=l.domain,g=c(".%L"),p=c(":%S"),d=c("%I:%M"),m=c("%I %p"),y=c("%a %d"),v=c("%b %d"),x=c("%B"),_=c("%Y");function w(t){return(s(t)<t?g:a(t)<t?p:u(t)<t?d:o(t)<t?m:r(t)<t?i(t)<t?y:v:e(t)<t?x:_)(t)}return l.invert=function(t){return new Date(f(t))},l.domain=function(t){return arguments.length?h(Array.from(t,sr)):h().map(ar)},l.ticks=function(n){var e=h();return t(e[0],e[e.length-1],null==n?10:n)},l.tickFormat=function(t,n){return null==n?w:c(n)},l.nice=function(t){var e=h();return t&&"function"==typeof t.range||(t=n(e[0],e[e.length-1],null==t?10:t)),t?h(function(t,n){var e,r=0,i=(t=t.slice()).length-1,o=t[r],u=t[i];return u<o&&(e=r,r=i,i=e,e=o,o=u,u=e),t[r]=n.floor(o),t[i]=n.ceil(u),t}(e,t)):l},l.copy=function(){return Tt(l,cr(t,n,e,r,i,o,u,a,s,c))},l}function lr(){return w.apply(cr(Yn,$n,wn,xn,dn,gn,fn,cn,an,qn).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}!function(t){Vn=function(t){var n=t.dateTime,e=t.date,r=t.time,i=t.periods,o=t.days,u=t.shortDays,a=t.months,s=t.shortMonths,c=Gn(i),l=Qn(i),f=Gn(o),h=Qn(o),g=Gn(u),p=Qn(u),d=Gn(a),m=Qn(a),y=Gn(s),v=Qn(s),x={a:function(t){return u[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return s[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:ve,e:ve,f:Ae,g:Ee,G:Fe,H:xe,I:_e,j:we,L:Me,m:be,M:ke,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:or,s:ur,S:Te,u:Ce,U:Ne,V:Ue,w:De,W:Be,x:null,X:null,y:Le,Y:He,Z:Ye,"%":ir},_={a:function(t){return u[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return s[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:$e,e:$e,f:qe,g:tr,G:er,H:Re,I:je,j:Oe,L:Ve,m:Xe,M:Pe,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:or,s:ur,S:ze,u:Ie,U:Ze,V:Ge,w:Qe,W:Je,x:null,X:null,y:Ke,Y:nr,Z:rr,"%":ir},w={a:function(t,n,e){var r=g.exec(n.slice(e));return r?(t.w=p.get(r[0].toLowerCase()),e+r[0].length):-1},A:function(t,n,e){var r=f.exec(n.slice(e));return r?(t.w=h.get(r[0].toLowerCase()),e+r[0].length):-1},b:function(t,n,e){var r=y.exec(n.slice(e));return r?(t.m=v.get(r[0].toLowerCase()),e+r[0].length):-1},B:function(t,n,e){var r=d.exec(n.slice(e));return r?(t.m=m.get(r[0].toLowerCase()),e+r[0].length):-1},c:function(t,e,r){return b(t,n,e,r)},d:se,e:se,f:pe,g:ie,G:re,H:le,I:le,j:ce,L:ge,m:ae,M:fe,p:function(t,n,e){var r=c.exec(n.slice(e));return r?(t.p=l.get(r[0].toLowerCase()),e+r[0].length):-1},q:ue,Q:me,s:ye,S:he,u:Kn,U:te,V:ne,w:Jn,W:ee,x:function(t,n,r){return b(t,e,n,r)},X:function(t,n,e){return b(t,r,n,e)},y:ie,Y:re,Z:oe,"%":de};function M(t,n){return function(e){var r,i,o,u=[],a=-1,s=0,c=t.length;for(e instanceof Date||(e=new Date(+e));++a<c;)37===t.charCodeAt(a)&&(u.push(t.slice(s,a)),null!=(i=Xn[r=t.charAt(++a)])?r=t.charAt(++a):i="e"===r?" ":"0",(o=n[r])&&(r=o(e,i)),u.push(r),s=a+1);return u.push(t.slice(s,a)),u.join("")}}function A(t,n){return function(e){var r,i,o=On(1900,void 0,1);if(b(o,t,e+="",0)!=e.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(n&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=jn(On(o.y,0,1))).getUTCDay(),r=i>4||0===i?Un.ceil(r):Un(r),r=Cn.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=Rn(On(o.y,0,1))).getDay(),r=i>4||0===i?mn.ceil(r):mn(r),r=gn.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?jn(On(o.y,0,1)).getUTCDay():Rn(On(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,jn(o)):Rn(o)}}function b(t,n,e,r){for(var i,o,u=0,a=n.length,s=e.length;u<a;){if(r>=s)return-1;if(37===(i=n.charCodeAt(u++))){if(i=n.charAt(u++),!(o=w[i in Xn?n.charAt(u++):i])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}return x.x=M(e,x),x.X=M(r,x),x.c=M(n,x),_.x=M(e,_),_.X=M(r,_),_.c=M(n,_),{format:function(t){var n=M(t+="",x);return n.toString=function(){return t},n},parse:function(t){var n=A(t+="",!1);return n.toString=function(){return t},n},utcFormat:function(t){var n=M(t+="",_);return n.toString=function(){return t},n},utcParse:function(t){var n=A(t+="",!0);return n.toString=function(){return t},n}}}(t),qn=Vn.format}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const fr="ellipse",hr="line",gr="polygon",pr="polyline",dr="rect",mr="path",yr="left",vr="right",xr="top",_r="bottom",wr="size",Mr="colorCat",Ar="legend",br="mark";function kr(t){return t}class Tr{constructor(...t){if(t[0]instanceof Tr){const[n]=t;this.translate={...n.translate},this.scale={...n.scale},this.rotate=n.rotate}else{const[n,e,r,i,o]=t;this.translate={x:n||0,y:e||0},this.scale={x:r||1,y:i||1},this.rotate=o||0}}getTransform(t=new Tr){return"translate("+(this.translate.x+t.translate.x)+","+(this.translate.y+t.translate.y)+") scale("+this.scale.x*t.scale.x+","+this.scale.y*t.scale.y+") rotate("+(this.rotate+t.rotate)+")"}}function Cr(t,n,e=new Tr){const r=t.transform.baseVal;for(let t=0;t<r.numberOfItems;++t){const n=r.getItem(t),i=n.matrix;switch(n.type){case n.SVG_TRANSFORM_TRANSLATE:e.translate.x+=i.e,e.translate.y+=i.f;break;case n.SVG_TRANSFORM_SCALE:e.scale.x+=i.a,e.scale.y+=i.d;break;case n.SVG_TRANSFORM_ROTATE:e.rotate+=n.angle}}return e.translate.x+=t.hasAttribute("cx")&&n?+t.getAttribute("cx"):0,e.translate.y+=t.hasAttribute("cy")&&n?+t.getAttribute("cy"):0,e}function Nr(t){if(!t)return null;const n=t.innerHTML.replace(/–/g,"-").replace(/−/g,"-");return t.__data__||0==+t.__data__?t.__data__.datum?t.__data__.datum.value:t.__data__:isNaN(parseInt(n))?n:+n.replace(/,/g,"")}function Sr(t){const n=t.cloneNode(!0);for(const[e,r]of Object.entries(t))n[e]=r;return n}function Ur(t,n){const e=t.getBoundingClientRect(),r=n===vr||n===yr?e.width/2:e.height/2;return e[n]+(n===yr||n===xr?r:-r)}function Dr(t){return t&&t.includes("pt")?4*+t.split("pt")[0]/3:t}function Br(t,n,e,r){const i=t.createSVGPoint();return i.x=e,i.y=r,i.matrixTransform(n.getScreenCTM())}function Lr(t,n,e=!1){const r=(n,r)=>(i,o)=>null==t?(i._getBBox()[n]-o._getBBox()[n])*(r?-1:1):e?Nr(i[t])-Nr(o[t]):((i[t]?i[t]:i.marks[0])._getBBox()[n]-(o[t]?o[t]:o.marks[0])._getBBox()[n])*(r?-1:1);n.sort(r("centerX",!1)),n.sort(r("centerY",!0))}function Er(t){return n=>+t(n)}function Hr(t,n){return n=Math.max(0,t.bandwidth()-2*n)/2,t.round()&&(n=Math.round(n)),e=>+t(e)+n}function Fr(t,n,e){var r=[],i=null,o=null,u=6,a=6,s=3,c="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,l=1===t||3===t?e.xAxis:e.yAxis,f=l.ticks;function h(){var u=null==i?n.ticks?n.ticks.apply(n,r):n.domain():i,a=null==o?n.tickFormat?n.tickFormat.apply(n,r):kr:o,s=(n.bandwidth?Hr:Er)(n.copy(),c);function h(n,r){const i=n.label,o=n.marks;i.innerHTML=l.ordinal.length||i.innerHTML===a(r)?i.innerHTML:a(r);const u=e.svg.getBoundingClientRect();if(i.clientRect){const n=i.clientRect.left+i.clientRect.width/2-u.left,e=i.clientRect.top+i.clientRect.height/2-u.top,o=3===t?s(r)-n:0,a=4===t?s(r)-e:0;i.setAttribute("transform",i.localTransform.getTransform(new Tr(o,a)))}for(const n of o){if(!n.clientRect)continue;const e=n.clientRect.left+n.clientRect.width/2-u.left,i=n.clientRect.top+n.clientRect.height/2-u.top,o=3===t?s(r)-e:0,a=4===t?s(r)-i:0;n.setAttribute("transform",n.localTransform.getTransform(new Tr(o,a)))}}u=4===t||2===t?u.reverse():u;for(var g=0;g<u.length&&g<f.length;++g)h(f[g],l.ordinal.length?l.ordinal[g]:u[g]);for(;g<u.length;++g){let t={label:Sr(f[0].label),marks:f[0].marks.map((t=>Sr(t)))};h(t,u[g]),f[0].label.parentElement.appendChild(t.label),f[0].marks.forEach(((n,e)=>n.parentElement.insertBefore(t.marks[e],n))),f.push(t)}const p=f.length;for(;g<p;++g){const t=f.length-1;f[t].label&&f[t].label.remove(),f[t].marks.forEach((t=>t.remove())),f.pop()}}return h.applyTransform=function(t){return h},h.scale=function(t){return arguments.length?(n=t,h):n},h.ticks=function(){return r=Array.from(arguments),h},h.tickArguments=function(t){return arguments.length?(r=null==t?[]:Array.from(t),h):r.slice()},h.tickValues=function(t){return arguments.length?(i=null==t?null:Array.from(t),h):i&&i.slice()},h.tickFormat=function(t){return arguments.length?(o=t,h):o},h.tickSize=function(t){return arguments.length?(u=a=+t,h):u},h.tickSizeInner=function(t){return arguments.length?(u=+t,h):u},h.tickSizeOuter=function(t){return arguments.length?(a=+t,h):a},h.tickPadding=function(t){return arguments.length?(s=+t,h):s},h.offset=function(t){return arguments.length?(c=+t,h):c},h}function Yr(t){var n;if(t.type===Mr){const e=t.marks.map((t=>t.label.innerHTML)),r=t.marks.map((n=>window.getComputedStyle(n.mark)[t.matchingAttr]));n=A().domain(e).range(r)}else{const e=t.marks.map((t=>+t.label.innerHTML)),r=t.marks.map((t=>t.mark._getBBox().width));n=zt().domain(e).range(r)}t.scale=n}function $r(t){const n=function(){const n={[vr]:{},[yr]:{},[xr]:{},[_r]:{}};for(const e of t.textMarks){const t=e._getBBox();for(const[r,i]of Object.entries(n)){const n=t[r];let o=!1;for(const t of Object.keys(i))Math.abs(n-t)<2&&(o=!0,i[t].push(e));o||(i[n]=[e])}}const e=new WeakMap,r=new WeakMap;for(const[t,i]of Object.entries(n))for(const[n,o]of Object.entries(i))for(const n of o)(!e.get(n)||o.length>e.get(n).length)&&(e.set(n,o),r.set(o,t));let i=[];for(let n=0;n<t.textMarks.length;++n){const r=t.textMarks[n],o=e.get(r);i.includes(o)||i.push(o)}return i.map((t=>({alignment:r.get(t),marks:t})))}(),[e,r,i]=function(n){const e=[],r=[],i=function(){const n={};for(const e of t.svgMarks){const t=e._getBBox(),r="x,"+[t.centerX,t.width,t.height].join(","),i="y,"+[t.centerY,t.width,t.height].join(",");let o=!1,u=!1;for(const r of Object.keys(n)){const[i,a,s,c]=r.split(",");"x"===i&&+s===t.width&&+c===t.height&&Math.abs(t.centerX-a)<2&&(o=!0,n[r].push(e)),"y"===i&&+s===t.width&&+c===t.height&&Math.abs(t.centerY-a)<2&&(u=!0,n[r].push(e))}o||(n[r]=[e]),u||(n[i]=[e])}return n}(),u=function(){const n=new WeakMap;for(const e of t.textMarks){const r=e._getBBox(),i={closestMark:null,distance:Number.MAX_VALUE};for(const n of t.svgMarks){const t=n._getBBox(),e=t.width<=1&&t.height>10||t.height<=1&&t.width>10?v([Math.abs(r.centerX-t.right)+Math.abs(r.centerY-t.top),Math.abs(r.centerX-t.right)+Math.abs(r.centerY-t.bottom),Math.abs(r.centerX-t.left)+Math.abs(r.centerY-t.top),Math.abs(r.centerX-t.left)+Math.abs(r.centerY-t.bottom)]):Math.abs(r.centerX-t.centerX)+Math.abs(r.centerY-t.centerY);e<i.distance&&(i.closestMark=n,i.distance=e)}n.set(e,i)}return n}();for(const{alignment:t,marks:o}of n){if(1===o.length){r.push([t,o]);continue}let n=!1;for(const[r,a]of Object.entries(i)){if(a.length<o.length)continue;let r=!0;const i={},s=new WeakMap;for(const t of o){const n=u.get(t).closestMark._getBBox();let e=!1;for(const r of a){const o=r._getBBox(),u=Math.abs(o.centerX-n.centerX),a=Math.abs(o.centerY-n.centerY);if((u<2&&o.width<2||a<2&&o.height<2)&&!s.get(r)){s.set(r,t),e=!0;const n=window.getComputedStyle(r),u=[n.stroke,n.color,n.fill,o.width,o.height].join(",");i[u]=u in i?i[u]+1:1;break}}if(!e){r=!1;break}}const c=Object.keys(i)[0];r&&i[c]===o.length&&(e.push([t,a.map((t=>({tick:t,text:s.get(t)})))]),n=!0)}n||r.push([t,o])}return[e,...o(r,u)]}(n);function o(t,n){const e=[],r=[];for(const[i,o]of t)if(1===o.length)r.push(...o);else{let t=!0;for(const e of o){const r=e._getBBox(),o=n.get(e).closestMark._getBBox();i===yr||i===vr?r.left-o.right<0&&o.left-r.right<0&&(t=!1):r.top-o.bottom<0&&o.top-r.bottom<0&&(t=!1)}t?e.push({title:"",marks:o.map((t=>({label:t,mark:n.get(t).closestMark})))}):r.push(...o)}return[e,r]}!function(n){const e=new Map,r=[];function i(n,e,r){e===xr||e===_r?t.xAxis.ticks.push({label:n,marks:r}):t.yAxis.ticks.push({label:n,marks:r}),r.forEach((t=>t.__role__=n?"tick":"orphan-tick"))}for(const[t,i]of n)for(const{text:n,tick:o}of i)n?e.has(n)?e.get(n).ticks.push(o):e.set(n,{alignment:t,ticks:[o]}):r.push({alignment:t,tick:o});for(const[t,{alignment:n,ticks:r}]of e.entries())i(t,n,r);if(r.length>=e.size-1)for(const{alignment:t,tick:n}of r)i(null,t,[n]);[t.xAxis,t.yAxis].forEach((t=>Lr("label",t.ticks,"string"!=typeof Nr(t.ticks[0].label))))}(e),function(t,n){for(const e of n){const n=window.getComputedStyle(e.marks[0].mark),r=window.getComputedStyle(e.marks[1].mark);let i=null;n.fill!==r.fill?i="fill":n.color!==r.color?i="color":n.stroke!==r.stroke&&(i="stroke"),i?(e.type=Mr,e.matchingAttr=i):e.type=wr;for(const{label:t,mark:n}of e.marks)t.__role__=n.__role__=Ar,n.legend=e,n.style["pointer-events"]="fill";Yr(e),Lr("label",e.marks,e.type===wr),t.legends.push(e)}}(t,r),function(n){function e(t){const n=t._getBBox();return[n.centerX,n.centerY]}function r(t,r){const i={title:null,distance:Number.MAX_VALUE};for(const o of n){const[n,u]=e(o),a=Math.abs(n-t)+Math.abs(u-r);a<i.distance&&(i.title=o,i.distance=a)}return i.title}[t.xAxis,t.yAxis].forEach((function(t){const n=t.ticks.filter((t=>t.label)).map((t=>e(t.label)));t.title=r(x(n.map((t=>t[0]))),x(n.map((t=>t[1])))),t.title&&(t.title.__role__="axis-title")})),t.legends.map((function(t){const n=t.marks.filter((t=>t.label)).map((t=>e(t.label)));t.title=r(x(n.map((t=>t[0]))),x(n.map((t=>t[1])))),t.title&&(t.title.__role__="legend-title")})),t.title=n.filter((t=>!t.__role__))[0]}(i.filter((t=>!t.__role__)))}function Rr(t){for(const n of t.svgMarks){const e=n._getBBox();if(e.width>=t.xAxis.range[1]-t.xAxis.range[0]&&e.height>=t.yAxis.range[0]-t.yAxis.range[1]){n.__role__="viewport";continue}const r=t.xAxis.ticks[0].marks[0]._getBBox().left,i=t.xAxis.ticks[t.xAxis.ticks.length-1].marks[0]._getBBox().right,o=t.yAxis.ticks[t.yAxis.ticks.length-1].marks[0]._getBBox().top,u=t.yAxis.ticks[0].marks[0]._getBBox().bottom;(e.left<=r&&e.right>=i&&e.top>=u||e.top<=o&&e.bottom>=u&&e.right<=r)&&(n.__role__="axis-domain")}t.svgMarks=t.svgMarks.filter((t=>!t.__role__)),t.svgMarks.forEach((t=>t.__role__=br)),Lr(null,t.svgMarks,!1)}function jr(t){for(const[n,e]of Object.entries(t.ticks)){if(!e.label)continue;const n=Nr(e.label);"string"==typeof n?t.ordinal.push(n):(t.domain[0]=null===t.domain[0]?n:v([t.domain[0],n]),t.domain[1]=null===t.domain[1]?n:y([t.domain[1],n]))}}function Or(t){$r(t),jr(t.xAxis),jr(t.yAxis);const n=+Dr(t.svg.getAttribute("width")),e=+Dr(t.svg.getAttribute("height")),r=t.svg._getBBox();if(!t.xAxis.ticks.length&&!t.yAxis.ticks.length)return t.xAxis.range=[0,n],t.yAxis.range=[e,0],void Rr(t);const i=t.yAxis.ticks[0].marks[0]._getBBox(),o=[i.left,i.left+i.width],u=t.xAxis.ticks[0].marks[0]._getBBox(),a=[u.top+u.height,u.top],s=y([o[0]-r.left,0]),c=y([v([o[1]-r.left,n]),t.xAxis.ticks[t.xAxis.ticks.length-1].marks[0]._getBBox().right]),l=y([a[1]-r.top,0]),f=v([a[0]-r.top,e]);var h,g;t.xAxis.range=[s,c],t.yAxis.range=[f,l],t.xAxis.scale=(t.xAxis.domain[0]instanceof Date?lr():t.xAxis.ordinal.length?b():zt()).domain(t.xAxis.ordinal.length?t.xAxis.ordinal:t.xAxis.domain).range(t.xAxis.range),t.xAxis.axis=(h=t.xAxis.scale,g=t,Fr(3,h,g)).ticks(t.xAxis.ticks.length),t.yAxis.scale=(t.yAxis.domain[0]instanceof Date?lr():t.yAxis.ordinal.length?b():zt()).domain(t.yAxis.ordinal.length?t.yAxis.ordinal:t.yAxis.domain).range(t.yAxis.range),t.yAxis.axis=function(t,n){return Fr(4,t,n)}(t.yAxis.scale,t).ticks(t.yAxis.ticks.length),function(t){const n=t.svg.getBoundingClientRect();if(t.xAxis.scale&&!t.xAxis.ordinal.length){const e=[Ur(t.xAxis.ticks.filter((n=>Nr(n.label)===t.xAxis.domain[0]))[0].marks[0],yr),Ur(t.xAxis.ticks.filter((n=>Nr(n.label)===t.xAxis.domain[1]))[0].marks[0],yr)].map((t=>t-n.left)),r=t.xAxis.range.map(t.xAxis.scale.copy().range(e).invert,t.xAxis.scale);t.xAxis.scale.domain(r)}if(t.yAxis.scale&&!t.yAxis.ordinal.length){const e=[Ur(t.yAxis.ticks.filter((n=>Nr(n.label)===t.yAxis.domain[0]))[0].marks[0],xr),Ur(t.yAxis.ticks.filter((n=>Nr(n.label)===t.yAxis.domain[1]))[0].marks[0],xr)].map((t=>t-n.top)),r=t.yAxis.range.map(t.yAxis.scale.copy().range(e).invert,t.yAxis.scale);t.yAxis.scale.domain(r)}}(t),Rr(t)}class Vr{constructor(){this.hasDomain=!1,this.svg=null,this.svgMarks=[],this.textMarks=[],this.xAxis={domain:[null,null],ordinal:[],range:[null,null],ticks:[],scale:null,axis:null,title:null},this.yAxis={domain:[null,null],ordinal:[],range:[null,null],ticks:[],scale:null,axis:null,title:null},this.legends=[],this.title=null,this.interactions={selection:{control:null,active:!1},zoom:{control:null,axisControl:null},pan:{control:null,axisControl:null,flag:!1},brush:{control:null,axisControl:null,flag:!0,active:!1,on_elem:!1},filter:{control:null,active:!1},sort:{control:null},annotate:{flag:!1},arrange:{flag:!1}}}}function qr(t,n,e,r){this.message=t,this.expected=n,this.found=e,this.location=r,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,qr)}!function(t,n){function e(){this.constructor=t}e.prototype=n.prototype,t.prototype=new e}(qr,Error),qr.buildMessage=function(t,n){var e={literal:function(t){return'"'+i(t.text)+'"'},class:function(t){var n,e="";for(n=0;n<t.parts.length;n++)e+=t.parts[n]instanceof Array?o(t.parts[n][0])+"-"+o(t.parts[n][1]):o(t.parts[n]);return"["+(t.inverted?"^":"")+e+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function i(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+r(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+r(t)}))}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+r(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+r(t)}))}return"Expected "+function(t){var n,r,i,o=new Array(t.length);for(n=0;n<t.length;n++)o[n]=(i=t[n],e[i.type](i));if(o.sort(),o.length>0){for(n=1,r=1;n<o.length;n++)o[n-1]!==o[n]&&(o[r]=o[n],r++);o.length=r}switch(o.length){case 1:return o[0];case 2:return o[0]+" or "+o[1];default:return o.slice(0,-1).join(", ")+", or "+o[o.length-1]}}(t)+" but "+function(t){return t?'"'+i(t)+'"':"end of input"}(n)+" found."};var Xr=function(t,n){n=void 0!==n?n:{};var e,r={},i={svg_path:Q},o=Q,u=function(t,n){return function(t,n){if(!n)return[t];for(var e=[t],r=0,i=n.length;r<i;r++)e[r+1]=n[r][1];return e}(t,n)},a=/^[Mm]/,s=I(["M","m"],!1,!1),c=/^[Zz]/,l=I(["Z","z"],!1,!1),f=/^[Ll]/,h=I(["L","l"],!1,!1),g=function(t,n){return Mt(t,n)},p=/^[Hh]/,d=I(["H","h"],!1,!1),m=/^[Vv]/,y=I(["V","v"],!1,!1),v=/^[Cc]/,x=I(["C","c"],!1,!1),_=/^[Ss]/,w=I(["S","s"],!1,!1),M=/^[Qq]/,A=I(["Q","q"],!1,!1),b=/^[Tt]/,k=I(["T","t"],!1,!1),T=/^[Aa]/,C=I(["A","a"],!1,!1),N=/^[01]/,S=I(["0","1"],!1,!1),U=z(",",!1),D=function(t){return t.join("")},B=".",L=z(".",!1),E=/^[eE]/,H=I(["e","E"],!1,!1),F=/^[+\-]/,Y=I(["+","-"],!1,!1),$=/^[0-9]/,R=I([["0","9"]],!1,!1),j=/^[ \t\n\r]/,O=I([" ","\t","\n","\r"],!1,!1),V=0,q=[{line:1,column:1}],X=0,P=[];if("startRule"in n){if(!(n.startRule in i))throw new Error("Can't start parsing from rule \""+n.startRule+'".');o=i[n.startRule]}function z(t,n){return{type:"literal",text:t,ignoreCase:n}}function I(t,n,e){return{type:"class",parts:t,inverted:n,ignoreCase:e}}function Z(n){var e,r=q[n];if(r)return r;for(e=n-1;!q[e];)e--;for(r={line:(r=q[e]).line,column:r.column};e<n;)10===t.charCodeAt(e)?(r.line++,r.column=1):r.column++,e++;return q[n]=r,r}function W(t,n){var e=Z(t),r=Z(n);return{start:{offset:t,line:e.line,column:e.column},end:{offset:n,line:r.line,column:r.column}}}function G(t){V<X||(V>X&&(X=V,P=[]),P.push(t))}function Q(){var t,n,e,i,o;for(t=V,n=[],e=mt();e!==r;)n.push(e),e=mt();if(n!==r)if(e=function(){var t,n,e,i,o,a;if(t=V,(n=J())!==r){for(e=[],i=V,o=[],a=mt();a!==r;)o.push(a),a=mt();for(o!==r&&(a=J())!==r?i=o=[o,a]:(V=i,i=r);i!==r;){for(e.push(i),i=V,o=[],a=mt();a!==r;)o.push(a),a=mt();o!==r&&(a=J())!==r?i=o=[o,a]:(V=i,i=r)}e!==r?t=n=u(n,e):(V=t,t=r)}else V=t,t=r;return t}(),e===r&&(e=null),e!==r){for(i=[],o=mt();o!==r;)i.push(o),o=mt();i!==r?(n=function(t){if(!t)return[];for(var n=[],e=0;e<t.length;e++)n=n.concat.apply(n,t[e]);var r=n[0];return r&&"m"==r.code&&(delete r.relative,r.code="M"),n}(e),t=n):(V=t,t=r)}else V=t,t=r;else V=t,t=r;return t}function J(){var n,e,i,o,c,l;if(n=V,e=function(){var n,e,i,o,u,c,l;n=V,a.test(t.charAt(V))?(e=t.charAt(V),V++):(e=r,G(s));if(e!==r){for(i=[],o=mt();o!==r;)i.push(o),o=mt();i!==r&&(o=ut())!==r?(u=V,(c=lt())===r&&(c=null),c!==r&&(l=tt())!==r?u=c=[c,l]:(V=u,u=r),u===r&&(u=null),u!==r?(h=u,g=Mt(f=e,[o]),h&&(g=g.concat(Mt("M"==f?"L":"l",h[1]))),n=e=g):(V=n,n=r)):(V=n,n=r)}else V=n,n=r;var f,h,g;return n}(),e!==r){for(i=[],o=V,c=[],l=mt();l!==r;)c.push(l),l=mt();for(c!==r&&(l=K())!==r?o=c=[c,l]:(V=o,o=r);o!==r;){for(i.push(o),o=V,c=[],l=mt();l!==r;)c.push(l),l=mt();c!==r&&(l=K())!==r?o=c=[c,l]:(V=o,o=r)}i!==r?n=e=u(e,i):(V=n,n=r)}else V=n,n=r;return n}function K(){var n;return(n=function(){var n;V,c.test(t.charAt(V))?(n=t.charAt(V),V++):(n=r,G(l));n!==r&&(n=Mt("Z"));return n}())===r&&(n=function(){var n,e,i,o;n=V,f.test(t.charAt(V))?(e=t.charAt(V),V++):(e=r,G(h));if(e!==r){for(i=[],o=mt();o!==r;)i.push(o),o=mt();i!==r&&(o=tt())!==r?n=e=g(e,o):(V=n,n=r)}else V=n,n=r;return n}())===r&&(n=function(){var n,e,i,o;n=V,p.test(t.charAt(V))?(e=t.charAt(V),V++):(e=r,G(d));if(e!==r){for(i=[],o=mt();o!==r;)i.push(o),o=mt();i!==r&&(o=nt())!==r?n=e=Mt(e,o.map((function(t){return{x:t}}))):(V=n,n=r)}else V=n,n=r;return n}())===r&&(n=function(){var n,e,i,o;n=V,m.test(t.charAt(V))?(e=t.charAt(V),V++):(e=r,G(y));if(e!==r){for(i=[],o=mt();o!==r;)i.push(o),o=mt();i!==r&&(o=nt())!==r?n=e=Mt(e,o.map((function(t){return{y:t}}))):(V=n,n=r)}else V=n,n=r;return n}())===r&&(n=function(){var n,e,i,o;n=V,v.test(t.charAt(V))?(e=t.charAt(V),V++):(e=r,G(x));if(e!==r){for(i=[],o=mt();o!==r;)i.push(o),o=mt();i!==r?(o=function(){var t,n,e,i,o,a;if(t=V,(n=et())!==r){for(e=[],i=V,(o=lt())===r&&(o=null),o!==r&&(a=et())!==r?i=o=[o,a]:(V=i,i=r);i!==r;)e.push(i),i=V,(o=lt())===r&&(o=null),o!==r&&(a=et())!==r?i=o=[o,a]:(V=i,i=r);e!==r?t=n=u(n,e):(V=t,t=r)}else V=t,t=r;return t}(),o!==r?n=e=g(e,o):(V=n,n=r)):(V=n,n=r)}else V=n,n=r;return n}())===r&&(n=function(){var n,e,i,o;n=V,_.test(t.charAt(V))?(e=t.charAt(V),V++):(e=r,G(w));if(e!==r){for(i=[],o=mt();o!==r;)i.push(o),o=mt();i!==r?(o=function(){var t,n,e,i,o,a;if(t=V,(n=rt())!==r){for(e=[],i=V,(o=lt())===r&&(o=null),o!==r&&(a=rt())!==r?i=o=[o,a]:(V=i,i=r);i!==r;)e.push(i),i=V,(o=lt())===r&&(o=null),o!==r&&(a=rt())!==r?i=o=[o,a]:(V=i,i=r);e!==r?t=n=u(n,e):(V=t,t=r)}else V=t,t=r;return t}(),o!==r?n=e=g(e,o):(V=n,n=r)):(V=n,n=r)}else V=n,n=r;return n}())===r&&(n=function(){var n,e,i,o;n=V,M.test(t.charAt(V))?(e=t.charAt(V),V++):(e=r,G(A));if(e!==r){for(i=[],o=mt();o!==r;)i.push(o),o=mt();i!==r?(o=function(){var t,n,e,i,o,a;if(t=V,(n=it())!==r){for(e=[],i=V,(o=lt())===r&&(o=null),o!==r&&(a=it())!==r?i=o=[o,a]:(V=i,i=r);i!==r;)e.push(i),i=V,(o=lt())===r&&(o=null),o!==r&&(a=it())!==r?i=o=[o,a]:(V=i,i=r);e!==r?t=n=u(n,e):(V=t,t=r)}else V=t,t=r;return t}(),o!==r?n=e=g(e,o):(V=n,n=r)):(V=n,n=r)}else V=n,n=r;return n}())===r&&(n=function(){var n,e,i,o;n=V,b.test(t.charAt(V))?(e=t.charAt(V),V++):(e=r,G(k));if(e!==r){for(i=[],o=mt();o!==r;)i.push(o),o=mt();i!==r?(o=function(){var t,n,e,i,o,a;if(t=V,(n=ut())!==r){for(e=[],i=V,(o=lt())===r&&(o=null),o!==r&&(a=ut())!==r?i=o=[o,a]:(V=i,i=r);i!==r;)e.push(i),i=V,(o=lt())===r&&(o=null),o!==r&&(a=ut())!==r?i=o=[o,a]:(V=i,i=r);e!==r?t=n=u(n,e):(V=t,t=r)}else V=t,t=r;return t}(),o!==r?n=e=g(e,o):(V=n,n=r)):(V=n,n=r)}else V=n,n=r;return n}())===r&&(n=function(){var n,e,i,o;n=V,T.test(t.charAt(V))?(e=t.charAt(V),V++):(e=r,G(C));if(e!==r){for(i=[],o=mt();o!==r;)i.push(o),o=mt();i!==r?(o=function(){var t,n,e,i,o,a;if(t=V,(n=ot())!==r){for(e=[],i=V,(o=lt())===r&&(o=null),o!==r&&(a=ot())!==r?i=o=[o,a]:(V=i,i=r);i!==r;)e.push(i),i=V,(o=lt())===r&&(o=null),o!==r&&(a=ot())!==r?i=o=[o,a]:(V=i,i=r);e!==r?t=n=u(n,e):(V=t,t=r)}else V=t,t=r;return t}(),o!==r?n=e=g(e,o):(V=n,n=r)):(V=n,n=r)}else V=n,n=r;return n}()),n}function tt(){var t,n,e,i,o,a;if(t=V,(n=ut())!==r){for(e=[],i=V,(o=lt())===r&&(o=null),o!==r&&(a=ut())!==r?i=o=[o,a]:(V=i,i=r);i!==r;)e.push(i),i=V,(o=lt())===r&&(o=null),o!==r&&(a=ut())!==r?i=o=[o,a]:(V=i,i=r);e!==r?t=n=u(n,e):(V=t,t=r)}else V=t,t=r;return t}function nt(){var t,n,e,i,o,a;if(t=V,(n=st())!==r){for(e=[],i=V,(o=lt())===r&&(o=null),o!==r&&(a=st())!==r?i=o=[o,a]:(V=i,i=r);i!==r;)e.push(i),i=V,(o=lt())===r&&(o=null),o!==r&&(a=st())!==r?i=o=[o,a]:(V=i,i=r);e!==r?t=n=u(n,e):(V=t,t=r)}else V=t,t=r;return t}function et(){var t,n,e,i,o,u,a,s,c;return t=V,(n=ut())!==r?((e=lt())===r&&(e=null),e!==r&&(i=ut())!==r?((o=lt())===r&&(o=null),o!==r&&(u=ut())!==r?(s=i,c=u,t=n={x1:(a=n).x,y1:a.y,x2:s.x,y2:s.y,x:c.x,y:c.y}):(V=t,t=r)):(V=t,t=r)):(V=t,t=r),t}function rt(){var t,n,e,i,o,u;return t=V,(n=ut())!==r?((e=lt())===r&&(e=null),e!==r&&(i=ut())!==r?(u=i,t=n={x2:(o=n).x,y2:o.y,x:u.x,y:u.y}):(V=t,t=r)):(V=t,t=r),t}function it(){var t,n,e,i,o,u;return t=V,(n=ut())!==r?((e=lt())===r&&(e=null),e!==r&&(i=ut())!==r?(u=i,t=n={x1:(o=n).x,y1:o.y,x:u.x,y:u.y}):(V=t,t=r)):(V=t,t=r),t}function ot(){var t,n,e,i,o,u,a,s,c,l,f,h;return t=V,(n=at())!==r?((e=lt())===r&&(e=null),e!==r&&(i=at())!==r?((o=lt())===r&&(o=null),o!==r&&(u=st())!==r&&lt()!==r&&(a=ct())!==r?((s=lt())===r&&(s=null),s!==r&&(c=ct())!==r?((l=lt())===r&&(l=null),l!==r&&(f=ut())!==r?t=n={rx:n,ry:i,xAxisRotation:u,largeArc:a,sweep:c,x:(h=f).x,y:h.y}:(V=t,t=r)):(V=t,t=r)):(V=t,t=r)):(V=t,t=r)):(V=t,t=r),t}function ut(){var t,n,e,i;return t=V,(n=st())!==r?((e=lt())===r&&(e=null),e!==r&&(i=st())!==r?t=n={x:n,y:i}:(V=t,t=r)):(V=t,t=r),t}function at(){var t;return V,(t=ht())===r&&(t=dt()),t!==r&&(t=1*t),t}function st(){var t,n,e;return V,t=V,(n=pt())===r&&(n=null),n!==r&&(e=ht())!==r?t=n=[n,e]:(V=t,t=r),t===r&&(t=V,(n=pt())===r&&(n=null),n!==r&&(e=dt())!==r?t=n=[n,e]:(V=t,t=r)),t!==r&&(t=1*t.join("")),t}function ct(){var n;return V,N.test(t.charAt(V))?(n=t.charAt(V),V++):(n=r,G(S)),n!==r&&(n="1"==n),n}function lt(){var t,n,e,i,o;if(t=V,n=[],(e=mt())!==r)for(;e!==r;)n.push(e),e=mt();else n=r;if(n!==r)if((e=ft())===r&&(e=null),e!==r){for(i=[],o=mt();o!==r;)i.push(o),o=mt();i!==r?t=n=[n,e,i]:(V=t,t=r)}else V=t,t=r;else V=t,t=r;if(t===r){if(t=V,n=V,(e=ft())!==r){for(i=[],o=mt();o!==r;)i.push(o),o=mt();i!==r?n=e=[e,i]:(V=n,n=r)}else V=n,n=r;n!==r&&(n=""),t=n}return t}function ft(){var n;return 44===t.charCodeAt(V)?(n=",",V++):(n=r,G(U)),n}function ht(){var n,e,i;return V,n=V,e=function(){var n,e,i,o;V,n=V,(e=dt())===r&&(e=null);e!==r?(46===t.charCodeAt(V)?(i=B,V++):(i=r,G(L)),i!==r&&(o=dt())!==r?n=e=[e,i,o]:(V=n,n=r)):(V=n,n=r);n===r&&(n=V,(e=dt())!==r?(46===t.charCodeAt(V)?(i=B,V++):(i=r,G(L)),i!==r?n=e=[e,i]:(V=n,n=r)):(V=n,n=r));n!==r&&(n=D(n));return n}(),e!==r?((i=gt())===r&&(i=null),i!==r?n=e=[e,i]:(V=n,n=r)):(V=n,n=r),n===r&&(n=V,(e=dt())!==r&&(i=gt())!==r?n=e=[e,i]:(V=n,n=r)),n!==r&&(n=D(n)),n}function gt(){var n,e,i,o;return V,n=V,E.test(t.charAt(V))?(e=t.charAt(V),V++):(e=r,G(H)),e!==r?((i=pt())===r&&(i=null),i!==r&&(o=dt())!==r?n=e=[e,i,o]:(V=n,n=r)):(V=n,n=r),n!==r&&(n=D(n)),n}function pt(){var n;return F.test(t.charAt(V))?(n=t.charAt(V),V++):(n=r,G(Y)),n}function dt(){var n,e;if(V,n=[],$.test(t.charAt(V))?(e=t.charAt(V),V++):(e=r,G(R)),e!==r)for(;e!==r;)n.push(e),$.test(t.charAt(V))?(e=t.charAt(V),V++):(e=r,G(R));else n=r;return n!==r&&(n=n.join("")),n}function mt(){var n;return V,j.test(t.charAt(V))?(n=t.charAt(V),V++):(n=r,G(O)),n!==r&&(n=""),n}var yt,vt,xt,_t={m:"moveto",l:"lineto",h:"horizontal lineto",v:"vertical lineto",c:"curveto",s:"smooth curveto",q:"quadratic curveto",t:"smooth quadratic curveto",a:"elliptical arc",z:"closepath"};for(var wt in _t)_t[wt.toUpperCase()]=_t[wt];function Mt(t,n){n||(n=[{}]);for(var e=n.length;e--;){var r={code:t,command:_t[t]};for(var i in t==t.toLowerCase()&&(r.relative=!0),n[e])r[i]=n[e][i];n[e]=r}return n}if((e=o())!==r&&V===t.length)return e;throw e!==r&&V<t.length&&G({type:"end"}),yt=P,vt=X<t.length?t.charAt(X):null,xt=X<t.length?W(X,X+1):W(X,X),new qr(qr.buildMessage(yt,vt),yt,vt,xt)};Xr.parseSVG=Xr,Xr.makeAbsolute=function(t){var n,e={x:0,y:0},r={x:"x0",y:"y0",x1:"x0",y1:"y0",x2:"x0",y2:"y0"};return t.forEach((function(t){for(var i in"moveto"===t.command&&(n=t),t.x0=e.x,t.y0=e.y,r)i in t&&(t[i]+=t.relative?t[r[i]]:0);"x"in t||(t.x=e.x),"y"in t||(t.y=e.y),t.relative=!1,t.code=t.code.toUpperCase(),"closepath"==t.command&&(t.x=n.x,t.y=n.y),e=t})),t};var Pr=Xr;const zr=["circle",fr,hr,gr,pr,dr,mr];var Ir=1;function Zr(t,n,e){n._getBBox="svg"===n.nodeName?function(){return this.getBoundingClientRect()}:function(){const n=this.getBoundingClientRect(),e=this.getBBox(),r=Br(t,this,e.x,e.y),i=Br(t,this,e.x+e.width,e.y+e.height),o=Math.abs(r.x-i.x),u=Math.abs(r.y-i.y),a=n.left+n.width/2-o/2,s=n.top+n.height/2-u/2;return{width:o,height:u,left:a,right:a+o,top:s,bottom:s+u,centerX:a+o/2,centerY:s+u/2}},n.localTransform=Cr(n,!1),n.globalPosition=Cr(n,!0,new Tr(e))}function Wr(t,n,e){if(t&&(!t.className||"background"!==t.className.baseVal&&"foreground"!==t.className.baseVal)){if("svg"===t.nodeName)n.svg=t,Zr(n.svg,t,e),t.id||(t.id="svgPlot-"+Ir++);else if("g"===t.nodeName)Cr(t,!0,e);else if("text"===t.nodeName)Zr(n.svg,t,e),t.removeAttribute("textLength"),n.textMarks.push(t),t.style["pointer-events"]="none",t.style["user-select"]="none";else if(zr.includes(t.nodeName)){Zr(n.svg,t,e);const r=t.nodeName;r===mr?(!function(t){let n=Pr.parseSVG(t.getAttribute("d"));if(!n.length)return;t.contour=n;let e=n[n.length-1];const r=["v","h"];3===n.length&&"A"===n[1].code&&"A"===e.code?t.type=fr:"Z"!==e.code?t.type=hr:5===n.length&&r.includes(n[1].code)&&r.includes(n[2].code)&&r.includes(n[3].code)?t.type=dr:t.type=gr}(t),t.setAttribute("vector-effect","non-scaling-stroke")):r!==pr&&r!==gr&&r!==hr||(t.type=r,t.setAttribute("vector-effect","non-scaling-stroke")),t.className&&"domain"===t.className.baseVal?n.hasDomain=!0:(t.setAttribute(br,"true"),n.svgMarks.push(t))}for(const r of t.childNodes)Wr(r,n,new Tr(e))}}const Gr=0,Qr=1,Jr=2,Kr={COUNT:t=>t.length,MIN:v,MAX:y,MEAN:x,SUM:function(t,n){let e=0;if(void 0===n)for(let n of t)(n=+n)&&(e+=n);else{let r=-1;for(let i of t)(i=+n(i,++r,t))&&(e+=i)}return e}};function ti(t,n,e,r,i){const o=r.type===Mr?e.map((t=>t.title.innerHTML)):[r.title.innerHTML],u=t.svgMarks.map((t=>t.__inferred__data__)),a=n.svgMarks.map((t=>t.__inferred__data__[i.title.innerHTML]));if(r.type===Mr)var s=Array.from(f(u,(t=>t[r.title.innerHTML])).values());else s=[u];for(const[t,n]of Object.entries(Kr))for(const r of o){if(s.map((t=>n(t.map((t=>t[r]))))).filter((t=>a.filter((n=>Math.abs(n-t)<=1)).length)).length===a.length)return[Jr,t,e]}return[Gr,null,null]}function ni(t,n,e,r,i,o){if(i.title.innerHTML.toLowerCase()===o.title.innerHTML.toLowerCase())return{encoding1:i,encoding2:o,state1:t,state2:n,match:Qr};const[u,a,s]=ti(t,n,e,i,o),[c,l,f]=ti(n,t,r,o,i);return{encoding1:u?i:o,encoding2:u?o:i,state1:u?t:n,state2:u?n:t,match:u||c,fn:a||l,fields:s||f}}function ei(t){const n=t.map((t=>function(t){const n=[t.xAxis,t.yAxis];return t.legends?[...n,...t.legends]:n}(t))),e=function(t,n){const e=[];for(let r=0;r<n.length;++r)for(let i=r+1;i<n.length;++i)for(const o of n[r])for(const u of n[i]){const a=ni(t[r],t[i],n[r].filter((t=>t!==o)),n[i].filter((t=>t!==u)),o,u);a.match!==Gr&&e.push(a)}return e}(t,n);return function(t){const n=new WeakMap;for(const e of t){const{encoding1:t,encoding2:r,state1:i,state2:o,fields:u}=e;if(e.match===Qr){const e=t.type?t.marks:i.svgMarks,u=r.type?r.marks:o.svgMarks;for(const i of e){const e=t.type?i.mark:i,o=t.type?i.label.innerHTML:i.__inferred__data__[t.title.innerHTML],a=u.filter((t=>(r.type?t.label.innerHTML:t.__inferred__data__[r.title.innerHTML])===o)),s=r.type?a.map((t=>t.mark)):a;n.set(e,n.has(e)?[...n.get(e),...s]:s);for(const t of s)n.has(t)?n.get(t).push(e):n.set(t,[e])}}else for(const t of u){const i={encoding:r,state:o,fn:e.fn};if(t.type)for(const{mark:e}of t.marks)n.set(e,n.has(e)?[...n.get(e),i]:[i]);else n.set(t,n.has(t)?[...n.get(t),i]:[i])}}return n}(e)}var ri="http://www.w3.org/1999/xhtml",ii={svg:"http://www.w3.org/2000/svg",xhtml:ri,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function oi(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),ii.hasOwnProperty(n)?{space:ii[n],local:t}:t}function ui(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===ri&&n.documentElement.namespaceURI===ri?n.createElement(t):n.createElementNS(e,t)}}function ai(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function si(t){var n=oi(t);return(n.local?ai:ui)(n)}function ci(){}function li(t){return null==t?ci:function(){return this.querySelector(t)}}function fi(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function hi(){return[]}function gi(t){return function(n){return n.matches(t)}}var pi=Array.prototype.find;function di(){return this.firstElementChild}var mi=Array.prototype.filter;function yi(){return Array.from(this.children)}function vi(t){return new Array(t.length)}function xi(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function _i(t){return function(){return t}}function wi(t,n,e,r,i,o){for(var u,a=0,s=n.length,c=o.length;a<c;++a)(u=n[a])?(u.__data__=o[a],r[a]=u):e[a]=new xi(t,o[a]);for(;a<s;++a)(u=n[a])&&(i[a]=u)}function Mi(t,n,e,r,i,o,u){var a,s,c,l=new Map,f=n.length,h=o.length,g=new Array(f);for(a=0;a<f;++a)(s=n[a])&&(g[a]=c=u.call(s,s.__data__,a,n)+"",l.has(c)?i[a]=s:l.set(c,s));for(a=0;a<h;++a)c=u.call(t,o[a],a,o)+"",(s=l.get(c))?(r[a]=s,s.__data__=o[a],l.delete(c)):e[a]=new xi(t,o[a]);for(a=0;a<f;++a)(s=n[a])&&l.get(g[a])===s&&(i[a]=s)}function Ai(t){return t.__data__}function bi(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function ki(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function Ti(t){return function(){this.removeAttribute(t)}}function Ci(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ni(t,n){return function(){this.setAttribute(t,n)}}function Si(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function Ui(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function Di(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function Bi(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Li(t){return function(){this.style.removeProperty(t)}}function Ei(t,n,e){return function(){this.style.setProperty(t,n,e)}}function Hi(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function Fi(t,n){return t.style.getPropertyValue(n)||Bi(t).getComputedStyle(t,null).getPropertyValue(n)}function Yi(t){return function(){delete this[t]}}function $i(t,n){return function(){this[t]=n}}function Ri(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}function ji(t){return t.trim().split(/^|\s+/)}function Oi(t){return t.classList||new Vi(t)}function Vi(t){this._node=t,this._names=ji(t.getAttribute("class")||"")}function qi(t,n){for(var e=Oi(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function Xi(t,n){for(var e=Oi(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function Pi(t){return function(){qi(this,t)}}function zi(t){return function(){Xi(this,t)}}function Ii(t,n){return function(){(n.apply(this,arguments)?qi:Xi)(this,t)}}function Zi(){this.textContent=""}function Wi(t){return function(){this.textContent=t}}function Gi(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}function Qi(){this.innerHTML=""}function Ji(t){return function(){this.innerHTML=t}}function Ki(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}function to(){this.nextSibling&&this.parentNode.appendChild(this)}function no(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function eo(){return null}function ro(){var t=this.parentNode;t&&t.removeChild(this)}function io(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function oo(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function uo(t){return t.trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}}))}function ao(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,o=n.length;r<o;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.options);++i?n.length=i:delete this.__on}}}function so(t,n,e){return function(){var r,i=this.__on,o=function(t){return function(n){t.call(this,n,this.__data__)}}(n);if(i)for(var u=0,a=i.length;u<a;++u)if((r=i[u]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=e),void(r.value=n);this.addEventListener(t.type,o,e),r={type:t.type,name:t.name,value:n,listener:o,options:e},i?i.push(r):this.__on=[r]}}function co(t,n,e){var r=Bi(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function lo(t,n){return function(){return co(this,t,n)}}function fo(t,n){return function(){return co(this,t,n.apply(this,arguments))}}xi.prototype={constructor:xi,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Vi.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var ho,go=[null];function po(t,n){this._groups=t,this._parents=n}function mo(t,n){if(t=function(t){let n;for(;n=t.sourceEvent;)t=n;return t}(t),void 0===n&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(n.getScreenCTM().inverse())).x,r.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}}return[t.pageX,t.pageY]}function yo(t){return"string"==typeof t?new po([document.querySelectorAll(t)],[document.documentElement]):new po([fi(t)],go)}function vo(t,n,e){yo(t).each((function(){this.__selected__=n})),function(t,n){yo(t).attr("opacity",n)}(t,e)}function xo(t){vo(t,!1,t[0].__opacity__||1)}function _o(t,n){!function(t){vo(t,!1,.2)}(t),vo(n,!0,1)}function wo(t,n){var e=!0;return n.__role__===br?_o(t.svgMarks,[n]):n.__role__===Ar?function(t,n){const e=n.legend;if(e.type===Mr)var r=[e.scale.domain()[e.scale.range().indexOf(window.getComputedStyle(n)[e.matchingAttr])]];else{const t=e.scale.invert(n._getBBox().width);r=[t,t]}const i=t.svgMarks.filter((function(t){const n=t.__inferred__data__[e.title.innerHTML];return"string"==typeof r[0]?r.includes(n):n>=r[0]&&n<=r[1]}));_o(e.marks.map((t=>t.mark)),[n]),_o(t.svgMarks,i)}(t,n):(e=!1,xo(t.svgMarks),t.legends.forEach((t=>xo(t.marks.map((t=>t.mark)))))),e}function Mo(t){return function(t){return"string"==typeof t?new po([[document.querySelector(t)]],[document.documentElement]):new po([[t]],go)}(t).append("rect").attr("opacity",.35).attr("x",0).attr("y",0).attr("width",0).attr("height",0).attr("id",t.id+"-brush-rect").style("fill","gray").style("stroke","#fff")}function Ao(t){const n=t.map((t=>{return n=function(t){let n=new Vr;return Wr(t,n,new Tr),console.log(n),n}(t),Or(n),function(t){for(let n=0;n<t.svgMarks.length;++n){const e=t.svgMarks[n];if(e.type===hr)continue;const r=t.svg._getBBox(),i=e._getBBox(),o=t.xAxis.ordinal.length?n:t.yAxis.ordinal.length?i.right-r.left:i.centerX-r.left,u=t.yAxis.ordinal.length?n:t.xAxis.ordinal.length?i.top-r.top:i.centerY-r.top,a={};a[t.xAxis.title?t.xAxis.title.innerHTML:"x"]=t.xAxis.ordinal.length?t.xAxis.scale.domain()[o]:t.xAxis.scale.invert(o),a[t.yAxis.title?t.yAxis.title.innerHTML:"y"]=t.yAxis.ordinal.length?t.yAxis.scale.domain()[u]:t.yAxis.scale.invert(u);for(let n=0;n<t.legends.length;++n){const r=t.legends[n],o=r.type===Mr?r.scale.domain()[r.scale.range().indexOf(window.getComputedStyle(e)[r.matchingAttr])]:r.scale.invert(i.width);a[r.title?r.title.innerHTML:"legend-"+n]=o}e.style["pointer-events"]="fill",e.__inferred__data__=a,e.__opacity__=e.hasAttribute("opacity")?+e.getAttribute("opacity"):window.getComputedStyle(e).opacity||1}}(n),n;var n})),e=ei(n);n.forEach((t=>function(t,e){var r=!1;function i(i){if(r)return;const o=i.target;if(wo(t,o)){if(e.has(o))for(const t of e.get(o)){if(t.__selected__)continue;const n=new PointerEvent(i.type,i);t.dispatchEvent(n)}}else n.forEach((t=>wo(t,t.svg)))}function o(n){function e(n){const e=mo(n);if(Math.hypot(u[0]-e[0],u[1]-e[1])<2)return;r=!0;const[i,a,s,c]=function(t,n){n.preventDefault();const[e,r]=mo(n),i=+ho.node().getAttribute("x"),o=+ho.node().getAttribute("y"),u=e-i,a=r-o,s=u<0?u:0,c=a<0?a:0;return ho.attr("width",Math.abs(u)).attr("height",Math.abs(a)).attr("transform","translate("+s+","+c+")"),[i,o,u,a]}(0,n),l=t.xAxis.scale.invert(i),f=t.xAxis.scale.invert(i+s),h=t.yAxis.scale.invert(a),g=t.yAxis.scale.invert(a+c);o=t.svgMarks.filter((function(n){const e=n.__inferred__data__[t.xAxis.title.innerHTML],r=n.__inferred__data__[t.yAxis.title.innerHTML];return e>=v([l,f])&&e<=y([l,f])&&r>=v([h,g])&&r<=y([h,g])}))}function i(n){ho.remove(),_o(t.svgMarks,o),t.svg.removeEventListener("mousemove",e),document.removeEventListener("mouseup",i)}r=!1;var o,u=mo(n);!function(t,n){ho=Mo(t.svg);const[e,r]=mo(n,t.svg);ho.attr("x",e).attr("y",r)}(t,n),t.svg.addEventListener("mousemove",e),document.addEventListener("mouseup",i)}t.svg.addEventListener("click",i),t.svg.addEventListener("mousedown",o)}(t,e)))}po.prototype={constructor:po,select:function(t){"function"!=typeof t&&(t=li(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u,a=n[i],s=a.length,c=r[i]=new Array(s),l=0;l<s;++l)(o=a[l])&&(u=t.call(o,o.__data__,l,a))&&("__data__"in o&&(u.__data__=o.__data__),c[l]=u);return new po(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return fi(t.apply(this,arguments))}}(t):function(t){return null==t?hi:function(){return this.querySelectorAll(t)}}(t);for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var u,a=n[o],s=a.length,c=0;c<s;++c)(u=a[c])&&(r.push(t.call(u,u.__data__,c,a)),i.push(u));return new po(r,i)},selectChild:function(t){return this.select(null==t?di:function(t){return function(){return pi.call(this.children,t)}}("function"==typeof t?t:gi(t)))},selectChildren:function(t){return this.selectAll(null==t?yi:function(t){return function(){return mi.call(this.children,t)}}("function"==typeof t?t:gi(t)))},filter:function(t){"function"!=typeof t&&(t=function(t){return function(){return this.matches(t)}}(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u=n[i],a=u.length,s=r[i]=[],c=0;c<a;++c)(o=u[c])&&t.call(o,o.__data__,c,u)&&s.push(o);return new po(r,this._parents)},data:function(t,n){if(!arguments.length)return Array.from(this,Ai);var e=n?Mi:wi,r=this._parents,i=this._groups;"function"!=typeof t&&(t=_i(t));for(var o=i.length,u=new Array(o),a=new Array(o),s=new Array(o),c=0;c<o;++c){var l=r[c],f=i[c],h=f.length,g=bi(t.call(l,l&&l.__data__,c,r)),p=g.length,d=a[c]=new Array(p),m=u[c]=new Array(p),y=s[c]=new Array(h);e(l,f,d,m,y,g,n);for(var v,x,_=0,w=0;_<p;++_)if(v=d[_]){for(_>=w&&(w=_+1);!(x=m[w])&&++w<p;);v._next=x||null}}return(u=new po(u,r))._enter=a,u._exit=s,u},enter:function(){return new po(this._enter||this._groups.map(vi),this._parents)},exit:function(){return new po(this._exit||this._groups.map(vi),this._parents)},join:function(t,n,e){var r=this.enter(),i=this,o=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=n&&(i=n(i))&&(i=i.selection()),null==e?o.remove():e(o),r&&i?r.merge(i).order():i},merge:function(t){for(var n=t.selection?t.selection():t,e=this._groups,r=n._groups,i=e.length,o=r.length,u=Math.min(i,o),a=new Array(i),s=0;s<u;++s)for(var c,l=e[s],f=r[s],h=l.length,g=a[s]=new Array(h),p=0;p<h;++p)(c=l[p]||f[p])&&(g[p]=c);for(;s<i;++s)a[s]=e[s];return new po(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,u=i[o];--o>=0;)(r=i[o])&&(u&&4^r.compareDocumentPosition(u)&&u.parentNode.insertBefore(r,u),u=r);return this},sort:function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=ki);for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var u,a=e[o],s=a.length,c=i[o]=new Array(s),l=0;l<s;++l)(u=a[l])&&(c[l]=u);c.sort(n)}return new po(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var u=r[i];if(u)return u}return null},size:function(){let t=0;for(const n of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],u=0,a=o.length;u<a;++u)(i=o[u])&&t.call(i,i.__data__,u,o);return this},attr:function(t,n){var e=oi(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?Ci:Ti:"function"==typeof n?e.local?Di:Ui:e.local?Si:Ni)(e,n))},style:function(t,n,e){return arguments.length>1?this.each((null==n?Li:"function"==typeof n?Hi:Ei)(t,n,null==e?"":e)):Fi(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?Yi:"function"==typeof n?Ri:$i)(t,n)):this.node()[t]},classed:function(t,n){var e=ji(t+"");if(arguments.length<2){for(var r=Oi(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?Ii:n?Pi:zi)(e,n))},text:function(t){return arguments.length?this.each(null==t?Zi:("function"==typeof t?Gi:Wi)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Qi:("function"==typeof t?Ki:Ji)(t)):this.node().innerHTML},raise:function(){return this.each(to)},lower:function(){return this.each(no)},append:function(t){var n="function"==typeof t?t:si(t);return this.select((function(){return this.appendChild(n.apply(this,arguments))}))},insert:function(t,n){var e="function"==typeof t?t:si(t),r=null==n?eo:"function"==typeof n?n:li(n);return this.select((function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(ro)},clone:function(t){return this.select(t?oo:io)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,o=uo(t+""),u=o.length;if(!(arguments.length<2)){for(a=n?so:ao,r=0;r<u;++r)this.each(a(o[r],n,e));return this}var a=this.node().__on;if(a)for(var s,c=0,l=a.length;c<l;++c)for(r=0,s=a[c];r<u;++r)if((i=o[r]).type===s.type&&i.name===s.name)return s.value},dispatch:function(t,n){return this.each(("function"==typeof n?fo:lo)(t,n))},[Symbol.iterator]:function*(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r,i=t[n],o=0,u=i.length;o<u;++o)(r=i[o])&&(yield r)}},t.hydrate=function(t){if(t)return Array.isArray(t)||(t=[t]),(t=t.map((t=>"string"==typeof t?document.querySelector(t):t)))?Ao(t):void 0},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=automatic-interaction.min.js.map
